!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es6.object.assign.js"),require("core-js/modules/es6.regexp.match.js"),require("core-js/modules/es6.regexp.split.js"),require("core-js/modules/es6.weak-set.js"),require("core-js/modules/es6.set.js"),require("core-js/modules/es6.weak-map.js"),require("core-js/modules/web.dom.iterable.js"),require("core-js/modules/es6.array.iterator.js"),require("core-js/modules/es6.string.iterator.js"),require("core-js/modules/es6.map.js"),require("core-js/modules/es7.symbol.async-iterator.js"),require("core-js/modules/es6.symbol.js"),require("core-js/modules/es6.regexp.to-string.js"),require("core-js/modules/es6.object.to-string.js"),require("core-js/modules/es6.string.includes.js"),require("core-js/modules/es6.array.copy-within.js"),require("core-js/modules/es7.array.includes.js"),require("core-js/modules/es6.regexp.replace.js"),require("core-js/modules/es6.function.name.js"),require("core-js/modules/es6.number.constructor.js"),require("core-js/modules/es6.regexp.search.js"),require("core-js/modules/es7.string.pad-end.js"),require("core-js/modules/es6.regexp.constructor.js"),require("core-js/modules/es6.string.fixed.js"),require("core-js/modules/es7.string.pad-start.js"),require("core-js/modules/es6.string.repeat.js"),require("core-js/modules/es7.string.trim-right.js"),require("core-js/modules/es7.string.trim-left.js"),require("core-js/modules/es6.array.from.js"),require("core-js/modules/es6.promise.js"),require("core-js/modules/es6.string.ends-with.js"),require("core-js/modules/es6.string.starts-with.js"),require("core-js/modules/es6.array.find.js"),require("core-js/modules/es6.array.find-index.js"),require("core-js/modules/es6.object.keys.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.object.assign.js","core-js/modules/es6.regexp.match.js","core-js/modules/es6.regexp.split.js","core-js/modules/es6.weak-set.js","core-js/modules/es6.set.js","core-js/modules/es6.weak-map.js","core-js/modules/web.dom.iterable.js","core-js/modules/es6.array.iterator.js","core-js/modules/es6.string.iterator.js","core-js/modules/es6.map.js","core-js/modules/es7.symbol.async-iterator.js","core-js/modules/es6.symbol.js","core-js/modules/es6.regexp.to-string.js","core-js/modules/es6.object.to-string.js","core-js/modules/es6.string.includes.js","core-js/modules/es6.array.copy-within.js","core-js/modules/es7.array.includes.js","core-js/modules/es6.regexp.replace.js","core-js/modules/es6.function.name.js","core-js/modules/es6.number.constructor.js","core-js/modules/es6.regexp.search.js","core-js/modules/es7.string.pad-end.js","core-js/modules/es6.regexp.constructor.js","core-js/modules/es6.string.fixed.js","core-js/modules/es7.string.pad-start.js","core-js/modules/es6.string.repeat.js","core-js/modules/es7.string.trim-right.js","core-js/modules/es7.string.trim-left.js","core-js/modules/es6.array.from.js","core-js/modules/es6.promise.js","core-js/modules/es6.string.ends-with.js","core-js/modules/es6.string.starts-with.js","core-js/modules/es6.array.find.js","core-js/modules/es6.array.find-index.js","core-js/modules/es6.object.keys.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Betools=t()}(this,function(){"use strict";var p=function(){},e="yyyy-MM-dd HH:mm:ss",g={treeOptions:{parentKey:"parentId",key:"id",children:"children"},formatDate:e+".SSSZ",formatString:e,dateDiffRules:[["yyyy",31536e6],["MM",2592e6],["dd",864e5],["HH",36e5],["mm",6e4],["ss",1e3],["S",0]]},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var s=t(function(t){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n}),n="undefined",r=Object.prototype.toString,a=Object.assign;function l(e,t){return e.hasOwnProperty(t)}function c(t){return function(e){return s(e)===t}}function i(t){return function(e){return"[object "+t+"]"===r.call(e)}}function u(e){return q(e)?(n={},pe(e,function(e,t){n[t]=u(e)}),n):m(e)?(t=e,p.map(t,u)):e;var t,n}function d(e,t){return e&&(t?u(e):Q(q(e)?{}:[],e))}var f=c(n),m=Array.isArray||i("Array");function y(e){return null!==e&&!isNaN(e)&&!m(e)&&e%1==0}var v=c("function"),h=c("boolean"),_=c("string"),b=c("number"),w=i("RegExp"),x=c("object");function q(e){return!!e&&e.constructor===Object}var k=i("Date"),I=i("Error");function D(e){for(var t in e)return!1;return!0}function N(e){return null===e}var j=("undefined"==typeof Symbol?"undefined":s(Symbol))!==n;function S(e){return j&&Symbol.isSymbol?Symbol.isSymbol(e):"symbol"===s(e)}var O=i("Arguments");var U=("undefined"==typeof document?"undefined":s(document))!==n;var B=("undefined"==typeof window?"undefined":s(window))!==n;var C=("undefined"==typeof FormData?"undefined":s(FormData))!==n;var E=("undefined"==typeof Map?"undefined":s(Map))!==n;var A=("undefined"==typeof WeakMap?"undefined":s(WeakMap))!==n;var F=("undefined"==typeof Set?"undefined":s(Set))!==n;var M=("undefined"==typeof WeakSet?"undefined":s(WeakSet))!==n;function P(e,t){return T(e,t,L)}function L(e,t){return e===t}function T(n,r,a,o,e,t,s){if(n&&r&&!b(n)&&!b(r)&&!_(n)&&!_(r)){if(w(n))return a(""+n,""+r,e,t,s);if(k(n)||h(n))return a(+n,+r,e,t,s);var c,i,u,l=m(n),d=m(r);if(l||d?l&&d:n.constructor===r.constructor)return i=ne(n),u=ne(r),o&&(c=o(n,r,e)),i.length===u.length&&(f(c)?p.every(i,function(e,t){return e===u[t]&&T(n[e],r[u[t]],a,o,l||d?t:e,n,r)}):!!c)}return a(n,r,e,t,s)}function G(t,n){return function(e){return null===e?n:e[t]}}var Y=0;function R(e,t,n){var r=[];if(e)for(t=t||0,n=n||e.length;t<n;t++)r.push(e[t]);return r}function z(r,a){return function(e,t){if(e){if(_(e)||m(e))return e[r]?e[r](t):a(e,t);for(var n in e)if(l(e,n)&&t===e[n])return n}return-1}}var W=z("indexOf",function(e,t){for(var n=0,r=e.length;n<r;n++)if(t===e[n])return n}),H=z("lastIndexOf",function(e,t){for(var n=e.length-1;0<=n;n--)if(t===e[n])return n;return-1});function J(a){return function(e,t,n){if(e&&v(t)){if(n=this||n,m(e)||_(e))return a(e,t,n);for(var r in e)if(l(e,r)&&t.call(n,e[r],r,e))return r}return-1}}var $=J(function(e,t,n){for(var r=0,a=e.length;r<a;r++)if(t.call(n,e[r],r,e))return r;return-1}),K=J(function(e,t,n){for(var r=e.length-1;0<=r;r--)if(t.call(n,e[r],r,e))return r;return-1});function V(e,t){return-1!==W(e,t)}function Z(t,e,n){for(var r,a=e.length,o=1;o<a;o++)r=e[o],ie(ne(e[o]),n?function(e){t[e]=d(r[e],n)}:function(e){t[e]=r[e]});return t}var Q=function(e){if(e){var t=arguments;if(!0!==e)return a?a.apply(Object,t):Z(e,t);if(1<t.length)return Z(e=m(e[1])?[]:{},t,!0)}return e};function X(t,n){try{delete t[n]}catch(e){t[n]=void 0}}function ee(n,r,e){if(n){var t,a=1<arguments.length&&(null===r||!x(r)),e=a?e:r;if(q(n))ue(n,a?function(e,t){n[t]=r}:function(e,t){X(n,t)}),e&&Q(n,e);else if(m(n)){if(a)for(t=n.length;0<t;)n[--t]=r;else n.length=0;e&&n.push.apply(n,e)}}return n}function te(e,r){var a=Object[e];return function(t){var n=[];if(t){if(a)return a(t);pe(t,1<r?function(e){n.push([""+e,t[e]])}:function(){n.push(arguments[r])})}return n}}var ne=te("keys",1),re=te("values",0),ae=te("entries",2);function oe(u,l){return function(n,r){var e,a={},o=[],s=this,t=arguments,c=1,i=t.length;if(!v(r))for(r=0;c<i;c++)m(e=t[c])?o=o.concat(e):o.push(e);return pe(n,function(e,t){((r?r.call(s,e,t,n):-1<$(o,function(e){return e===t}))?u:l)&&(a[t]=e)}),a}}var se=oe(1,0),ce=oe(0,1);function ie(e,t,n){if(e.forEach)e.forEach(t,n);else for(var r=0,a=e.length;r<a;r++)t.call(n||this,e[r],r,e)}function ue(e,t,n){for(var r in e)l(e,r)&&t.call(n||this,e[r],r,e)}function le(t,n,r){de(ne(t),function(e){n.call(r||this,t[e],e,t)})}function de(e,t,n){for(var r=e.length-1;0<=r;r--)t.call(n||this,e[r],r,e)}function pe(e,t,n){return e&&(n=n||this,(m(e)?ie:ue)(e,t,n))}function fe(e,t,n){return e&&(m(e)?de:le)(e,t,n||this)}function me(e){return e?m(e)?e:(""+e).split("."):[]}var ye=/(.+)?\[(\d+)\]$/,ge=/(.+)\[(\d+)\]$/;function ve(e,t){if(e){var n,r,a,o=0;if(l(e,t))return e[t];if(a=(r=me(t)).length)for(n=e;o<a;o++)if(s=n,c=r[o],i=void 0,n=(i=c?c.match(ye):"")?i[1]?s[i[1]]?s[i[1]][i[2]]:void 0:s[i[2]]:s[c],f(n)||N(n))return;return n}var s,c,i}function he(n,r,a){var o,e,s={};return n&&(a=this||a,r&&x(r)?(e=r,r=function(){return D(e)}):v(r)||(r=G(r)),pe(n,function(e,t){o=r?r.call(a,e,t,n):e,s[o]?s[o].push(e):s[o]=[e]})),s}var _e={_hasOwnProp:l,isNaN:isNaN,isFinite:function(e){return b(e)&&isFinite(e)},isUndefined:f,isArray:m,isFloat:function(e){return null!==e&&!isNaN(e)&&!m(e)&&!y(e)},isInteger:y,isFunction:v,isBoolean:h,isString:_,isNumber:b,isRegExp:w,isObject:x,isPlainObject:q,isDate:k,isError:I,isTypeError:function(e){return!!e&&e.constructor===TypeError},isEmpty:D,isNull:N,isSymbol:S,isArguments:O,isElement:function(e){return!!(e&&_(e.nodeName)&&b(e.nodeType))},isDocument:function(e){return!(!e||9!==e.nodeType||!U)},isWindow:function(e){return!(!e||e!==e.window||!B)},isFormData:function(e){return C&&e instanceof FormData},isMap:function(e){return E&&e instanceof Map},isWeakMap:function(e){return A&&e instanceof WeakMap},isSet:function(e){return F&&e instanceof Set},isWeakSet:function(e){return M&&e instanceof WeakSet},isLeapYear:function(e){var e=e?p.toStringDate(e):new Date;return!!k(e)&&((e=e.getFullYear())%4==0&&(e%100!=0||e%400==0))},isMatch:function(n,r){var e=ne(n),t=ne(r);return!t.length||(p.includeArrays(e,t)?p.some(t,function(t){return-1<$(e,function(e){return e===t&&P(n[e],r[t])})}):P(n,r))},isEqual:P,isEqualWith:function(e,t,o){return v(o)?T(e,t,function(e,t,n,r,a){a=o(e,t,n,r,a);return f(a)?e===t:!!a},o):T(e,t,L)},property:G,getType:function(e){return null===e?""+e:S(e)?"symbol":k(e)?"date":m(e)?"array":w(e)?"regexp":I(e)?"error":s(e)},uniqueId:function(e){return(e?""+e:0)+ ++Y},getSize:function(e){var t=0;return _(e)||m(e)?e.length:(pe(e,function(){t++}),t)},slice:R,indexOf:W,lastIndexOf:H,findIndexOf:$,findLastIndexOf:K,includes:V,contains:V,assign:Q,extend:Q,toStringJSON:function(e){if(x(e))return e;if(_(e))try{return JSON.parse(e)}catch(e){}return{}},toJSONString:function(e){return JSON.stringify(e)||""},keys:ne,values:re,entries:ae,pick:se,omit:ce,first:function(e){return re(e)[0]},last:function(e){return(e=re(e))[e.length-1]},each:pe,forOf:function(e,t,n){if(e)if(n=n||this,m(e))for(var r=0,a=e.length;r<a&&!1!==t.call(n,e[r],r,e);r++);else for(var o in e)if(l(e,o)&&!1===t.call(n,e[o],o,e))break},arrayEach:ie,forEach:ie,objectEach:ue,lastForOf:function(e,t,n){var r,a;if(e)if(n=n||this,m(e))for(r=e.length-1;0<=r&&!1!==t.call(n,e[r],r,e);r--);else for(r=(a=ne(e)).length-1;0<=r&&!1!==t.call(n,e[a[r]],a[r],e);r--);},lastEach:fe,lastForEach:de,lastArrayEach:de,lastObjectEach:le,has:function(e,t){if(e){if(l(e,t))return!0;for(var n,r,a,o,s=me(t),c=0,i=s.length,u=e;c<i&&(o=!1,(a=(n=s[c])?n.match(ye):"")?(r=a[1],a=a[2],r?u[r]&&l(u[r],a)&&(o=!0,u=u[r][a]):l(u,a)&&(o=!0,u=u[a])):l(u,n)&&(o=!0,u=u[n]),o);c++)if(c===i-1)return!0}return!1},get:function(e,t,n){return N(e)||f(e)?n:(t=ve(e,t),f(t)?n:t)},set:function(e,t,n){var r,a;return e&&(r=e,t=me(t),a=t.length,ie(t,function(e,t){r=function(e,t,n,r){if(e[t])return n&&(e[t]=r),e[t];var a=t?t.match(ge):null,n=n?r:{};return a?(r=parseInt(a[2]),e[a[1]]||(e[a[1]]=new Array(r+1)),e[a[1]][r]=n):e[t]=n,n}(r,e,t===a-1,n)})),e},groupBy:he,countBy:function(e,t,n){var r=he(e,t,n||this);return ue(r,function(e,t){r[t]=e.length}),r},objectMap:function(n,r,a){var o={};if(n){if(!r)return n;a=a||this,v(r)||(r=G(r)),pe(n,function(e,t){o[t]=r.call(a,e,t,n)})}return o},clone:d,delay:function(e,t){var n=R(arguments,2),r=this;return setTimeout(function(){e.apply(r,n)},t)},bind:function(e,t){var n=R(arguments,2);return t=t||this,function(){return e.apply(t,R(arguments).concat(n))}},once:function(e,t){var n=!1,r=null,a=R(arguments,2);return t=t||this,function(){return n||(r=e.apply(t,R(arguments).concat(a)),n=!0),r}},after:function(e,t,n){var r=0,a=[];return n=n||this,function(){++r<=e&&a.push(arguments[0]),e<=r&&t.apply(n,[a].concat(R(arguments)))}},before:function(e,t,n){var r=0,a=[];return n=n||this,function(){++r<e&&(a.push(arguments[0]),t.apply(n,[a].concat(R(arguments))))}},clear:ee,remove:function(n,r,a){if(n){if(1<arguments.length){var o=[],s=[];return a=a||this,v(r)||(c=r,r=function(e,t){return t===c}),pe(n,function(e,t,n){r.call(a,e,t,n)&&o.push(t)}),m(n)?fe(o,function(e,t){s.push(n[e]),n.splice(e,1)}):(s={},ie(o,function(e){s[e]=n[e],X(n,e)})),s}return ee(n)}var c;return n},range:function(e,t,n){var r,a,o=[],s=arguments;if(s.length<2&&(t=s[0],e=0),a=t>>0,(r=e>>0)<t)for(n=n>>0||1;r<a;r+=n)o.push(r);return o},throttle:function(e,t,n){function r(){s=!0,e.apply(o,a),c=setTimeout(l,t)}var a,o,s=!1,c=0,i=!("leading"in(n=n||{}))||n.leading,u="trailing"in n&&n.trailing,l=function(){c=0,s||!0!==u||r()};return(n=function(){a=arguments,o=this,s=!1,0===c&&(!0===i?r():!0===u&&(c=setTimeout(l,t)))}).cancel=function(){var e=0!==c;return clearTimeout(c),s=!1,c=0,e},n},debounce:function(e,t,n){function r(){i=!0,u=0,e.apply(s,o)}function a(){!0===l&&(u=0),i||!0!==d||r()}var o,s,c=n||{},i=!1,u=0,n="boolean"==typeof n,l="leading"in c?c.leading:n,d="trailing"in c?c.trailing:!n,p=clearTimeout;return(n=function(){i=!1,o=arguments,s=this,0===u?!0===l&&r():p(u),u=setTimeout(a,t)}).cancel=function(){var e=0!==u;return p(u),u=0,e},n},destructuring:function(t,e){var n,r;return t&&e&&(n=Q.apply(this,[{}].concat(R(arguments,1))),r=ne(n),ie(ne(t),function(e){V(r,e)&&(t[e]=n[e])})),t}};function be(e){var t=[];return _e.each(e,function(e){t.includes(e)||t.push(e)}),t}function we(e,t){return t<e?1:-1}function xe(e,t,n,r){if(e){if(t===r)return Be(e).sort(we);var a,r=Se(e,function(e){return{data:e}}),o=(s=e,c=r,t=t,i=n||this,t=_e.isArray(t)?t:[t],_e.arrayEach(t,function(n,r){_e.arrayEach(c,_e.isFunction(n)?function(e,t){e[r]=n.call(i,e.data,t,s)}:function(e){e[r]=_e.get(e.data,n)})}),t).length;if(o){for(;0<=o;)a=function(a,o){return function(e,t){var n=e[a],r=t[a];return n===r?o?o(e,t):0:we(n,r)}}(o,a),o--;r=r.sort(a)}return Se(r,_e.property("data"))}var s,c,i;return[]}function qe(e){for(var t,n=[],r=_e.values(e),a=r.length-1;0<=a;a--)t=0<a?p.random(0,a):0,n.push(r[t]),r.splice(t,1);return n}function ke(s,c,i,u,l){return function(e,t,n){if(e&&t){if(n=n||this,s&&e[s])return e[s](t,n);if(c&&_e.isArray(e)){for(var r=0,a=e.length;r<a;r++)if(!!t.call(n,e[r],r,e)===u)return[!0,!1,r,e[r]][i]}else for(var o in e)if(_e._hasOwnProp(e,o)&&!!t.call(n,e[o],o,e)===u)return[!0,!1,o,e[o]][i]}return l}}var Ie=ke("some",1,0,!0,!1),De=ke("every",1,1,!1,!0),Ne=ke("",0,2,!0),je=ke("find",1,3,!0);function Se(e,t,n){var r=[];if(e&&1<arguments.length){if(n=n||this,_e.isFunction(t)||(t=_e.property(t)),e.map)return e.map(t,n);_e.each(e,function(){r.push(t.apply(n,arguments))})}return r}function Oe(e,t,n){var r=0,a=p.toNumber;return n=n||this,_e.each(e,t?_e.isFunction(t)?function(){r+=a(t.apply(n,arguments))}:function(e){r+=a(e[t])}:function(e){r+=a(e)}),r}function Ue(e){for(var t=[],n=0,r=p.max(e,function(e){return e.length||0}).length;n<r;n++)t.push(Se(e,n));return t}function Be(e){return Se(e,function(e){return e})}function Ce(e,t){for(var n,r=arguments,a=[],o=[],s=2,c=r.length;s<c;s++)a.push(r[s]);if(_e.isArray(t)){for(c=t.length-1,s=0;s<c;s++)o.push(t[s]);t=t[c]}return Se(e,function(e){if(o.length&&(e=function(e,t){for(var n=0,r=t.length;e&&n<r;)e=e[t[n++]];return r&&e?e:0}(e,o)),(n=e[t]||t)&&n.apply)return n.apply(e,a)})}function Ee(o){return function(e,t,n,r){var a=n||{},n=a.children||"children";return o(null,e,t,r||this,[],n,a.mapChildren||n)}}var Ae=Ee(function e(t,n,r,a,o,s,c){var i,u,l,d,p,f;if(_e.isArray(n))for(l=0,d=n.length;l<d;l++){if(i=n[l],p=o.concat([""+l]),r.call(a,i,l,n,p,t))return{index:l,item:i,path:p,items:n,parent:t};if(s&&i&&(f=e(i,i[s],r,a,p.concat([s]),s)))return f}else for(u in n)if(_e._hasOwnProp(n,u)){if(i=n[u],p=o.concat([u]),r.call(a,i,l,n,p,t))return{index:u,item:i,path:p,items:n};if(s&&i&&(f=e(i,i[s],r,a,p.concat([s]),s)))return f}});var Fe=Ee(function n(r,a,o,s,c,i,e){var u;_e.each(a,function(e,t){u=c.concat([""+t]),o.call(s,e,t,a,u,r),e&&i&&n(e,e[i],o,s,u,i)})});var Me=Ee(function n(r,a,o,s,c,i,u){var l,d;return Se(a,function(e,t){return l=c.concat([""+t]),(d=o.call(s,e,t,a,l,r))&&e&&i&&e[i]&&(d[u]=n(e,e[i],o,s,l,i,u)),d})});var Pe={uniq:be,union:function(){for(var e=arguments,t=[],n=0,r=e.length;n<r;n++)t=t.concat(Be(e[n]));return be(t)},sortBy:xe,shuffle:qe,sample:function(e,t){return e=qe(e),arguments.length<=1?e[0]:(t<e.length&&(e.length=t||0),e)},some:Ie,every:De,filter:function(n,r,a){var o=[];if(n&&r){if(a=a||this,n.filter)return n.filter(r,a);_e.each(n,function(e,t){r.call(a,e,t,n)&&o.push(e)})}return o},find:je,findKey:Ne,map:Se,sum:Oe,mean:function(e,t,n){return p.toNumber(Oe(e,t,n||this)/_e.getSize(e))},reduce:function(e,t,n){if(e){var r,a=0,o=this,s=n,c=2<arguments.length,i=_e.keys(e);if(e.length&&e.reduce)return n=function(){return t.apply(o,arguments)},c?e.reduce(n,s):e.reduce(n);for(c&&(a=1,s=e[i[0]]),r=i.length;a<r;a++)s=t.call(o,s,e[i[a]],a,e);return s}},copyWithin:function(e,t,n,r){if(_e.isArray(e)&&e.copyWithin)return e.copyWithin(t,n,r);var a,o,s=t>>0,n=n>>0,c=e.length,r=3<arguments.length?r>>0:c;if(s<c&&(s=0<=s?s:c+s,0<=s&&(n=0<=n?n:c+n)<(r=0<=r?r:c+r)))for(a=0,o=e.slice(n,r);s<c&&!(o.length<=a);s++)e[s]=o[a++];return e},chunk:function(e,t){var n,r=[],a=t>>0||1;if(_e.isArray(e))if(0<=a&&e.length>a)for(n=0;n<e.length;)r.push(e.slice(n,n+a)),n+=a;else r=e.length?[e]:e;return r},zip:function(){return Ue(arguments)},unzip:Ue,zipObject:function(e,n){var r={};return n=n||[],_e.each(_e.values(e),function(e,t){r[e]=n[t]}),r},toArray:Be,includeArrays:function(e,t){var n,r=0,a=_e.includes;if(_e.isArray(e)&&_e.isArray(t)){for(n=t.length;r<n;r++)if(!a(e,t[r]))return!1;return!0}return a(e,t)},pluck:function(e,t){return Se(e,t)},invoke:Ce,invokeMap:Ce,toArrayTree:function(e,t){var n,r,a,o,s,c=_e.assign({},g.treeOptions,t),i=c.strict,u=c.key,l=c.parentKey,d=c.children,p=c.sortKey,t=c.reverse,f=c.data,m=[],y={};return p&&(e=xe(_e.clone(e),p),t&&(e=e.reverse())),n=Se(e,function(e){return e[u]}),_e.each(e,function(e){r=e[u],f?(a={})[f]=e:a=e,o=e[l],y[r]=y[r]||[],y[o]=y[o]||[],y[o].push(a),a[u]=r,a[l]=o,a[d]=y[r],i&&(!i||o)||_e.includes(n,o)||m.push(a)}),i&&(e=e,s=d,_e.each(e,function(e){e.children&&!e.children.length&&_e.remove(e,s)})),m},toTreeArray:function(e,t){return function t(n,e,r){var a,o=r.children,s=r.data;return _e.each(e,function(e){a=e[o],s&&(e=e[s]),n.push(e),a&&t(n,a,r)}),n}([],e,_e.assign({},g.treeOptions,t))},findTree:Ae,eachTree:Fe,mapTree:Me,filterTree:function(e,o,t,s){var c=[];return e&&o&&(s=s||this,Fe(e,function(e,t,n,r,a){o.call(s,e,t,n,r,a)&&c.push(e)},t)),c}};function Le(e){try{return e.setItem("__xe_t",1),e.removeItem("__xe_t"),!0}catch(e){return!1}}function Te(e){return-1<navigator.userAgent.indexOf(e)}var Ge=window.document;var Ye={browse:function(){var t,e,n,r,a="undefined",o={isNode:!1,isMobile:!1,isPC:!1,isDoc:("undefined"==typeof document?"undefined":s(document))!==a};return("undefined"==typeof window?"undefined":s(window))===a&&("undefined"==typeof process?"undefined":s(process))!==a?o.isNode=!0:(n=Te("Edge"),e=Te("Chrome"),r=/(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent),o.isDoc&&(a=document,t=a.body||a.documentElement,_e.each(["webkit","khtml","moz","ms","o"],function(e){o["-"+e]=!!t[e+"MatchesSelector"]})),_e.assign(o,{edge:n,msie:!n&&o["-ms"],safari:!e&&!n&&Te("Safari"),isMobile:r,isPC:!r,isLocalStorage:Le(window.localStorage),isSessionStorage:Le(window.sessionStorage)})),o},copyContent:function(e){var t,n=((t=Ge.getElementById("$BESCopy"))||((t=Ge.createElement("input")).id="$BESCopy",t.style.width="48px",t.style.height="12px",t.style.position="fixed",t.style["z-index"]="0",t.style.left="-500px",t.style.top="-500px",Ge.body.appendChild(t)),t),r=null==e?"":""+e;try{return n.value=r,n.focus(),n.setSelectionRange(0,r.length),Ge.execCommand("copy",!0)}catch(e){}return!1}},Re=864e5,ze=7*Re,We="first",He="last",Je=Date.now||function(){return Ke(new Date)},$e=[{rules:[["yyyy",4],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]},{rules:[["ZZ",5],["Z",6]]}];function Ke(e){return e.getTime()}function Ve(e){return Date.UTC(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}function Ze(e){return e.getFullYear()}function Qe(e){return e.getMonth()}function Xe(e){return Ke((e=e,new Date(Ze(e),Qe(e),e.getDate())))}function et(t,n){var r,a,o,s,c,e,i,u,l=[];return t&&((u=_e.isDate(t))||/^[0-9]{11,13}$/.test(t)?e=new Date((u?Ke:Number)(t)):_e.isString(t)&&(n=n||g.formatDate,_e.each($e,function(e){for(o=0,s=e.rules,c=s.length;o<c;o++){if(r=s[o],-1<(a=n.indexOf(r[0]))){i=t.substring(a,a+r[1])||0,e.offset&&(i=parseFloat(i)+e.offset),l.push(i);break}o===c-1&&l.push(0)}}),(u=l[7])?"z"===u[0]||"Z"===u[0]?e=new Date(Ve(l)):(i=u.match(/([-+]{1})(\d{2}):?(\d{2})/))&&(e=new Date(Ve(l)-("-"===i[1]?-1:1)*parseInt(i[2])*36e5+6e4*parseInt(i[3]))):e=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]))),!e||isNaN(Ke(e))?"Invalid Date":e}function tt(e,t,n,r){t=t[n];return t?_e.isFunction(t)?t(r,n,e):t[r]:r}function nt(e,t,n){for(var r=(e=""+e).length;r<t;)e=n+e,r++;return e}function rt(t,e,n){if(t){if(t=et(t),_e.isDate(t)){for(var r,a=e||g.formatString,e=t.getHours(),o=e<12?"am":"pm",s=t.getTimezoneOffset()/60*-1,c=_e.assign({},g.formatStringMatchs,n?n.formats:null),i=[[/y{2,4}/g,"",function(e){return(""+Ze(t)).substr(4-e.length)}],[/M{1,2}/g,Qe(t)+1],[/d{1,2}/g,t.getDate()],[/H{1,2}/g,e],[/h{1,2}/g,e<=12?e:e-12],[/m{1,2}/g,t.getMinutes()],[/s{1,2}/g,t.getSeconds()],[/S{1,3}/g,t.getMilliseconds()],[/a/g,"",function(e){return tt(t,c,e,o)}],[/A/g,"",function(e){return tt(t,c,e,o.toLocaleUpperCase())}],[/e/g,"",function(e){return tt(t,c,e,t.getDay()-1)}],[/E/g,"",function(e){return tt(t,c,e,t.getDay())}],[/q/g,"",function(e){return tt(t,c,e,Math.floor((Qe(t)+3)/3))}],[/Z{1,2}/g,"",function(e){return tt(t,c,e,(0<=s?"+":"-")+nt(s,2,"0")+(1===e.length?":":"")+"00")}],[/W{1,2}/g,"",function(e){return nt(tt(t,c,e,it(t)),e.length,"0")}],[/D{1,3}/g,"",function(e){return nt(tt(t,c,e,ct(t)),e.length,"0")}]],u=0,l=i.length;u<l;u++)r=i[u],a=a.replace(r[0],r[2]||function(e){return nt(r[1],e.length,"0")});return a}return t}return""}function at(e,t,n){if(e=et(e),_e.isDate(e)&&(t&&(t=t&&!isNaN(t)?t:0,e.setFullYear(Ze(e)+t)),n||!isNaN(n))){if(n===We)return new Date(Ze(e),0,1);if(n===He)return e.setMonth(11),ot(e,0,He);e.setMonth(n)}return e}function ot(e,t,n){t=t&&!isNaN(t)?t:0;if(e=et(e),_e.isDate(e)){if(n||!isNaN(n)){if(n===We)return new Date(Ze(e),Qe(e)+t,1);if(n===He)return new Date(Ke(ot(e,t+1,We))-1);e.setDate(n)}t&&e.setMonth(Qe(e)+t)}return e}function st(e,t,n){var r;return e=et(e),_e.isDate(e)?(r=Number(/^[0-7]$/.test(n)?n:e.getDay()),n=e.getDay(),n=Ke(e)+((0===r?7:r)-(0===n?7:n))*Re,t&&!isNaN(t)&&(n+=t*ze),new Date(n)):e}function ct(e){return e=et(e),_e.isDate(e)?Math.floor((Xe(e)-Xe(at(e,0,We)))/Re)+1:e}function it(e){if(e=et(e),_e.isDate(e)){e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return Math.round(((e.getTime()-t.getTime())/Re+(t.getDay()+6)%7-3)/7)+1}return e}var ut={now:Je,timestamp:function(e,t){if(arguments.length){t=et(e,t);return _e.isDate(t)?Ke(t):t}return Je()},isDateSame:function(e,t,n){return!(!e||!t)&&rt(e,n)===rt(t,n)},toStringDate:et,toDateString:rt,getWhatYear:at,getWhatMonth:ot,getWhatWeek:st,getWhatDay:function e(t,n,r){if(t=et(t),_e.isDate(t)&&!isNaN(n)){if(t.setDate(t.getDate()+Number(n)),r===We)return new Date(Ze(t),Qe(t),t.getDate());if(r===He)return new Date(Ke(e(t,1,We))-1)}return t},getYearDay:ct,getYearWeek:it,getMonthWeek:function e(t){var n,r=et(t);return _e.isDate(r)?((t=st(n=ot(r,0,We),0,1))<n&&(t=st(n,1,1)),t<=r?Math.floor((Xe(r)-Xe(t))/ze)+1:e(st(r,0,1))):r},getDayOfYear:function(e,t){return e=et(e),_e.isDate(e)?_e.isLeapYear(at(e,t))?366:365:e},getDayOfMonth:function(e,t){return e=et(e),_e.isDate(e)?Math.floor((Ke(ot(e,t,He))-Ke(ot(e,t,We)))/Re)+1:e},getDateDiff:function(e,t,n){var r,a,o,s,c,i,u,l={done:!1,time:0};if(e=et(e),t=t?et(t):new Date,_e.isDate(e)&&_e.isDate(t)&&(r=Ke(e))<(a=Ke(t)))for(s=l.time=a-r,c=n&&0<n.length?n:g.dateDiffRules,l.done=!0,u=0,i=c.length;u<i;u++)s>=(o=c[u])[1]?u===i-1?l[o[0]]=s||0:(l[o[0]]=Math.floor(s/o[1]),s-=l[o[0]]*o[1]):l[o[0]]=0;return l}},lt="undefined"!=typeof document;function dt(e,t){var n=parseFloat(t),r=new Date,a=r.getTime();switch(e){case"y":return ut.getWhatYear(r,n).getTime();case"M":return ut.getWhatMonth(r,n).getTime();case"d":return ut.getWhatDay(r,n).getTime();case"h":case"H":return a+60*n*60*1e3;case"m":return a+60*n*1e3;case"s":return a+1e3*n}return a}function pt(e){return(_e.isDate(e)?e:new Date(e)).toUTCString()}function ft(e,t,n){if(lt){var r,a,o,s,c,i=[],u=arguments,l=decodeURIComponent,d=encodeURIComponent,p=document,f=_e.each,m=_e.assign,y=_e.isObject;return this&&this.$context&&(this.$context=null),_e.isArray(e)?i=e:1<u.length?i=[m({name:e,value:t},n)]:y(e)&&(i=[e]),0<i.length?(f(i,function(e){r=m({},g.cookies,e),o=[],r.name&&(a=r.expires,o.push(d(r.name)+"="+d(y(r.value)?JSON.stringify(r.value):r.value)),a&&(a=isNaN(a)?a.replace(/^([0-9]+)(y|M|d|H|h|m|s)$/,function(e,t,n){return pt(dt(n,t))}):/^[0-9]{11,13}$/.test(a)||_e.isDate(a)?pt(a):pt(dt("d",a)),r.expires=a),f(["expires","path","domain","secure"],function(e){void 0!==r[e]&&o.push(r[e]&&"secure"===e?e:e+"="+r[e])})),p.cookie=o.join("; ")}),!0):(s={},(i=p.cookie)&&f(i.split("; "),function(e){c=e.indexOf("="),s[l(e.substring(0,c))]=l(e.substring(c+1)||"")}),1===u.length?s[e]:s)}return!1}function mt(e,t,n){return ft(e,t,n),ft}function yt(e,t){ft(e,0,_e.assign({expires:-1},g.cookies,t))}function gt(){return _e.keys(ft())}_e.assign(ft,{_c:!1,isKey:function(e){return _e.includes(gt(),e)},set:mt,setItem:mt,get:ft,getItem:ft,remove:yt,removeItem:yt,keys:gt,getJSON:ft});var vt={cookie:ft},ht="undefined"==typeof location?0:location,_t=decodeURIComponent,bt=encodeURIComponent;function wt(e){return xt(e.split("?")[1]||"")}function xt(e){var t,n={};return e&&_e.isString(e)&&_e.each(e.split("&"),function(e){t=e.split("="),n[_t(t[0])]=_t(t[1]||"")}),n}function qt(){return ht?ht.origin||ht.protocol+"//"+ht.host:""}function kt(e){var r,a,t=""+e;return 0===t.indexOf("//")?t=(ht?ht.protocol:"")+t:0===t.indexOf("/")&&(t=qt()+t),e=t.replace(/#.*/,"").match(/(\?.*)/),(a={href:t,hash:"",host:"",hostname:"",protocol:"",port:"",search:e&&e[1]&&1<e[1].length?e[1]:""}).path=t.replace(/^([a-z0-9.+-]*:)\/\//,function(e,t){return a.protocol=t,""}).replace(/^([a-z0-9.+-]*)(:\d+)?\/?/,function(e,t,n){return r=n||"",a.port=r.replace(":",""),a.hostname=t,a.host=t+r,"/"}).replace(/(#.*)/,function(e,t){return a.hash=1<t.length?t:"",""}),t=a.hash.match(/#((.*)\?|(.*))/),a.pathname=a.path.replace(/(\?|#.*).*/,""),a.origin=a.protocol+"//"+a.host,a.hashKey=t&&(t[2]||t[1])||"",a.hashQuery=wt(a.hash),a.searchQuery=wt(a.search),a}var It={parseUrl:kt,getBaseURL:function(){if(ht){var e=ht.pathname,t=_e.lastIndexOf(e,"/")+1;return qt()+(t===e.length?e:e.substring(0,t))}return""},locat:function(){return ht?kt(ht.href):{}},serialize:function(e){var n,r=[];return _e.each(e,function(e,t){void 0!==e&&(n=_e.isArray(e),_e.isPlainObject(e)||n?r=r.concat(function n(e,r,a){var o,s=[];return _e.each(e,function(e,t){o=_e.isArray(e),_e.isPlainObject(e)||o?s=s.concat(n(e,r+"["+t+"]",o)):s.push(bt(r+"["+(a?"":t)+"]")+"="+bt(null===e?"":e))}),s}(e,t,n)):r.push(bt(t)+"="+bt(null===e?"":e)))}),r.join("&").replace(/%20/g,"+")},unserialize:xt};function Dt(n){return function(e,t){return n(p.sortBy(_e.clone(e),t,this))}}var Nt=Dt(function(e){return e[0]}),jt=Dt(function(e){return e.reverse()[0]});function St(t){return function(e){if(e){e=t(e);return isNaN(e)?0:e}return 0}}function Ot(e,t){return t?Ut((""+Ut(e)).replace(new RegExp("(\\d+.\\d{0,"+t+"}).*"),"$1")):Bt(e)}var Ut=St(parseFloat),Bt=St(parseInt),e={random:function(e,t){return t<=e?e:(e>>=0)+Math.round(Math.random()*((t||9)-e))},min:Nt,max:jt,commafy:function(e,t){if(e=(""+e).replace(/,/g,"")){var n=_e.assign({spaceNumber:3,separator:","},t),t=n.fixed,t=(t?Ut(e).toFixed(t):e).split(".");return t[0].replace(new RegExp("(?=(?!(\\b))(\\d{"+n.spaceNumber+"})+$)","g"),n.separator)+(t[1]?"."+t[1]:"")}return e},toFixedString:function(e,t){return e=(""+Ot(e,t)).split("."),t?[e[0],".",p.padEnd(e[1]||"",t,"0")].join(""):e[0]},toFixedNumber:Ot,toNumber:Ut,toInteger:Bt};function Ct(e){return e&&e.trimLeft?e.trimLeft():(""+e).replace(/^[\s\uFEFF\xA0]+/g,"")}function Et(e){return e&&e.trimRight?e.trimRight():(""+e).replace(/[\s\uFEFF\xA0]+$/g,"")}var At={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ft={};function Mt(t){var n=new RegExp("(?:"+_e.keys(t).join("|")+")","g");return function(e){return(""+e).replace(n,function(e){return t[e]})}}function Pt(e,t){var n=""+e;if(e.repeat)return e.repeat(t);t=isNaN(t)?[]:new Array(parseInt(t));return t.join(n)+(0<t.length?n:"")}_e.each(At,function(e,t){Ft[At[t]]=t});n={trim:function(e){return e&&e.trim?e.trim():Et(Ct(e))},trimLeft:Ct,trimRight:Et,escape:Mt(At),unescape:Mt(Ft),camelCase:function(e){return(""+e).replace(/(-[a-zA-Z])/g,function(e,t){return t.substring(1).toLocaleUpperCase()})},kebabCase:function(e){return(""+e).replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},repeat:Pt,padStart:function(e,t,n,r){return t>>=0,n=n===r?" ":""+n,(e=""+e).padStart?e.padStart(t,n):t>e.length?((t-=e.length)>n.length&&(n+=Pt(n,t/n.length)),n.slice(0,t)+e):e},padEnd:function(e,t,n,r){return t>>=0,n=n===r?" ":""+n,(e=""+e).padEnd?e.padEnd(t,n):t>e.length?((t-=e.length)>n.length&&(n+=Pt(n,t/n.length)),e+n.slice(0,t)):e},startsWith:function(e,t,n){return e=""+e,0===(1===arguments.length?e:e.substring(n)).indexOf(t)},endsWith:function(e,t,n){return e=""+e,1===arguments.length?e.indexOf(t)===e.length-1:e.substring(0,n).indexOf(t)===n-1}};window.BECONFIG={},window.BECONFIG.topdomain=window.BECONFIG.topDomain=window._CONFIG&&window._CONFIG.topDomain?window._CONFIG.topDomain:window.location.host.split(".").slice(-2).join("."),window.BECONFIG.domain="https://www."+window.BECONFIG.topdomain,window.BECONFIG.restAPI="https://api."+window.BECONFIG.topdomain+"/gateway",window.BECONFIG.xmysqlAPI="https://api."+window.BECONFIG.topdomain+"/gateway-xmysql",window.BECONFIG.domainURL=window.BECONFIG.domain+"/jeecg-boot",window.BECONFIG.domian=window.BECONFIG.domain,window.BECONFIG.domianURL=window.BECONFIG.domain+"/jeecg-boot",window.BECONFIG.uploadURL="https://upload."+window.BECONFIG.topdomain,window.BECONFIG.uploaxURL="https://oa-system-oss.oss-cn-beijing.aliyuncs.com",window.BECONFIG.downloadURL=window.BECONFIG.uploaxURL,window.BECONFIG.ossURL=window.BECONFIG.uploaxURL,window.BECONFIG.docDownURL=window.BECONFIG.uploadURL,window.BECONFIG.imgDomainURL=window.BECONFIG.uploadURL,window.BECONFIG.previewURL="https://fileview."+window.BECONFIG.topdomain+"/onlinePreview?officePreviewType=image&url=",window.BECONFIG.officeURL="https://view.officeapps.live.com/op/view.aspx?src=",window.BECONFIG.thumborURL="https://thumbor."+window.BECONFIG.topdomain+"/unsafe/fill/100/60/sm/0/plain/",window.BECONFIG.imageURL=window.BECONFIG.previewURL,window.BECONFIG.videoURL=window.BECONFIG.previewURL,window.BECONFIG.viewURL=window.BECONFIG.domainURL+"/generic/web/viewer.html?file=",window.BECONFIG.casPrefixUrl="https://sso."+window.BECONFIG.topdomain+"/cas",window.BECONFIG.validURL=window.BECONFIG.domain+"/sys/common/url?path=",window.BECONFIG.staticDomainURL=window.BECONFIG.uploadURL,window.BECONFIG.ipLocationURL="https://apis.map.qq.com/ws/location/v1/ip?key=3BFBZ-ZKD3X-LW54A-ZT76D-E7AHO-4RBD5",window.BECONFIG.weatherURL="https://weather.".concat(window.BECONFIG.topdomain),window.BECONFIG.company="领地集团",window.BECONFIG.office_expire_time=1e4;var Lt={PDF_PREVIEW_URL:"/jeecg-boot/generic/web/viewer.html?file=",OFFICE_PREVIEW_URL:"/onlinePreview?officePreviewType=image&url=",OFFICE_PREVIEW_TYPE:["doc","docx","xlsx","xls","ppt","pptx"],WORKFLOW_STATUS:{1:"待提交",2:"处理中",3:"审核中",4:"已完成",5:"已知会"},WORKSTEP_STATUS:{1:"-1",2:"0",3:"1",4:"2",5:"3"},WORKSTEP_TYPE:{1:"none",2:"primary",3:"primary",4:"success",5:"success"},LEAVE_TYPE:{affairs_leave:"事假",sick_leave:"病假",marital_leave:"婚假",funeral_leave:"丧假",maternity_leave:"产假",paternity_leave:"陪产假",annual_leave:"年假",wr_injury_leave:"工伤假",other_leave:"其他"},REQUEST_API_CONFIG:{domain:window.BECONFIG.domain,restapi:window.BECONFIG.restAPI,token:"".concat(window.BECONFIG.domain,"/jeecg-boot/sys/common/token"),user:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/user"),role:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/role"),service:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/service"),permission:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/permission"),permissionNoPager:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/permission/no-pager")},STORAGE_KEY:"system_oa_app",TOKEN_KEY:"Access-Token"},Tt=t(function(e){var t=function(s){var i,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",a=t.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a,o,s,c,t=t&&t.prototype instanceof g?t:g,t=Object.create(t.prototype),r=new I(r||[]);return t._invoke=(a=e,o=n,s=r,c=d,function(e,t){if(c===f)throw new Error("Generator is already running");if(c===m){if("throw"===e)throw t;return N()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(r===i){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=i,e(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;var r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y;{if(!r.done)return r;n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=i)}n.delegate=null;return y}(n,s);if(r){if(r===y)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===d)throw c=m,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=f;r=l(a,o,s);if("normal"===r.type){if(c=s.done?m:p,r.arg!==y)return{value:r.arg,done:s.done}}else"throw"===r.type&&(c=m,s.method="throw",s.arg=r.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}s.wrap=c;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",y={};function g(){}function v(){}function h(){}var _={};_[r]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(D([])));t&&t!==e&&u.call(t,r)&&(_=t);var b=h.prototype=g.prototype=Object.create(_);function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function x(s,c){var t;this._invoke=function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,a){e=l(s[e],s,n);if("throw"!==e.type){var o=e.arg,n=o.value;return n&&"object"==typeof n&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,a)},function(e){t("throw",e,r,a)}):c.resolve(n).then(function(e){o.value=e,r(o)},function(e){return t("throw",e,r,a)})}a(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function q(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function D(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return e.next=e}}return{next:N}}function N(){return{value:i,done:!0}}return((v.prototype=b.constructor=h).constructor=v).displayName=o(h,a,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,o(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return{__await:e}},w(x.prototype),x.prototype[n]=function(){return this},s.AsyncIterator=x,s.async=function(e,t,n,r,a){void 0===a&&(a=Promise);var o=new x(c(e,t,n,r),a);return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(b),o(b,a,"Generator"),b[r]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=D,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=i),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var s=u.call(a,"catchLoc"),c=u.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,a=n.completion;return"throw"===a.type&&(r=a.arg,k(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),y}},s}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}});function Gt(e,t,n,r,a,o,s){try{var c=e[o](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}var Yt=function(c){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=c.apply(e,s);function a(e){Gt(r,t,n,a,o,"next",e)}function o(e){Gt(r,t,n,a,o,"throw",e)}a(void 0)})}};function Rt(e){return zt.apply(this,arguments)}function zt(){return(zt=Yt(Tt.mark(function e(t){var n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.BECONFIG&&superagent)return n="".concat(window.BECONFIG.validURL).concat(t),e.prev=2,e.next=5,superagent.get(n);e.next=13;break;case 5:return n=e.sent,console.log(" url :"+t+" result :"+JSON.stringify(n)),e.abrupt("return",n.body.success);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function Wt(){return(Wt=Yt(Tt.mark(function e(t){var n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.BECONFIG)return n=["doc","docx","xlsx","xls","ppt","pptx"],e.next=4,Rt(t.file);e.next=8;break;case 4:r=e.sent,a=(a=t.name.split("."))[a.length-1],!r&&n.includes(a)?window.open(window.BECONFIG.previewURL+t.msrc):window.open(t.src);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(){return(Ht=Yt(Tt.mark(function e(t){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{vant.Toast.success("开始下载中，请稍等..."),window.saveAs(t.msrc,t.name)}catch(e){window.open(t.msrc)}case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}O={queryUrlValid:Rt,handlePreview:function(e){return Wt.apply(this,arguments)},handleDownLoad:function(e){return Ht.apply(this,arguments)}};var Jt=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r};var $t=function(e){if(Array.isArray(e))return Jt(e)};var Kt=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var Vt=function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}};var Zt=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Qt=function(e){return $t(e)||Kt(e)||Vt(e)||Zt()};function Xt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t){"string"==typeof e&&e.includes("T")&&(e=new Date(e));if(/^\d+(\.\d+)?$/.test(e)||e instanceof Date){var n,r=e instanceof Date?e:new Date(e),a={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));try{t=t.replace("T"," ")}catch(e){console.log("formate date error : "+e)}return t}try{void 0!==e&&null!=e||(e="--"),t=(t=(e=e.trim()).substr(0,t.length)).replace("T"," ")}catch(e){console.log("formate date error : "+e)}return t}function nn(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{return void 0===e||null==e||""==e||"{}"==JSON.stringify(e)?t:e}catch(e){console.log(e)}}function rn(e){try{return void 0===e||null==e||""==e||"{}"==JSON.stringify(e)}catch(e){console.log(e)}}function an(){return(an=Yt(Tt.mark(function e(){var t,n=arguments;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<n.length&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(){function t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}if(1===arguments.length){var e=Array.prototype.slice.call(arguments)[0],n=Qt(Array(e).keys()).map(function(e){return t(0<e?0:1,9)});return parseInt(n.join(""))}if(2<=arguments.length){e=Array.prototype.slice.call(arguments),n=e[0],e=e[1];return t(n,e)}return Number.NaN}function sn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",t=e.split(t);return console.log("".concat(t.toString())),t[1].includes(">")?(t[1]=t[1].replace("项目组>",""),n=t[1].split(">")[0],r=t[1].split(">")[1]):n=t[1],{company:e,zone:n,project:r}}function cn(e,t){e=e||1,t=t||"0123456789qwertyuioplkjhgfdsazxcvbnm";for(var n="",r=0;r<e;r++)n+=t[on(0,t.length-1)];return n}function un(){return(un=Yt(Tt.mark(function e(t){var n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.BECONFIG.validURL).concat(t),e.prev=1,e.next=4,superagent.get(n);case 4:return n=e.sent,console.log(" url :"+t+" result :"+JSON.stringify(n)),e.abrupt("return",n.body.success);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function ln(e){return window.decodeURIComponent(e)}H={tools:{filterObj:function(e){if("object"==s(e)){for(var t in e)!e.hasOwnProperty(t)||null!=e[t]&&null!=e[t]&&""!==e[t]||delete e[t];return e}},formatDate:tn,deNull:nn,isNull:rn,isBlank:function(e){try{return rn(e)}catch(e){console.log(e)}},isEmpty:function(e){try{return rn(e)}catch(e){console.log(e)}},sleep:function(){return an.apply(this,arguments)},divisionPercentage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0..toFixed(2),e="string"==typeof e?parseFloat(e):e,t="string"==typeof t?parseFloat(t):t;try{n=(rn(t)?0:parseFloat(e/t*100)).toFixed(2)}catch(e){console.log(e)}return n},cloneObject:function(e){return JSON.parse(JSON.stringify(e))},clone:function(e){return JSON.parse(JSON.stringify(e))},randomNumber:on,isWechat:function(){var e=navigator.userAgent.toLowerCase(),t=window.localStorage.getItem("system_navigator_useragent")||"";return"micromessenger"==e.match(/MicroMessenger/i)||t.match(/MicroMessenger/i),!0},isWework:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},isPCWeb:function(){var e=navigator.userAgent.toLowerCase(),t=window.localStorage.getItem("system_navigator_useragent")||"";return"micromessenger"!=e.match(/MicroMessenger/i)&&"micromessenger"!=t.match(/MicroMessenger/i)},queryZoneProject:sn,queryZoneProjectAll:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";try{var r="",a=n?n.slice(0,n.lastIndexOf(">")):"",n=n?n.slice(n.lastIndexOf(">")+1):"",o=Xt(e);try{for(o.s();!(c=o.n()).done;){var s=c.value;if(t.includes(">".concat(s,">"))){var c=sn(t,">".concat(s,">"));t=s,r=c.zone,a=c.project||a;break}}}catch(e){o.e(e)}finally{o.f()}return{company:t,zone:r,project:a,department:n}}catch(e){return{company:t,zone:"",project:"",department:n}}},randomString:cn,randomUUID:function(){return cn(32,"0123456789abcdef")},underLine2CamelCase:function(e){return e.replace(/_([a-z])/g,function(e,t){return t.toUpperCase()})},isEmail:function(e){return/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(e)},isMobile:function(e){return/^1[0-9]{10}$/.test(e)},isPhone:function(e){return/^([0-9]{3,4}-)?[0-9]{7,8}$/.test(e)},isURL:function(e){return/^http[s]?:\/\/.*/.test(e)},delHtmlTag:function(e){try{return rn(e)?"":nn(e).replace(/<[^>]+>/g,"").replace(/&nbsp;/g,"")}catch(e){console.log(e)}},abbreviation:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:75;try{return nn(e).length<t?nn(e).trim():nn(e).trim().substring(0,t)+"..."}catch(e){console.log(e)}},queryUrlValid:function(e){return un.apply(this,arguments)},getUrlParam:function(e){try{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(t);return null!=t?ln(t[2]):null}catch(e){console.log(e)}},queryUrlParam:function(e){return e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),null!=(e=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(e))?ln(e[2]):null},encodeURI:function(e){return window.encodeURIComponent(e)},decodeURI:ln,queryUrlString:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"history";try{if("history"==t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");return null!=(r=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(n))?("system_type"==e&&localStorage.setItem("system_type",ln(r[2])),ln(r[2])):"system_type"==e?localStorage.getItem("system_type")||"v2":null}var r,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");if(null!=(r=window.location.search.substr(1).match(n)))return unescape(r[2])}catch(e){console.error(e)}return""},queryUniqueID:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,t=tn((new Date).getTime(),"yyyyMMddhhmmssS");console.log("动态编号 :"+t);var n=Math.floor(1e20*Math.random())+""+Math.floor(1e20*Math.random())+"";return console.log("随机编号 :"+n),(t+n).replace(/\./g,"").substring(0,e)},mobileHide:function(e){return(e=e.slice(0,11)).replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},mobileEnsconce:function(e){return(e=e.slice(0,11)).replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},contain:function(e,t){e=",".concat(e,",");var n="";try{var r=Xt(t.split(","));try{for(r.s();!(a=r.n()).done;)var a=a.value,n=e.includes(",".concat(a,","))?"".concat(n,",").concat(a):n}catch(e){r.e(e)}finally{r.f()}}catch(e){console.log(e)}return n.startsWith(",")&&(n=n.substring(1)),n.endsWith(",")&&(n=n.substring(0,n.length-1)),n}}};try{localforage?localforage.config({driver:localforage.WEBSQL,name:"cache",version:1,size:4294967296,storeName:"keyvaluepairs",description:""}):localforage={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}}catch(e){console.log(e)}var K={storage:{setStore:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(o.window&&e){"string"!=typeof t&&(t=JSON.stringify(t));var r=o.window.localStorage;try{r.setItem(e,t),localforage.setItem(e,t)}catch(e){console.log(e)}try{var a=parseInt((new Date).getTime()/1e3);n&&!isNaN(parseInt(n))&&(r.setItem("".concat(e,"_expire"),a+n),localforage.setItem("".concat(e,"_expire"),a+n))}catch(e){console.log(e)}}},getStore:function(e){if(o.window&&e){var t=window.localStorage.getItem(e),e=window.localStorage.getItem("".concat(e,"_expire"));if(e)if(e<parseInt((new Date).getTime()/1e3))return;try{"string"==typeof t&&/^[\{|\[](.*)[\}\]]$/.test(t)&&(t=JSON.parse(t))}catch(e){console.log(e)}return t}},clearStore:function(e){o.window&&e&&(window.localStorage.removeItem(e),window.localStorage.removeItem("".concat(e,"_expire")),localforage.removeItem(e),localforage.removeItem("".concat(e,"_expire")))},clearAll:function(e){o.window&&e&&("all"==e?(localforage.clear(),window.localStorage.clear()):("storage"!=e&&"db"==e?localforage:window.localStorage).clear())},setStoreAll:function(r,a){var o=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=2<o.length&&void 0!==o[2]?o[2]:null,"string"!=typeof a&&(a=JSON.stringify(a));try{localforage.setItem(r,a)}catch(e){console.log(e)}try{localStorage.setItem(r,a)}catch(e){console.log(e)}if(t&&!isNaN(parseInt(t))){n=parseInt((new Date).getTime()/1e3);try{localforage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}try{localStorage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}}case 5:case"end":return e.stop()}},e)}))()},getStoreAll:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localforage.getItem(a);case 2:return t=e.sent,e.next=5,localforage.getItem("".concat(a,"_expire"));case 5:if(n=e.sent,null!=t&&void 0!==t||(t=localStorage.getItem(a)),null!=n&&void 0!==n||(n=localStorage.getItem("".concat(a,"_expire"))),!n){e.next=12;break}if(r=parseInt((new Date).getTime()/1e3),n<r)return e.abrupt("return");e.next=12;break;case 12:try{"string"==typeof t&&/^[\{|\[](.*)[\}\]]$/.test(t)&&(t=JSON.parse(t))}catch(e){console.log(e)}return e.abrupt("return",t);case 14:case"end":return e.stop()}},e)}))()},setStoreDB:function(r,a){var o=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=2<o.length&&void 0!==o[2]?o[2]:null,"string"!=typeof a&&(a=JSON.stringify(a));try{localforage.setItem(r,a)}catch(e){console.log(e)}if(t&&!isNaN(parseInt(t))){n=parseInt((new Date).getTime()/1e3);try{localforage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}}case 4:case"end":return e.stop()}},e)}))()},getStoreDB:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localforage.getItem(a);case 2:return t=e.sent,e.next=5,localforage.getItem("".concat(a,"_expire"));case 5:if(!(n=e.sent)){e.next=10;break}if(r=parseInt((new Date).getTime()/1e3),n<r)return e.abrupt("return");e.next=10;break;case 10:try{"string"==typeof t&&/^[\{|\[](.*)[\}\]]$/.test(t)&&(t=JSON.parse(t))}catch(e){console.log(e)}return e.abrupt("return",t);case 12:case"end":return e.stop()}},e)}))()},clearDB:function(e){"all"==e?localforage.clear():(localforage.removeItem(e),localforage.removeItem("".concat(e,"_expire")))},getToken:function(){return getStore(Lt.TOKEN_KEY)},setToken:function(e){return setStore(Lt.TOKEN_KEY,e,2592e3)},removeToken:function(){return clearStore(Lt.TOKEN_KEY)},clearLoginInfo:function(){return Yt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{clearStore("system_linfo"),clearStore("system_userinfo"),clearStore("system_token"),clearStore("system_department"),clearStore("system_login_time"),clearDB("system_linfo"),clearDB("system_userinfo"),clearDB("system_token"),clearDB("system_department"),clearDB("system_login_time")}catch(e){console.log(e)}case 1:case"end":return e.stop()}},e)}))()}}},dn=H.tools,pn=K.storage,ae={announce:{queryAnnounceList:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_announce?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_administration"),dn.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("xid",dn.queryUniqueID()).set("id",dn.queryUniqueID()).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=dn.formatDate(e.operate_time,"yyyy-MM-dd"),n=dn.formatDate(e.create_time,"yyyy-MM-dd"),r=dn.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=dn.deNull(e.username).split(","),e.table_name="bs_announce",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_administration",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryHeadList:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_redhead?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_redhead"),dn.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("xid",dn.queryUniqueID()).set("id",dn.queryUniqueID()).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=dn.formatDate(e.operate_time,"yyyy-MM-dd"),n=dn.formatDate(e.create_time,"yyyy-MM-dd"),r=dn.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=dn.deNull(e.username).split(","),e.table_name="bs_redhead",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_redhead",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryNewsList:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_news?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_news"),dn.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("xid",dn.queryUniqueID()).set("id",dn.queryUniqueID()).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=dn.formatDate(e.operate_time,"yyyy-MM-dd"),n=dn.formatDate(e.create_time,"yyyy-MM-dd"),r=dn.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=dn.deNull(e.username).split(","),e.table_name="bs_news",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_news",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryNoticeList:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_notice?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_notice"),dn.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("xid",dn.queryUniqueID()).set("id",dn.queryUniqueID()).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=dn.formatDate(e.operate_time,"yyyy-MM-dd"),n=dn.formatDate(e.create_time,"yyyy-MM-dd"),r=dn.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=dn.deNull(e.username).split(","),e.table_name="bs_notice",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_notice",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()}}},fn=H.tools,mn="ALL_USER_CACHE_KEY_V10",yn="ALL_USER_CACHE_WORK_KEY_V10",gn="ALL_USER_CACHE_DEPART_KEY_V10",se={contact:{queryDepartUserList:function(){return Yt(Tt.mark(function e(){var t,n,r,a,o,s;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.storage.getStore("system_userinfo");case 2:if(t=e.sent,n=Betools.tools.queryUrlString("system_type","history"),Betools.tools.isNull(t)||Betools.tools.isNull(t.main_department))return e.abrupt("return",{records:[],total:0});e.next=6;break;case 6:return r=t.main_department,e.next=9,Betools.storage.getStoreDB(gn+"#depart_id#"+r);case 9:if(a=e.sent,Betools.tools.isNull(a)){e.next=12;break}return e.abrupt("return",a);case 12:return a="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/wework_depart_list/").concat(t.main_department),e.next=15,superagent.get(a).set("xid",fn.queryUniqueID()).set("id",fn.queryUniqueID()).set("accept","json");case 15:return s=e.sent,o=s.body.department.find(function(e){return e.id=t.main_department}),s="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/wework_depart_user/").concat(o.parentid,"/1"),o={},e.prev=19,e.next=22,superagent.get(s).set("xid",fn.queryUniqueID()).set("id",fn.queryUniqueID()).set("accept","json");case 22:return s=e.sent,window.__.each(s.body.userlist,function(e){try{e.wxid=e.userid}catch(e){console.log(e)}try{e.initial=e.name.slice(0,1).toLowerCase()}catch(e){console.log(e)}try{Betools.tools.isNull(e.avatar)?e.headerUrl="https://cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@v8.0.0/images/icon-manage-16.png":e.headerUrl=window._CONFIG.uploaxURL+"/"+e.avatar}catch(e){console.log(e)}try{e.nickname=e.name}catch(e){console.log(e)}try{e.remark=e.name}catch(e){console.log(e)}e.signature="",e.album=[{imgSrc:""}],e.area=["中国","四川","成都"],e.from="通过企业联系人添加",e.tag="",e.desc={title:"",picUrl:""},e.status="1",e.orgCode="",e.updateBy="",e.createTime=Betools.tools.formatDate(e.create_time,"yyyy-MM-dd"),e.createBy="admin",e.workNo="",e.delFlag="0",e.status_dictText="",e.birthday=Betools.tools.formatDate(e.birthday,"yyyy-MM-dd"),e.updateTime=e.createTime,e.telephone=e.phone,e.activitiSync="",e.sex="1",e.sex_dictText=""}),o.records=s.body.userlist,o.total=s.body.userlist.length,Betools.storage.setStoreDB(gn+"#depart_id#"+r,o,259200),e.abrupt("return",o);case 30:e.prev=30,e.t0=e.catch(19),console.log(e.t0);case 33:case"end":return e.stop()}},e,null,[[19,30]])}))()},queryWorkUserList:function(){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/v3/employee"),n={},e.next=4,Betools.storage.getStoreDB(yn);case 4:if(r=e.sent,Betools.tools.isNull(r)){e.next=7;break}return e.abrupt("return",r);case 7:return e.prev=7,e.next=10,superagent.get(t).set("xid",fn.queryUniqueID()).set("id",fn.queryUniqueID()).set("accept","json");case 10:return r=e.sent,window.__.each(r.body,function(e){try{e.wxid=e.username}catch(e){console.log(e)}try{e.initial=e.username.slice(0,1).toLowerCase()}catch(e){console.log(e)}try{Betools.tools.isNull(e.avatar)?e.headerUrl="https://cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@v8.0.0/images/icon-manage-16.png":e.headerUrl=window._CONFIG.uploaxURL+"/"+e.avatar}catch(e){console.log(e)}try{e.nickname=e.realname}catch(e){console.log(e)}try{e.remark=e.realname}catch(e){console.log(e)}e.signature="",e.album=[{imgSrc:""}],e.area=["中国","四川","成都"],e.from="通过企业联系人添加",e.tag="",e.desc={title:"",picUrl:""},e.status="1",e.orgCode="",e.updateBy="",e.createTime=Betools.tools.formatDate(e.create_time,"yyyy-MM-dd"),e.createBy="admin",e.workNo="",e.delFlag="0",e.status_dictText="",e.birthday=Betools.tools.formatDate(e.birthday,"yyyy-MM-dd"),e.updateTime=e.createTime,e.telephone=e.phone,e.activitiSync="",e.sex="1",e.sex_dictText=""}),n.records=r.body,n.total=r.body.length,Betools.storage.setStoreDB(yn,n,259200),e.abrupt("return",n);case 18:e.prev=18,e.t0=e.catch(7),console.log(e.t0);case 21:case"end":return e.stop()}},e,null,[[7,18]])}))()},queryUserList:function(o){return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.pageNo=o.pageNo-1,n=""==Betools.tools.deNull(o.username)?"":"_where=(username,like,~".concat(o.username,"~)~or(realname,like,~").concat(o.username,"~)&"),t="asc"==o.order?"":"-",a="".concat(window.BECONFIG.xmysqlAPI,"/api/v_user?").concat(n,"_p=").concat(o.pageNo,"&_size=").concat(o.pageSize,"&_sort=").concat(t).concat(o.column),t="".concat(window.BECONFIG.xmysqlAPI,"/api/v_user/count?").concat(n),n={},e.prev=6,e.next=9,superagent.get(a).set("xid",fn.queryUniqueID()).set("id",fn.queryUniqueID()).set("accept","json");case 9:return r=e.sent,e.next=12,superagent.get(t).set("xid",fn.queryUniqueID()).set("id",fn.queryUniqueID()).set("accept","json");case 12:return a=e.sent,console.log(r),window.__.each(r.body,function(e){try{e.wxid=e.username}catch(e){console.log(e)}try{e.initial=e.username.slice(0,1).toLowerCase()}catch(e){console.log(e)}try{Betools.tools.isNull(e.avatar)?e.headerUrl="https://cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@v8.0.0/images/icon-manage-16.png":e.headerUrl=window._CONFIG.uploaxURL+"/"+e.avatar}catch(e){console.log(e)}try{e.nickname=e.realname}catch(e){console.log(e)}try{e.remark=e.realname}catch(e){console.log(e)}e.signature="",e.album=[{imgSrc:""}],e.area=["中国","四川","成都"],e.from="通过企业联系人添加",e.tag="",e.desc={title:"",picUrl:""},e.status="1",e.orgCode="",e.updateBy="",e.createTime=Betools.tools.formatDate(e.create_time,"yyyy-MM-dd"),e.createBy="admin",e.workNo="",e.delFlag="0",e.status_dictText="",e.birthday=Betools.tools.formatDate(e.birthday,"yyyy-MM-dd"),e.updateTime=e.createTime,e.telephone=e.phone,e.activitiSync="",e.sex="1",e.sex_dictText=""}),n.records=r.body,n.total=a.body[0].no_of_rows<=o.pageSize?r.body.length:a.body[0].no_of_rows,e.abrupt("return",n);case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[6,20]])}))()},queryContacts:function(){return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.storage.getStore("system_userinfo");case 2:return t=e.sent,n=[],e.next=7,Betools.storage.getStoreDB(mn+"#depart#"+t.main_department);case 7:if(r=e.sent,Betools.tools.isNull(r)||r.length<=0)return e.next=11,queryDepartUserList();e.next=18;break;case 11:(a=e.sent.records).total,Betools.tools.isNull(a)||a.length<=0||(n=[].concat(Qt(n),Qt(a))),Betools.storage.setStoreDB(mn+"#depart#"+t.main_department,n,86400),e.next=19;break;case 18:n=r;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}},e)}))()},getUserInfo:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.storage.getStore("system_userinfo");case 2:if(t=e.sent,a&&t){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Betools.storage.getStoreDB(mn+"#depart#"+t.main_department);case 9:n=e.sent,e.t0=Tt.keys(n);case 11:if((e.t1=e.t0()).done){e.next=17;break}if(r=e.t1.value,n[r].wxid==a)return e.abrupt("return",n[r]);e.next=15;break;case 15:e.next=11;break;case 17:return e.next=19,getUserInfoByWxid(a);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e)}))()},getUserInfoByWxid:function(o){return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.userMap=new Map,t="contacts_cache_wxid".concat(o),Betools.tools.isNull(o)||o.startsWith("wxid"))return e.abrupt("return",{});e.next=4;break;case 4:return n="".concat(window.BECONFIG.restAPI,"/api/v2/wework_user/").concat(o),e.prev=5,e.next=8,Betools.storage.getStoreDB("contacts_cache_wxid".concat(o));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0=window.userMap.get(t);case 11:if(void 0!==(r=e.t0)&&null!=r&&""!=r)return e.abrupt("return",r);e.next=14;break;case 14:return e.next=16,superagent.get(n).set("xid",fn.queryUniqueID()).set("id",fn.queryUniqueID()).set("accept","json");case 16:if(null!=(a=e.sent).body)return window.userMap.set(t,a.body),e.next=21,Betools.storage.setStoreDB(t,a.body,86400);e.next=21;break;case 21:return e.abrupt("return",a.body);case 24:e.prev=24,e.t1=e.catch(5),console.log(e.t1);case 27:case"end":return e.stop()}},e,null,[[5,24]])}))()}}};function vn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _n=K.storage,bn=H.tools,wn=se.contact,ce={query:{queryUserInfoByView:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(window.BECONFIG.xmysqlAPI,"/api/v_user?_where=(username,eq,").concat(r,")"),t=null,e.prev=2,void 0===(t=_n.getStore("system_v_user_info@username$".concat(r)))||null==t||""==t)return e.next=7,superagent.get(n).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");e.next=10;break;case 7:n=e.sent,t=n.body,_n.setStore("system_v_user_info@username$".concat(r),t,86400);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))()},queryTableFieldInfoJSON:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,queryTableDataByField("v_table_info","id",n);case 3:if(t=e.sent,""!=bn.deNull(t)&&0<t.length)try{t=bn.deNull(t[0].value)}catch(e){console.log("tabale info :"+t)}if(""!=bn.deNull(t))try{t=JSON.parse(t)}catch(e){console.log("tabale info :"+t)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("query table field info json error :"+e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},queryTableFieldOrderJSON:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,queryTableDataByField("v_table_info","id",n);case 3:if(t=e.sent,""!=bn.deNull(t)&&0<t.length)try{t=bn.deNull(t[0].num)}catch(e){console.log("tabale info :"+t)}if(""!=bn.deNull(t))try{t=JSON.parse(t)}catch(e){console.log("tabale info :"+t)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("query table field info json error :"+e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},queryTableDataByField:function(n,r,a){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(a,")"),e.prev=2,e.next=5,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableData:function(r,a){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(r,"/").concat(a),e.prev=2,void 0!==(n=_n.getStore("sys_user_cache@".concat(r,"&id").concat(a)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&_n.setStore("sys_user_cache@".concat(r,"&id").concat(a),n.body[0],2),e.abrupt("return",n.body[0]);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryTableDataByPid:function(r,a){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(r,"?_where=(pid,eq,").concat(a,")&_sort=create_time"),e.prev=2,void 0!==(n=_n.getStore("sys_user_cache@".concat(r,"&pid").concat(a)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&_n.setStore("sys_user_cache@".concat(r,"&pid").concat(a),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryRoleGroupList:function(r){var a=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<a.length&&void 0!==a[1]?a[1]:"",t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_admin_group?_where=(groupname,eq,").concat(r,")~and(userlist,like,~").concat(n,"~)&_sort=create_time"),e.prev=2,void 0!==(n=_n.getStore("sys_user_cache@bs_admin_group&groupname".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&_n.setStore("sys_user_cache@bs_admin_group&groupname".concat(r),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryUserInfoByMobile:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/v2/wework_mobile/").concat(r),e.prev=1,void 0!==(n=_n.getStore("sys_user_cache_mobile_userinfo".concat(r)))&&null!=n&&""!=n)return console.log("mobile: ".concat(JSON.stringify(n))),e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&(console.log("mobile: ".concat(JSON.stringify(n.body))),_n.setStore("sys_user_cache_mobile_userinfo".concat(r),n.body,604800)),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}))()},queryMessages:function(o,s){var c=arguments;return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<c.length&&void 0!==c[2]?c[2]:0,n="bs_message",r="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?_where=((team,like,~").concat(o,",").concat(s,"~)~or(team,like,~").concat(s,",").concat(o,"~))&_sort=-id"),e.prev=3,void 0!==(a=_n.getStore("sys_message_cache##v1@".concat(n,"&wxid").concat(o,"_wxid_").concat(s,"_maxid").concat(t)))&&null!=a&&""!=a)return e.abrupt("return",a);e.next=7;break;case 7:return e.next=9,superagent.get(r).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 9:return null!=(a=e.sent).body&&0<a.body.length&&_n.setStore("sys_message_cache##v1@".concat(n,"&wxid").concat(o,"_wxid_").concat(s,"_maxid").concat(t),a.body,1),e.abrupt("return",a.body);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))()},querySealManMail:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_seal_regist?_where=(sign_man,eq,").concat(r,")&_fields=deal_mail,create_by&_p=0&_size=1"),e.prev=1,void 0!==(n=_n.getStore("sys_seal_man_mail_cache#v1@".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",0<n.length?n[0]:"");e.next=5;break;case 5:return e.next=7,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 7:return null!=(n=e.sent).body&&0<n.body.length&&_n.setStore("sys_seal_man_mail_cache#v1@".concat(r),n.body,1),e.abrupt("return",n.body.length?n.body[0]:"");case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}))()},queryTableDataByWhereSQL:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryMailBySealData:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_where=(create_by,eq,".concat(n,")~and(deal_mail,like,~@~)&_p=0&_size=1"),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat("bs_seal_regist","?").concat(t),e.prev=3,e.next=6,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 6:return t=e.sent,e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}))()},queryFrontBySealData:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_where=(create_by,eq,".concat(n,")~and(seal_type,eq,合同类)&_p=0&_size=1"),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat("bs_seal_regist","?").concat(t),e.prev=3,e.next=6,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 6:return t=e.sent,e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}))()},queryUserInfoByAccount:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(bn.isNull(r))return e.abrupt("return",{});e.next=2;break;case 2:if("".concat(window.BECONFIG.restAPI,"/api/v2/queryemployee/").concat(r),void 0!==(t=_n.getStore("sys_user_cache_account#queryemployee#@".concat(r)))&&null!=t&&""!=t)return e.abrupt("return",t);e.next=6;break;case 6:return e.prev=6,e.next=9,queryTableDataByField("bs_hrmresource","loginid",r);case 9:if(null!=(n=e.sent)&&0<n.length)return _n.setStore("sys_user_cache_account#queryemployee#@".concat(r),n[0],2678400),e.abrupt("return",n[0]);e.next=15;break;case 15:if(bn.isNull(n.text)){e.next=18;break}return _n.setStore("sys_user_cache_account#queryemployee#@".concat(r),n.text,2678400),e.abrupt("return",JSON.parse(n.text));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[6,20]])}))()},queryWeworkUser:function(){return Yt(Tt.mark(function e(){var t,n,r,a,o;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t=null,e.prev=2,r=bn.queryUrlString("code","search"),a=bn.queryUrlString("system_type","history")||"v2",!r){e.next=27;break}if(void 0!==(o=_n.getStore("sys_wework_user_code#wework_user_code#@".concat(r)))&&null!=o&&""!=o)return e.abrupt("return",o);e.next=9;break;case 9:return e.prev=9,e.next=12,superagent.get("".concat(window.BECONFIG.restAPI,"/api/").concat(a,"/wework_user_code/").concat(r));case 12:n=e.sent,t=n&&n.body&&n.body.userinfo&&0==n.body.userinfo.errcode?n.body.userinfo:null,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log(e.t0);case 19:_n.setStore("system_linfo",JSON.stringify({username:n&&n.body&&n.body.userinfo?n.body.userinfo.userid||n.body.userinfo.username:"",password:"************"}),2592e3),_n.setStore("system_userinfo",JSON.stringify(n&&n.body&&n.body.userinfo?n.body.userinfo:""),2592e3),_n.setStore("system_token",JSON.stringify(r),2592e3),_n.setStore("system_department",JSON.stringify(n&&n.body&&n.body.userinfo&&n.body.userinfo.department||""),2592e3),_n.setStore("system_login_time",dayjs().format("YYYY-MM-DD HH:mm:ss"),2592e3),_n.setStore("sys_wework_user_code#wework_user_code#@".concat(r),JSON.stringify(t),2592e3),e.next=28;break;case 27:t=_n.getStore("system_userinfo");case 28:return e.abrupt("return",t);case 31:e.prev=31,e.t1=e.catch(2),console.log(e.t1);case 34:case"end":return e.stop()}},e,null,[[2,31],[9,16]])}))()},queryProcessLogByUserName:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(business_code,eq,000000000)~and(employee,eq,").concat(r,")&_sort=-operate_time"),e.prev=2,e.next=5,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryGoodsAdmin:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_goods_receive?_where=(create_by,eq,").concat(n,")~and(status,in,待处理,已领取,已完成)&_sort=-create_time&_p=0&_size=1"),e.prev=1,e.next=4,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},queryAdminAdress:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_admin_address?_where=(name,like,~").concat(n,"~)~and(status,eq,100)&_sort=-id"),e.prev=1,e.next=4,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},queryProcessLogHistoryByUserName:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_history?_where=(table_name,eq,").concat(n,")~and(business_code,eq,000000000)~and(employee,eq,").concat(r,")&_sort=-operate_time"),e.prev=2,e.next=5,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},deleteTableData:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"/").concat(r),e.prev=2,e.next=5,superagent.delete(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryVMessages:function(u,l){var d=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<d.length&&void 0!==d[2]?d[2]:0,e.prev=1,n="v_messages",r="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?_where=(team,like,~").concat(u,"~)&_sort=-id&_p=0&_size=100"),void 0!==(a=_n.getStore("sys_message_cache##v2@".concat(n,"&wxid").concat(u,"}&maxid").concat(t)))&&null!=a&&""!=a)return e.abrupt("return",a);e.next=7;break;case 7:return e.next=9,superagent.get(r).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 9:if(!(null!=(o=e.sent).body&&0<o.body.length)){e.next=39;break}s=vn(o.body),e.prev=12,s.s();case 14:if((i=s.n()).done){e.next=29;break}return(c=i.value).mid=c.id,c.newMsgCount=1,c.quiet="true"==c.quiet,c.read="true"==c.read_,c.type="friend",c.heuserid=c.groupid.replace(u,"").replace(l,"").replace(/,/g,""),e.next=24,wn.getUserInfo(c.heuserid);case 24:i=e.sent,c.user=[i],c.msg=[{text:c.content,date:c.create_time}];case 27:e.next=14;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(12),s.e(e.t0);case 34:return e.prev=34,s.f(),e.finish(34);case 37:_n.setStore("sys_message_cache##v2@".concat(n,"&wxid").concat(u,"}&maxid").concat(t),o.body,1);case 39:return e.abrupt("return",o.body);case 42:e.prev=42,e.t1=e.catch(1),console.log(e.t1);case 45:case"end":return e.stop()}},e,null,[[1,42],[12,31,34,37]])}))()},queryRewardDataByID:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.xmysqlAPI,"/api/v_reward_data?_where=(period,like,").concat(r,")&_sort=amount&_p=0&_size=1000"),void 0!==(n=_n.getStore("sys_v_reward_data&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("xid",bn.queryUniqueID()).set("id",bn.queryUniqueID()).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&_n.setStore("sys_v_reward_data&id".concat(r),n.body,60),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()}}};function xn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=K.storage,In=H.tools,Ie={manage:{queryCurFreeWorkflow:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_free_process?_where=(main_key,eq,").concat(r,")&_sort=-create_time"),t=[],e.prev=2,e.next=5,superagent.get(n).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:n=e.sent,console.log(n),void 0===n.body||null==n.body||""==n.body||0==n.body.length?t=null:1<=n.body.length&&(t=n.body[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryUserName:function(){return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,n=[],e.prev=2,void 0!==(r=kn.getStore("cache_all_user_name"))&&null!=r&&0!=r.length){e.next=21;break}case 5:if(t<1e4)return a="".concat(window.BECONFIG.xmysqlAPI,"/api/v_uname?_p=").concat(t++,"&_size=1000"),e.next=9,superagent.get(a).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");e.next=18;break;case 9:if(a=e.sent,n=n.concat(a.body),a.body.length<50)return e.abrupt("break",18);e.next=15;break;case 15:return e.abrupt("continue",5);case 16:e.next=5;break;case 18:kn.setStore("cache_all_user_name",n,7200),e.next=22;break;case 21:n=r;case 22:return e.abrupt("return",n);case 25:e.prev=25,e.t0=e.catch(2),console.log(e.t0);case 28:case"end":return e.stop()}},e,null,[[2,25]])}))()},patchEnameCname:function(c){return Yt(Tt.mark(function e(){var t,n,r,a,o,s;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=In.deNull(c).split(","),e.next=4,queryUserName();case 4:r=e.sent,a=xn(n);try{for(a.s();!(s=a.n()).done;)o=s.value,s=r.find(function(e){return o==e.username}),t=In.isNull(s)?"".concat(t,",").concat(o):"".concat(t,",").concat(s.realname)}catch(e){a.e(e)}finally{a.f()}return t.startsWith(",")&&(t=t.substring(1)),t.endsWith(",")&&(t=t.substring(0,t.length-1)),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))()},handleUserInfo:function(t){return Yt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&null==t)return e.abrupt("return",!1);e.next=4;break;case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}},e)}))()},queryProcessLogByID:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(id,eq,").concat(r,")"),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},setTimeouts:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var s=o[a];setTimeout(function(){e()},s)}},queryProcessNodeEmployee:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_approve_node?_where=(name,eq,").concat(n,")"),e.prev=1,e.next=4,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 4:return t=e.sent,console.log(t.body),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body[0].item_text),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryProcessNodeProcName:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/sys_dict_item?_where=(dict_id,eq,").concat(window.requestAPIConfig.PROCESS_NODE_DICT_ID,")~and(item_value,eq,").concat(n,")"),e.prev=1,e.next=4,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 4:return t=e.sent,console.log(t),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body[0].item_text),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryRandomStr:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,t="";try{t=In.queryUniqueID(e)}catch(e){console.log("获取n位随机数异常："+e)}return t},postProcessLogInformed:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t=null,r=a instanceof Array&&1<a.length?"/bulk":"";try{a instanceof Array&&1==a.length&&(r="",a=a[0])}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_informed").concat(r)}catch(e){console.log(e)}return e.prev=5,a.xid=In.queryUniqueID(),e.next=9,superagent.post(t).send(a).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 9:n=e.sent,e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(5),delete a.xid,e.next=17,superagent.post(t).send(a).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 17:n=e.sent,console.log(e.t0);case 19:return e.abrupt("return",n.body);case 20:case"end":return e.stop()}},e,null,[[5,12]])}))()},postTableData:function(a,o){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=a.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(a),n=o,r=null,Object.keys(n).map(function(e){n[e]=e.includes("_time")&&n[e]?dayjs(n[e]).format("YYYY-MM-DD HH:mm:ss"):n[e]}),void 0!==o&&null!=o&&o instanceof Array&&(t+="/bulk"),e.prev=6,o.xid=In.queryUniqueID(),o.id=Object.keys(o).includes("id")&&Betools.tools.isNull(o.id)?o.xid:o.id,e.next=11,superagent.post(t).send(o).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 11:r=e.sent,e.next=21;break;case 14:return e.prev=14,e.t0=e.catch(6),delete o.xid,e.next=19,superagent.post(t).send(o).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 19:r=e.sent,console.log(e.t0);case 21:return e.abrupt("return",r.body);case 22:case"end":return e.stop()}},e,null,[[6,14]])}))()},queryUsernameByID:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,e.next=5,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=(loginid,eq,~").concat(n,"~)~and(status,ne,5)&_fields=id,lastname,loginid")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body[0].lastname);case 9:return e.prev=9,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return","");case 13:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryUsernameByIDs:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=(loginid,in,").concat(n,")~and(status,ne,5)")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 3:return t=e.sent,e.abrupt("return",t.body);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,null,[[0,7]])}))()},queryUserByNameHRM:function(a){var o=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:50,n=[],In.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(a,"~)~or(loginid,like,~").concat(a,"~))~and(status,ne,5)~and(seclevel,lt,").concat(t,")")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return r=e.sent,n=(n=Qt(r.body)).filter(function(e){return!In.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByNameVHRM:function(a){var o=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:50,n=[],In.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/v_hrmresource?_where=((name,like,~").concat(a,"~)~or(userid,like,~").concat(a,"~))~and(seclevel,lt,").concat(t,")")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return r=e.sent,n=(n=Qt(r.body)).filter(function(e){return!In.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByNameAndMobile:function(a,o){var s=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<s.length&&void 0!==s[2]?s[2]:1e3,n=[],In.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/v_hrmresource?_where=((name,like,~").concat(a,"~)~or(userid,like,~").concat(a,"~))~and(mobile,eq,").concat(o,")~and(seclevel,lt,").concat(t,")")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return r=e.sent,n=(n=Qt(r.body)).filter(function(e){return!In.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByNameReward:function(a){var o=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:101,n=[],In.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(a,"~)~or(loginid,like,~").concat(a,"~))~and(seclevel,lt,").concat(t,")")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return r=e.sent,n=(n=Qt(r.body)).filter(function(e){return!In.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByLoginID:function(a){var o=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:101,n=[],In.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=((loginid,in,").concat(a,"))~and(seclevel,lt,").concat(t,")&_fields=loginid")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return r=e.sent,n=(n=Qt(r.body)).filter(function(e){return!In.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByID:function(o){var s=arguments;return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<s.length&&void 0!==s[1]?s[1]:"融量",n=2<s.length&&void 0!==s[2]?s[2]:101,r=[],In.isNull(o))return e.abrupt("return",[]);e.next=5;break;case 5:return e.prev=5,e.next=8,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/v_hrmresource?_where=((loginid,in,").concat(o,"))~and(seclevel,lt,").concat(n,")~and(cname,eq,").concat(t,")&_sort=id")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 8:return a=e.sent,r=(r=Qt(a.body)).filter(function(e){return!In.isNull(e.loginid)}),e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[5,14]])}))()},queryAddressByName:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],In.isNull(r))return e.abrupt("return",[]);e.next=3;break;case 3:return e.prev=3,e.next=6,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_admin_group?_where=(groupname,eq,COMMON_RECEIVE_BORROW)~and(address,like,~").concat(r,"~)")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 6:return n=e.sent,t=Qt(n.body),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))()},queryUserByNameFindOne:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(In.isNull(n)||In.isNull(r))return e.abrupt("return",[]);e.next=2;break;case 2:return t=(n.includes("(")||n.includes("（")||!/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/.test(n)?"".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=((loginid,like,~"):"".concat(window.BECONFIG.xmysqlAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(n,"~)~and(loginid,like,~")).concat(r,"~))~and(status,ne,5)"),e.prev=3,e.next=6,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 6:if((t=e.sent).body=t.body.filter(function(e){return!In.isNull(e.loginid)}),t&&t.body&&1<=t.body.length)return e.abrupt("return",!0);e.next=12;break;case 12:return e.abrupt("return",!1);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}))()},queryTableData:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableDataCount:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"/count?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body[0].no_of_rows);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryContractInfoByPrefix:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_seal_regist?_where=(contract_id,like,").concat(n,"~)~and(seal_type,eq,合同类)~and(status,in,已用印,已领取,移交前台,已完成,财务归档,档案归档,已归档)&_p=0&_size=8&_sort=-contract_id"),e.next=4,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 4:if((t=e.sent)&&t.body&&1<=t.body.length)return e.abrupt("return",t.body);e.next=9;break;case 9:return e.abrupt("return",[]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))()},queryContractInfoByPrefixAll:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=dayjs().subtract(12,"months").format("YYYY-MM-DD"),t=dayjs().subtract("1","year").format("YYYY"),n=dayjs().format("YYYY"),r="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_seal_regist?_where=((contract_id,like,").concat(a,"[").concat(n,"]~)~or(contract_id,like,").concat(a,"~").concat(n,"~))~and(contract_id,nlike,~[").concat(t,"]~)~and(create_time,gt,").concat(r,")~and(seal_type,eq,合同类)~and(status,in,待用印,已退回,已废弃,已用印,已领取,移交前台,已完成,财务归档,档案归档,已归档)&_p=0&_size=3&_sort=-contract_id"),e.next=7,superagent.get(r).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:if((r=e.sent)&&r.body&&1<=r.body.length)return e.abrupt("return",r.body);e.next=12;break;case 12:return e.abrupt("return",[]);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[0,15]])}))()},queryUserBySealData:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.xmysqlAPI,"/api/bs_seal_regist?_where=(deal_manager,like,~").concat(n,"~)~and(deal_mail,like,~@~)&_size=1&_p=0")).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 3:return t=e.sent,e.abrupt("return",t.body[0]);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()},queryCurNodePageType:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=In.queryUrlString("type"),e.prev=1,"workflow"==t||"notify"==t)return e.next=5,queryProcessLogByID(In.queryUrlString("table_name"),In.queryUrlString("processLogID"));e.next=13;break;case 5:if(n=e.sent,""==In.deNull(n))return e.next=9,queryProcessLogInfByID(In.queryUrlString("table_name"),In.queryUrlString("processLogID"));e.next=10;break;case 9:n=e.sent;case 10:r=""==In.deNull(n)?"view":r,e.next=14;break;case 13:"workflowing"==t&&console.log("TODO 暂时不做");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("获取当前节点是否有知会或者审批节点信息异常:"+e.t0);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))()},queryProcessLogInfByID:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_informed?_where=(table_name,eq,").concat(n,")~and(id,eq,").concat(r,")"),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryProcessLog:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(business_data_id,eq,").concat(r,")&_sort=operate_time"),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryBusinessInfo:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_rights?_where=(business,like,~").concat(n,"~)"),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,console.log(t.body),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body),e.abrupt("return",JSON.parse(JSON.stringify(t.body)));case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,11]])}))()},queryApprovalLength:function(r,a){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log?_where=(table_name,eq,").concat(r,")~and(business_data_id,eq,").concat(a,")"),t=!1,e.prev=3,e.next=6,superagent.get(n).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 6:return n=e.sent,t=n.body.length,e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))()},queryTableFieldValue:function(n,r,a){var o=arguments;return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=3<o.length&&void 0!==o[3]?o[3]:"")?"&_fields=".concat(t):"",n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(a,")").concat(t),e.prev=4,e.next=7,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return t=e.sent,e.abrupt("return",t.body);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}))()},queryTableFieldValueCount:function(n,r,a){var o=arguments;return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=3<o.length&&void 0!==o[3]?o[3]:"")?"&_fields=".concat(t):"",n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"/count?_where=(").concat(r,",eq,").concat(a,")").concat(t),e.prev=4,e.next=7,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 7:return t=e.sent,e.abrupt("return",t.body);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}))()},transFreeWflowHis:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,manageAPI.queryHisFreeWorkflow(a);case 3:return n=e.sent,e.next=6,manageAPI.insertTableData("bs_free_process_h",n);case 6:return r=e.sent,e.next=9,manageAPI.deleteTableItem("bs_free_process",n);case 9:t=e.sent,console.log("result :"+t+" wcode :"+r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("transfer free workflow node into history "+e.t0);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}},e,null,[[0,13]])}))()},patchTableData:function(r,a,o){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(r,"/").concat(a),n=null,void 0===o||null==o||""==o)return e.abrupt("return",!1);e.next=5;break;case 5:return e.prev=5,o.xid=In.queryUniqueID(),e.next=9,superagent.patch(t).send(o).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 9:n=e.sent,e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(5),delete o.xid,e.next=17,superagent.patch(t).send(o).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 17:n=e.sent,console.log(e.t0);case 19:return e.abrupt("return",n.body);case 20:case"end":return e.stop()}},e,null,[[5,12]])}))()},postProcessLog:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log"),n=null,e.prev=2,r.xid=In.queryUniqueID(),e.next=6,superagent.post(t).send(r).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 6:n=e.sent,e.next=16;break;case 9:return e.prev=9,e.t0=e.catch(2),delete r.xid,e.next=14,superagent.post(t).send(r).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 14:n=e.sent,console.log(e.t0);case 16:return e.abrupt("return",n.body);case 17:case"end":return e.stop()}},e,null,[[2,9]])}))()},postProcessLogHistory:function(a){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n=a instanceof Array&&1<a.length?"/bulk":"",r=null;try{a instanceof Array&&1==a.length&&(n="",a=a[0])}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_history").concat(n)}catch(e){console.log(e)}return e.prev=5,a.xid=In.queryUniqueID(),e.next=9,superagent.post(t).send(a).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 9:r=e.sent,e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(5),delete a.xid,e.next=17,superagent.post(t).send(a).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 17:r=e.sent,console.log(e.t0);case 19:return e.abrupt("return",r.body);case 20:case"end":return e.stop()}},e,null,[[5,12]])}))()},deleteProcessLog:function(a,o){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=a.toLowerCase(),n=t="",o instanceof Array||(o=[o]);try{o.map(function(e){n=n+","+e.id}),n=0==n.indexOf(",")?n.substring(1):n}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log/bulk?_ids=").concat(n)}catch(e){console.log(e)}return e.prev=6,e.next=9,superagent.delete(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 9:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))()},deleteProcessLogInf:function(a,o){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=a.toLowerCase(),n=t="",o instanceof Array||(o=[o]);try{o.map(function(e){t=t+","+e.id}),t=0==t.indexOf(",")?t.substring(1):t}catch(e){console.log(e)}try{n="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_informed/bulk?_ids=").concat(t)}catch(e){console.log(e)}return e.prev=6,e.next=9,superagent.delete(n).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 9:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))()},queryApprovalExist:function(r,a){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log?_where=(table_name,eq,").concat(r,")~and(business_data_id,eq,").concat(a,")"),t=!1,e.prev=3,e.next=6,superagent.get(n).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 6:n=e.sent,t=0<n.body.length,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[3,10]])}))()},postProcessFreeNode:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/bs_free_process"),n=null,e.prev=2,r.xid=In.queryUniqueID(),e.next=6,superagent.post(t).send(r).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 6:n=e.sent,e.next=16;break;case 9:return e.prev=9,e.t0=e.catch(2),delete r.xid,e.next=14,superagent.post(t).send(r).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 14:n=e.sent,console.log(e.t0);case 16:return e.abrupt("return",n.body);case 17:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableDataByField:function(n,r,a){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(a,")"),e.prev=2,e.next=5,superagent.get(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},initialUpperCase:function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,function(e){return e.toUpperCase()})},prefixUpperCase:function(e){return String.fromCharCode(e.charCodeAt(0)-32)+e.slice(1)},queryUserData:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<r.length&&void 0!==r[0]?r[0]:"",n=1<r.length&&void 0!==r[1]?r[1]:[],e.prev=2,t&&2<=t.length)return e.next=6,Betools.manage.queryTableData("bs_hrmresource","_where=(status,in,0,1,2,3,4)~and(lastname,like,~".concat(t,"~)&_sort=id&_p=0&_size=100"));e.next=9;break;case 6:(n=e.sent).map(function(e,t){e.code=e.id,e.tel="",e.name=e.lastname,e.departName=e.textfield1&&e.textfield1.includes("||")?e.textfield1.split("||")[1]:"",e.title="".concat(e.lastname," ").concat(e.departName),e.isDefault=!1}),n=n.filter(function(t,e,n){return n.findIndex(function(e){return e.loginid==t.loginid})==e});case 9:return e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))()},queryCompanyData:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<r.length&&void 0!==r[0]?r[0]:"",n=1<r.length&&void 0!==r[1]?r[1]:[],e.prev=2,t&&2<=t.length)return e.next=6,Betools.manage.queryTableData("bs_company_flow_base","_where=(status,in,0)~and(level,gt,2)~and(name,like,~".concat(t,"~)&_sort=id&_p=0&_size=30"));e.next=8;break;case 6:(n=e.sent).map(function(e,t){e.title=e.name.slice(0,24),e.code=e.id,e.tel="",e.name=e.name,e.isDefault=!1});case 8:return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(2),console.log(err),e.abrupt("return",[]);case 15:case"end":return e.stop()}},e,null,[[2,11]])}))()},queryCompanyICData:function(){var r=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<r.length&&void 0!==r[0]?r[0]:"",n=1<r.length&&void 0!==r[1]?r[1]:[],e.prev=2,t&&2<=t.length)return e.next=6,Betools.manage.queryTableData("bs_company_flow_data","_where=(companyName,like,~".concat(t,"~)&_sort=id&_p=0&_size=30"));e.next=8;break;case 6:(n=e.sent).map(function(e,t){e.title=e.companyName.slice(0,24),e.code=e.id,e.tel="",e.name=e.companyName,e.isDefault=!1});case 8:return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(2),console.log(err),e.abrupt("return",[]);case 15:case"end":return e.stop()}},e,null,[[2,11]])}))()},queryCompanyAndUserData:function(){var a=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<a.length&&void 0!==a[0]?a[0]:"",n=1<a.length&&void 0!==a[1]?a[1]:[],r=[],e.prev=3,t&&2<=t.length)return e.next=7,Betools.manage.queryUserData(t,n);e.next=13;break;case 7:return n=e.sent,r.concat(n),e.next=11,Betools.manage.queryCompanyData(t,n);case 11:n=e.sent,r.concat(n);case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(3),console.log(err),e.abrupt("return",[]);case 20:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryCommonData:function(){var o=arguments;return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<o.length&&void 0!==o[0]?o[0]:"",n=1<o.length&&void 0!==o[1]?o[1]:[],r=2<o.length&&void 0!==o[2]?o[2]:"company",a=[],e.prev=4,!(t&&2<=t.length)){e.next=21;break}if("user"==r)return e.next=9,Betools.manage.queryUserData(t,n);e.next=11;break;case 9:n=e.sent,a.concat(n);case 11:if("company"==r)return e.next=14,Betools.manage.queryCompanyData(t,n);e.next=16;break;case 14:n=e.sent,a.concat(n);case 16:if("company_ic"==r)return e.next=19,Betools.manage.queryCompanyICData(t,n);e.next=21;break;case 19:n=e.sent,a.concat(n);case 21:return e.abrupt("return",a);case 24:return e.prev=24,e.t0=e.catch(4),console.log(err),e.abrupt("return",[]);case 28:case"end":return e.stop()}},e,null,[[4,24]])}))()},commonStockSearch:function(n,r,a,o,s){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r[a],e.next=3,Betools.manage.queryUserData(t,[]);case 3:n=e.sent,s.tag["show"+Betools.manage.prefixUpperCase(o)]=!0,s.tag.showKey=a,s[o+"Columns"]=n;case 7:case"end":return e.stop()}},e)}))()},commonUserSearch:function(n,r,a,o,s){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r[a],e.next=3,Betools.manage.queryUserData(t,[]);case 3:n=e.sent,s.tag["show"+Betools.manage.prefixUpperCase(o)]=!0,s.tag.showKey=a,s[o+"Columns"]=n;case 7:case"end":return e.stop()}},e)}))()},commonCompanySearch:function(n,r,a,o,s){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r[a],e.next=3,Betools.manage.queryCompanyData(t,[]);case 3:n=e.sent,s.tag["show"+Betools.manage.prefixUpperCase(o)]=!0,s.tag.showKey=a,s[o+"Columns"]=n;case 7:case"end":return e.stop()}},e)}))()},commonDataSearch:function(r,a,o,s,c){var i=arguments;return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=5<i.length&&void 0!==i[5]?i[5]:"company",n=a[o],"company"==t)return e.next=5,Betools.manage.queryCompanyData(n,[]);e.next=8;break;case 5:r=e.sent,e.next=12;break;case 8:if("user"==t)return e.next=11,Betools.manage.queryUserData(n,[]);e.next=12;break;case 11:r=e.sent;case 12:c.tag["show"+Betools.manage.prefixUpperCase(s)]=!0,c.tag.showKey=o,c[s+"Columns"]=r;case 15:case"end":return e.stop()}},e)}))()},commonDataConfirm:function(n,r,a,o,s,c){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.radio[a]=n,r&&!Betools.tools.isNull(r.lastname)?o[a.replace(/Name/g,"")]=o[a]=r.lastname:r&&!Betools.tools.isNull(r.name)?o[a.replace(/Name/g,"")]=o[a]=r.name:o[a.replace(/Name/g,"")]=o[a]=r,s.tag["show"+Betools.manage.prefixUpperCase(a)]=!1,"companyName"==a)return e.next=6,Betools.manage.queryTableFieldValueCount("bs_company_flow_data","companyName",s.item.companyName);e.next=8;break;case 6:(t=e.sent)&&0<t.length&&0<t[0].no_of_rows&&(c.confirm({title:"温馨提示",message:"已经存在此公司的基础数据，请勿重复提交！"}),o[a.replace(/Name/g,"")]=o[a]="");case 8:case"end":return e.stop()}},e)}))()},deleteTableData:function(n,r){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.xmysqlAPI,"/api/").concat(n,"/").concat(r),e.prev=2,e.next=5,superagent.delete(t).set("xid",In.queryUniqueID()).set("id",In.queryUniqueID()).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},lock:function(){var i=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<i.length&&void 0!==i[0]?i[0]:"crontab_task",n=1<i.length&&void 0!==i[1]?i[1]:1e5,r=2<i.length&&void 0!==i[2]?i[2]:"",a=3<i.length&&void 0!==i[3]?i[3]:null,e.prev=4,a=a||dayjs().format("YYYY-MM-DD HH:mm:ss"),e.next=8,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")~and(status,eq,1)~and(expire_time,gt,").concat(a,")&_sort=-id"));case 8:if((a=e.sent)&&0<a.length)return e.abrupt("return",!1);e.next=13;break;case 13:return e.next=15,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 15:s=e.sent,o=xn(s),e.prev=17,o.s();case 19:if((s=o.n()).done){e.next=25;break}return c=s.value,e.next=23,Betools.manage.deleteTableData("bs_lock_info",c.id);case 23:e.next=19;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(17),o.e(e.t0);case 30:return e.prev=30,o.f(),e.finish(30);case 33:return c={id:In.queryUniqueID(),lock_name:t,lock_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),expire_time:dayjs().add(n,"millisecond").format("YYYY-MM-DD HH:mm:ss"),status:1,lock_username:r,lock_flag:"Y"},e.next=36,Betools.manage.postTableData("bs_lock_info",c);case 36:return e.abrupt("return",!0);case 37:e.next=42;break;case 39:return e.prev=39,e.t1=e.catch(4),e.abrupt("return",!1);case 42:case"end":return e.stop()}},e,null,[[4,39],[17,27,30,33]])}))()},unlock:function(){var a=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<a.length&&void 0!==a[0]?a[0]:"crontab_task",e.prev=1,e.next=4,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 4:r=e.sent,n=xn(r),e.prev=6,n.s();case 8:if((r=n.n()).done){e.next=14;break}return r=r.value,e.next=12,Betools.manage.deleteTableData("bs_lock_info",r.id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return e.abrupt("return",!0);case 25:return e.prev=25,e.t1=e.catch(1),e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,null,[[1,25],[6,16,19,22]])}))()},queryImagesUrl:function(){var o=arguments;return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<o.length&&void 0!==o[0]?o[0]:"APP",e.prev=1,e.next=4,Betools.storage.getStore("system_userinfo");case 4:return n=e.sent,r=null,e.next=8,Betools.storage.getStore("system_app_image");case 8:if(a=e.sent){e.next=16;break}return r=(n&&9058==n.userid?"~and(create_by,eq,zhaoziyu)~and(bpm_status,in,4,5)~and(type,eq,":"~and(bpm_status,in,4,5)~and(create_by,in,admin,manager)~and(type,eq,").concat(t,")"),e.next=13,Betools.query.queryTableDataByWhereSQL("bs_home_pictures","_where=(status,in,3)".concat(r,"&_fields=files&_sort=-id"));case 13:(a=e.sent).map(function(e){e.files="https://upload.yunwisdom.club:30443/".concat(e.files)}),Betools.storage.setStore("system_app_image",JSON.stringify(a),259200);case 16:return e.abrupt("return",a);case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}},e,null,[[1,19]])}))()},logRecord:function(p,f){var m=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l,d;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<m.length&&void 0!==m[2]?m[2]:"",n=3<m.length&&void 0!==m[3]?m[3]:"",r=4<m.length&&void 0!==m[4]?m[4]:"",a=5<m.length&&void 0!==m[5]?m[5]:"",o=6<m.length&&void 0!==m[6]?m[6]:"",s=7<m.length&&void 0!==m[7]?m[7]:"",c=8<m.length&&void 0!==m[8]?m[8]:"",i=9<m.length&&void 0!==m[9]?m[9]:"",u=10<m.length&&void 0!==m[10]?m[10]:"000000000",l="",p&&f){e.next=12;break}return e.abrupt("return",!1);case 12:try{l=JSON.stringify(i)}catch(e){l=i}return e.prev=13,d={id:In.queryUniqueID(),table_name:p,main_value:f,proponents:t,business_data_id:f,business_code:u,process_name:n,employee:t,approve_user:t,action:r,action_opinion:a,operate_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),functions_station:s,process_station:c,business_data:l,content:o,process_audit:"",create_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),relate_data:"",origin_data:""},e.next=17,Betools.workflow.approveViewProcessLog(d);case 17:return e.abrupt("return",e.sent);case 20:return e.prev=20,e.t0=e.catch(13),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,null,[[13,20]])}))()}}};function Dn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn=H.tools,De={lock:{lock:function(){var i=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<i.length&&void 0!==i[0]?i[0]:"crontab_task",n=1<i.length&&void 0!==i[1]?i[1]:1e5,r=2<i.length&&void 0!==i[2]?i[2]:"",a=3<i.length&&void 0!==i[3]?i[3]:null,e.prev=4,a=a||dayjs().format("YYYY-MM-DD HH:mm:ss"),e.next=8,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")~and(status,eq,1)~and(expire_time,gt,").concat(a,")&_sort=-id"));case 8:if((a=e.sent)&&0<a.length)return e.abrupt("return",!1);e.next=13;break;case 13:return e.next=15,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 15:s=e.sent,o=Dn(s),e.prev=17,o.s();case 19:if((s=o.n()).done){e.next=25;break}return c=s.value,e.next=23,Betools.manage.deleteTableData("bs_lock_info",c.id);case 23:e.next=19;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(17),o.e(e.t0);case 30:return e.prev=30,o.f(),e.finish(30);case 33:return c={id:jn.queryUniqueID(),lock_name:t,lock_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),expire_time:dayjs().add(n,"millisecond").format("YYYY-MM-DD HH:mm:ss"),status:1,lock_username:r,lock_flag:"Y"},e.next=36,Betools.manage.postTableData("bs_lock_info",c);case 36:return e.abrupt("return",!0);case 37:e.next=42;break;case 39:return e.prev=39,e.t1=e.catch(4),e.abrupt("return",!1);case 42:case"end":return e.stop()}},e,null,[[4,39],[17,27,30,33]])}))()},unlock:function(){var a=arguments;return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<a.length&&void 0!==a[0]?a[0]:"crontab_task",e.prev=1,e.next=4,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 4:r=e.sent,n=Dn(r),e.prev=6,n.s();case 8:if((r=n.n()).done){e.next=14;break}return r=r.value,e.next=12,Betools.manage.deleteTableData("bs_lock_info",r.id);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return e.abrupt("return",!0);case 25:return e.prev=25,e.t1=e.catch(1),e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,null,[[1,25],[6,16,19,22]])}))()}}};function Sn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=H.tools,Bn=ce.query,je={task:{queryProcessLogDone:function(i,u){var l=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,Un.isNull(i)||Un.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.xmysqlAPI,"/api/v_handled_events_unq?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),a={},e.prev=6,e.next=9,superagent.get(r).set("xid",Un.queryUniqueID()).set("id",Un.queryUniqueID()).set("accept","json");case 9:o=e.sent,console.log(o),a=(a=o.body).filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),a=dayjs(e.create_time).format("YYYY-MM-DD HH:mm:ss");return e.createtime=a,e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=Un.deNull(e.username).split(","),e.content=Un.abbreviation(Un.delHtmlTag(e.content)),e.topic=Un.abbreviation(Un.delHtmlTag(e.topic)),e.username.includes(i)||e.username.includes(u)}),e.prev=13,o=Sn(a),e.prev=15,o.s();case 17:if((c=o.n()).done){e.next=32;break}if(s=c.value,e.prev=19,Un.isNull(s.sponsor)&&!Un.isNull(s.proponents))return e.next=23,Bn.queryUserInfoByAccount(s.proponents);e.next=25;break;case 23:c=e.sent,s.sponsor=c.realname||c.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(19),console.log(e.t0);case 30:e.next=17;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(15),o.e(e.t1);case 37:return e.prev=37,o.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(13),console.log(e.t2);case 46:return a=a.filter(function(t,e,n){return e===n.findIndex(function(e){return e.id==t.id})}),e.abrupt("return",a);case 50:e.prev=50,e.t3=e.catch(6),console.log(e.t3);case 53:case"end":return e.stop()}},e,null,[[6,50],[13,43],[15,34,37,40],[19,27]])}))()},queryProcessLogWait:function(i,u){var l=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,Un.isNull(i)||Un.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.xmysqlAPI,"/api/v_handling_events?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),a={},e.prev=6,e.next=9,superagent.get(r).set("xid",Un.queryUniqueID()).set("id",Un.queryUniqueID()).set("accept","json");case 9:o=e.sent,a=o.body;try{a=a.filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDHHmmss"),a=dayjs(e.create_time).format("YYYY-MM-DD HH:mm:ss");return e.createtime=a,e.timestamp=r,e.operate_time=t,e.create_time=n,e.username=Un.deNull(e.username).split(","),e.content=Un.abbreviation(Un.delHtmlTag(e.content)),e.topic=Un.abbreviation(Un.delHtmlTag(e.topic)),"bs_seal_regist"!==e.tname&&"bs_goods_receive"!==e.tname?(e.username.includes(i)||e.username.includes(u))&&!e.user.includes(i):e.username.includes(i)||e.username.includes(u)})}catch(e){console.log(e)}e.prev=12,o=Sn(a),e.prev=14,o.s();case 16:if((c=o.n()).done){e.next=32;break}if(s=c.value,e.prev=18,!Un.isNull(s.sponsor)||Un.isNull(s.proponents)){e.next=25;break}if(s.proponents.includes(",")){e.next=25;break}return e.next=23,Bn.queryUserInfoByAccount(s.proponents);case 23:c=e.sent,s.sponsor=c.realname||c.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(14),o.e(e.t1);case 37:return e.prev=37,o.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(12),console.log(e.t2);case 46:return e.abrupt("return",a);case 49:e.prev=49,e.t3=e.catch(6),console.log(e.t3);case 52:case"end":return e.stop()}},e,null,[[6,49],[12,43],[14,34,37,40],[18,27]])}))()},queryProcessLogWaitSeal:function(i,u){var l=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,Un.isNull(i)||Un.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.xmysqlAPI,"/api/v_handling_events?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),a={},e.prev=6,e.next=9,superagent.get(r).set("xid",Un.queryUniqueID()).set("id",Un.queryUniqueID()).set("accept","json");case 9:o=e.sent,a=o.body;try{a=a.filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDHHmmss"),a=dayjs(e.create_time).format("YYYY-MM-DD HH:mm:ss");return e.createtime=a,e.timestamp=r,e.operate_time=t,e.create_time=n,e.username=Un.deNull(e.username).split(","),e.content=Un.abbreviation(Un.delHtmlTag(e.content)),e.topic=Un.abbreviation(Un.delHtmlTag(e.topic)),("bs_seal_regist"===e.tname||"bs_goods_receive"===e.tname)&&(e.username.includes(i)||e.username.includes(u))})}catch(e){console.log(e)}e.prev=12,o=Sn(a),e.prev=14,o.s();case 16:if((c=o.n()).done){e.next=32;break}if(s=c.value,e.prev=18,!Un.isNull(s.sponsor)||Un.isNull(s.proponents)){e.next=25;break}if(s.proponents.includes(",")){e.next=25;break}return e.next=23,Bn.queryUserInfoByAccount(s.proponents);case 23:c=e.sent,s.sponsor=c.realname||c.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(14),o.e(e.t1);case 37:return e.prev=37,o.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(12),console.log(e.t2);case 46:return e.abrupt("return",a);case 49:e.prev=49,e.t3=e.catch(6),console.log(e.t3);case 52:case"end":return e.stop()}},e,null,[[6,49],[12,43],[14,34,37,40],[18,27]])}))()}}};function Cn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var An=H.tools,Fn=K.storage,Mn=Ie.manage,Pn=ce.query,Ne={crontab:{queryCrontab:function(){var w=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l,d,p,f,m,y,g,v,h,_,b;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<w.length&&void 0!==w[0]?w[0]:"18:0",e.next=3,Fn.getStore("system_userinfo");case 3:return a=e.sent,n=a&&a.username?a.username:"",e.prev=5,r=dayjs().format("HH:mm"),a=dayjs().format("YYYYMMDD"),e.next=10,Mn.lock("crontab_mission",5e3,n);case 10:if(o=e.sent,console.log("lock flag : ",o," nowtime: ",r),o)return e.prev=13,e.next=16,Pn.queryTableDataByWhereSQL("bs_crontab_task","_where=(task_name,eq,crontab_mission_visitor)~and(status,eq,100)&_sort=-id");e.next=167;break;case 16:if(o=e.sent,t=o&&0<o.length?o[0].time:"18:0",r.includes("18:0")||r.includes("18:1")||r.includes("18:2")||r.includes(t))return e.next=21,Pn.queryTableDataByWhereSQL("bs_visit_apply","_where=(status,in,init,confirm)&_sort=-id");e.next=49;break;case 21:c=e.sent,s=Cn(c),e.prev=23,s.s();case 25:if((c=s.n()).done){e.next=41;break}if(i=c.value,dayjs(i.time).add(8,"hour").format("YYYYMMDD")<=a)return u=encodeURIComponent("".concat(window.BECONFIG.domain.replace("www","wechat"),"/#/app/visitorreceive?id=").concat(i.id,"&statustype=office&role=edit")),u="".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(i.mobile,"/亲爱的同事，访客：").concat(i.visitor_name," 预约于").concat(dayjs(i.create_time).format("YYYY-MM-DD"),"的拜访申请尚未到访，您可以作废或调整拜访预约时间?rurl=").concat(u),e.next=33,superagent.get(u).set("xid",An.queryUniqueID()).set("accept","json");e.next=39;break;case 33:return l=e.sent,d={status:"devisit"},e.next=37,Mn.patchTableData("bs_visit_apply",i.id,d);case 37:d=e.sent,console.log("response :",JSON.stringify(l),"\n\r query url:",u,"\n\r result:",d);case 39:e.next=25;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(23),s.e(e.t0);case 46:return e.prev=46,s.f(),e.finish(46);case 49:e.next=54;break;case 51:e.prev=51,e.t1=e.catch(13),console.log(e.t1);case 54:if(e.prev=54,r.includes("17:0")||r.includes("17:1")||r.includes("17:2")||r.includes("17:3")||r.includes("17:4")||r.includes("17:5"))return e.next=58,Pn.queryTableDataByWhereSQL("bs_goods_borrow","_where=(status,in,已借用)&_sort=-id");e.next=135;break;case 58:m=e.sent,p=Cn(m),e.prev=60,p.s();case 62:if((m=p.n()).done){e.next=86;break}if((f=m.value).id!=f.pid){e.next=78;break}if(m=dayjs().subtract(12,"hour").valueOf(),(An.isNull(f.notify_time)?0:dayjs(f.notify_time).valueOf())<m)return m=dayjs(f.create_time).format("YYYY-MM-DD"),y=encodeURIComponent("".concat(window.BECONFIG.domain.replace("www","wechat"),"/#/app/borrowview?id=").concat(f.id,"&statustype=office&role=receive")),y="".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(f.create_by,"/亲爱的同事，您于").concat(m,"借用的物品请在18:00前及时归还?rurl=").concat(y),e.next=73,superagent.get(y).set("xid",An.queryUniqueID()).set("accept","json");e.next=76;break;case 73:return e.sent,e.next=76,Mn.patchTableData("bs_goods_borrow",f.id,{notify_time:dayjs().format("YYYY-MM-DD HH:mm:ss")});case 76:e.next=84;break;case 78:return e.next=80,Pn.queryTableDataByWhereSQL("bs_goods_borrow","_where=(id,eq,".concat(f.pid,")&_size=1&_sort=-id"));case 80:if((y=e.sent)&&0<y.length)return e.next=84,Mn.patchTableData("bs_goods_borrow",f.id,{status:y[0].status});e.next=84;break;case 84:e.next=62;break;case 86:e.next=91;break;case 88:e.prev=88,e.t2=e.catch(60),p.e(e.t2);case 91:return e.prev=91,p.f(),e.finish(91);case 94:return e.next=96,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v2/mysql/goods_complete")).set("xid",An.queryUniqueID()).set("accept","json");case 96:return e.sent,e.next=99,Pn.queryTableDataByWhereSQL("bs_goods_receive","_where=(status,in,已准备)&_sort=-id");case 99:h=e.sent,g=Cn(h),e.prev=101,g.s();case 103:if((h=g.n()).done){e.next=127;break}if((v=h.value).id!=v.pid){e.next=119;break}if(h=dayjs().subtract(12,"hour").valueOf(),(An.isNull(v.notify_time)?0:dayjs(v.notify_time).valueOf())<h)return h=dayjs(v.create_time).format("YYYY-MM-DD"),_=encodeURIComponent("".concat(window.BECONFIG.domain.replace("www","wechat"),"/#/app/goodsview?id=").concat(v.id,"&statustype=office&role=view")),_="".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(v.create_by,"/亲爱的同事，您于").concat(h,"预约的办公用品已准备，请在17:00-18:00至前台领取?rurl=").concat(_),e.next=114,superagent.get(_).set("xid",An.queryUniqueID()).set("accept","json");e.next=117;break;case 114:return e.sent,e.next=117,Mn.patchTableData("bs_goods_receive",v.id,{notify_time:dayjs().format("YYYY-MM-DD HH:mm:ss")});case 117:e.next=125;break;case 119:return e.next=121,Pn.queryTableDataByWhereSQL("bs_goods_receive","_where=(id,eq,".concat(v.pid,")&_size=1&_sort=-id"));case 121:if((_=e.sent)&&0<_.length)return e.next=125,Mn.patchTableData("bs_goods_receive",v.id,{status:_[0].status});e.next=125;break;case 125:e.next=103;break;case 127:e.next=132;break;case 129:e.prev=129,e.t3=e.catch(101),g.e(e.t3);case 132:return e.prev=132,g.f(),e.finish(132);case 135:e.next=140;break;case 137:e.prev=137,e.t4=e.catch(54),console.log(e.t4);case 140:if(e.prev=141,5==dayjs().get("day")&&(r.includes("15:00")||r.includes("16:00")||r.includes("17:00")))return b=window.encodeURIComponent("http://yp.leading-group.com:9036/H5#/folder/ent"),b="".concat(window.BECONFIG.restAPI,"/api/v1/weappms/zhaozy1028/亲爱的同事，本周工作即将结束，请记得及时填写本周工作汇报哦！?rurl=").concat(b),e.next=147,superagent.get(b).set("xid",An.queryUniqueID()).set("accept","json");e.next=148;break;case 147:e.sent;case 148:e.next=153;break;case 150:e.prev=150,e.t5=e.catch(141),console.log(e.t5);case 153:if(e.prev=153,"/[03-20|06-20|09-20|12-20|03-25|06-25|09-25|12-25||03-30|06-30|09-30|12-30]/".includes(dayjs().format("MM-DD"))&&r.includes("15:00"))return b=window.encodeURIComponent("https://www.italent.cn//143616195/UpaasNewMobileHome#/"),b="".concat(window.BECONFIG.restAPI,"/api/v1/weappms/zhaozy1028/亲爱的同事，本季度工作即将结束，请记得及时在HR系统上填写本季度工作汇报和发起绩效考核流程哦！?rurl=").concat(b),e.next=159,superagent.get(b).set("xid",An.queryUniqueID()).set("accept","json");e.next=160;break;case 159:e.sent;case 160:e.next=165;break;case 162:e.prev=162,e.t6=e.catch(153),console.log(e.t6);case 165:return e.next=167,Mn.unlock("crontab_mission");case 167:e.next=172;break;case 169:e.prev=169,e.t7=e.catch(5),console.log(e.t7);case 172:case"end":return e.stop()}},e,null,[[5,169],[13,51],[23,43,46,49],[54,137],[60,88,91,94],[101,129,132,135],[141,150],[153,162]])}))()}}},Ae={workconfig:{CON_SEAL_CODE_LENGTH:-4,mailconfig:{},config:{},system:{config:{regexp:{mail:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,mobile:""}}},group:{Group_LD:{seal:"",front:"",archive:"",prefix:"LD",name:"Group_LD"},ENTRY_JOB:{GROUP0:{JOB_HR_ADMIN:"",JOB_EXEC_ADMIN:"",JOB_MEAL_ADMIN:"",JOB_FRONT_ADMIN:""}}},statusType:{none:"待用印",seal:"已用印",receive:"已领取",sending:"已寄送",getback:"已寄回",front:"移交前台",archive:"归档完成",done:"已归档"},sealTypeNoName:{"合同类":"合同编号","非合同类":"流水编号"},compcolumns:{commonTypeColumns:["是","否"],archiveTypeColumns:["财务归档","档案归档"],orderTypeColumns:["我方先印","常规用印"],sealTypeColumns:["合同类","非合同类"],sealCategoryColumns:["公章","法人章","法人私章","合同专用章","财务专用章","发票专用章","物业服务章","工会公章","党支部章","工会法人章","工会财务章"],sealStatusColumns:["待用印","已用印","已领取","已寄送","移交前台","档案归档","财务归档","已退回","已作废"],diplomaTypeColumns:["博士","硕士","本科","专科","高中","初中","小学"],acceptType:["*/*"],approveColumns:["OA系统","ERP系统","费控系统","创达OA系统","CRM系统","EHR系统","资金系统","领地HR","宝瑞商管"]},goodstype:{office:"办公用品",drug:"药品",prevent:"防疫物资","办公用品":"office","药品":"drug","防疫物资":"prevent"},goodsborrowtype:{common:"信息设备",box:"传屏设备"},rewardtype:{0:"业绩考核奖",1:"总裁专项奖",2:"总经理专项奖",3:"特殊贡献奖",4:"其他奖罚"},reward:function(e){return[{id:"task-pane",title:"任务面板",taskflows:[{name:"我的待办",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/time_00.png",href:"/account/todolist",description:"查看待处理的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=mytodolist&type=7&back=/reward/workspace","_blank")}},{name:"我的已办",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/home_00.png",href:"/account/donelist",description:"查看已处理的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=mydonelist&type=7&back=/reward/workspace","_blank")}},{name:"我的申请",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/hire.png",href:"/account/donelist",description:"查看我发起的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=myapplylist&type=7&back=/reward/workspace","_blank")}},{name:"我的奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/绩效管理.png",href:"/account/myrewards",description:"查看涉及我的奖罚明细",click:function(){e.$router.push("/reward/message?panename=myrewarditemslist&type=7&back=/reward/workspace","_blank")}},{name:"统计分析",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/zhushou.png",href:"/account/myanalyse",description:"查看自己的奖罚月/季度报表",click:function(){e.$router.push("/reward/message?panename=myanalyselist&type=7&back=/reward/workspace","_blank")}}]},{id:"task-pane",title:"奖罚申请",taskflows:[{name:"业绩考核奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.1/images/pay03.png",href:"/account/todolist",description:"业绩考核奖罚申请流程",click:function(){e.$router.push("/reward/rewardapply?type=0&reward_name=业绩考核","_blank")}},{name:"总裁专项奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/pay.png",href:"/account/donelist",description:"总裁专项奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=1&reward_name=总裁专项","_blank")}},{name:"总经理专项奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.0/images/pay02.png",href:"/account/donelist",description:"总经理专项奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=2&reward_name=总经理专项","_blank")}},{name:"特殊贡献奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.0/images/pay00.png",href:"/account/myrewards",description:"特殊贡献奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=3&reward_name=特殊贡献","_blank")}},{name:"其他奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.2/images/pay07.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardapply?type=4&reward_name=其他奖罚","_blank")}},{name:"月度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/yuebao.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardmonth?type=month")}},{name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/ribao.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardmonth?type=quarter")}},{name:"奖罚审批",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/shenpi.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=myrewardlist&type=7&back=/reward/workspace","_blank")}}]},{id:"common-pane",title:"常用应用",taskflows:[{name:"月度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/leave.png",href:"/account/todolist",description:"查看/导出月度奖罚明细及汇总",click:function(){}},{name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/position.png",href:"/account/donelist",description:"查看/导出月度奖罚明细及汇总",click:function(){}}]}]},getRewardQuickTag:function(e){return[{name:"我的待办",color:"purple",click:function(){}},{name:"我的已办",color:"cyan",click:function(){}},{name:"我的已办",color:"cyan",click:function(){}},{name:"我的奖罚",color:"pink",click:function(){}},{name:"统计分析",color:"blue",click:function(){}},{name:"报表导出",color:"red",click:function(){}},{name:"月度报表",color:"green",click:function(){}},{name:"季度报表",color:"blue",click:function(){}},{name:"部门分布",color:"orange",click:function(){}},{name:"类别分布",color:"pink",click:function(){}},{name:"奖罚排行榜",color:"cyan",click:function(){}},{name:"奖罚个人榜",color:"blue",click:function(){}},{name:"奖罚团队榜",color:"red",click:function(){}}]},getRewardWflow:function(e){return[{name:"月度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/account/center",click:function(){}},{name:"季度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/account/authors/index",click:function(){}},{name:"年度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/blog/rank",click:function(){}},{name:"流程报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-rank-01.svg",href:"/blog/center",click:function(){}}]},columns:{reward:{items:[{title:"分配性质",dataIndex:"type",key:"type",scopedSlots:{customRender:"name"}},{title:"发放期间",dataIndex:"period",key:"period"},{title:"员工姓名",dataIndex:"username",key:"username",ellipsis:!0},{title:"员工OA",dataIndex:"account",key:"account",ellipsis:!0},{title:"所属单位",dataIndex:"company",key:"company",ellipsis:!0},{title:"所属部门",dataIndex:"department",key:"department",ellipsis:!0},{title:"员工职务",dataIndex:"position",key:"position",ellipsis:!0},{title:"分配金额",dataIndex:"amount",key:"amount",ellipsis:!0}],wfcolumns:[{title:"流程顺序",dataIndex:"key",key:"key",ellipsis:!0},{title:"审批人员",dataIndex:"username",key:"username",ellipsis:!0},{title:"审批账户",dataIndex:"userid",key:"userid",ellipsis:!0},{title:"所属单位",dataIndex:"company",key:"company",ellipsis:!0},{title:"所属部门",dataIndex:"department",key:"department",ellipsis:!0},{title:"审批职务",dataIndex:"position",key:"position",ellipsis:!0},{title:"联系电话",dataIndex:"mobile",key:"mobile",ellipsis:!0}]}},objects:{officeObjects:["笔记本","签字笔（黑）","签字笔（红）","订书机","订书针","回形针","U盘","笔筒","便利贴","标签贴","彩色便签","鼠标（有线）","鼠标垫","鼠标（无线）","插板","电池（5号）","电池（7号）","剪刀","胶棒","胶水","透明文件袋","美工刀","燕尾夹（大号）","燕尾夹（中号）","燕尾夹（小号）","抽杆文件夹","牛皮档案袋","牛皮档案盒","塑料档案盒","双面胶","透明胶带","橡皮擦","铅笔","荧光笔","文件夹","资料册","文件架","文件盘","印泥","起钉器","名片夹","派通笔","中性笔","名片盒","计算器","圆珠笔（黑）","圆珠笔（红）","彩色卡纸"],drugObjects:["感冒灵(999)","板蓝根","创口贴","碘伏","阿莫西林","和香正气","金嗓子","元和正胃片","蒙脱石散","感康","散列通","棉签纱布"]},queryAPI:{autoSerialAPI:"".concat(window.BECONFIG.restAPI,"/api/v2/mysql/serial/bs_seal_regist/serialid/id"),tableSerialAPI:"".concat(window.BECONFIG.restAPI,"/api/v2/mysql/serial/{table_name}/serialid/id"),patchSerialAPI:"".concat(window.BECONFIG.restAPI,"/api/v2/mysql/patchserial/bs_seal_regist/serialid/id")},compValidation:{seal:{message:{filename:"",count:"",dealDepart:"",dealManager:"",dealMail:"",signman:"",workno:"",sealtype:"",seal_category:"",ordertype:"",approveType:"",mobile:"",username:"",contractId:"",sealman:"",front:"",archive:"",prefix:"",meal_account:"",message:"",company:"",finance:"",record:"",partner:""},valid:{filename:"请输入文件名称！",count:"请输入文件份数！",dealDepart:"请输入经办部门！",dealManager:"请输入经办人!",dealMail:"请输入经办人邮箱!",signman:"请输入签收人！",workno:"请输入流程编号！",sealtype:"请选择用印类型！",seal_category:"请选择印章类型！",ordertype:"请选择用印顺序！",approveType:"请输入审批类型！",mobile:"请输入经办人电话!",username:"请输入经办人的OA账号!",contractId:"请输入合同编号！",sealman:"请输入印章管理员(盖印人)！",front:"请输入前台人员名称！",archive:"请输入归档人员名称！",prefix:"请输入合同对应的编号前缀！",meal_account:"请输入新员工的食堂账户！",message:"请印章管理员输入用印意见或备注说明！",company:"请输入用印公司名称！",finance:"请输入财务归档人员！",record:"请输入档案归档人员！",partner:"请输入合作方名称！"}},entryjob:{message:{username:"",department:"",position:"",picture:"",computer:"",seat:"",drawer:"",other_equip:"",notebook:"",manual:"",writingtools:"",badge:"",othertools:"",driving_license:"",driver_license:"",idcard:"",diploma:"",bachelor:"",join_time:"",hr_name:"",bank_card:"",mobile:"",meal_account:""},valid:{username:"请输入您的员工姓名！",department:"请输入您的入职部门！",position:"请输入您的入职岗位！",picture:"请上传您的一寸照片！",computer:"请选择是否需要电脑配置！",seat:"请选择是否需要办公座椅！",drawer:"请选择是否是否需要办公抽屉！",other_equip:"如果您有其他的办公配置要求，请填写在此处！",notebook:"请选择是否需要笔记/记事本等！",manual:"请选择是否需要入职手册！",writingtools:"请选择是否需要签字笔/擦！",badge:"请选择是否需要制作员工工牌！",othertools:"请输入您的其他办公用品需求！",driving_license:"请输入您的行驶证编号！",driver_license:"请输入您的驾驶证编号！",idcard:"请输入您的身份证编号！",diploma:"请输入您的学历证件编号！",bachelor:"请输入您的学位证件编号！",join_time:"请选择您的入职时间！",hr_name:"请选择您的对接HR姓名！",bank_card:"请输入您的工资银行卡号！",mobile:"请输入您的电话号码！",meal_account:"请输入新员工的食堂账户！"}},goodsreceive:{message:{create_time:"",create_by:"",receive_time:"",user_admin_name:"",name:"",amount:"",receive_name:"",department:"",remark:"",type:"",company:""},valid:{create_time:"请输入登记时间！",create_by:"请输入登记人员！",receive_time:"请输入领用时间！",user_admin_name:"请输入物品领用管理员！",name:"请输入领用物品名称！",amount:"请输入领用物品数量及单位！",receive_name:"请输入领用人员姓名！",department:"请输入领用人员所属部门！",remark:"请输入领用备注说明！",type:"请输入领用类别！",company:"请输入领用人员所属单位/公司名称！"}},borrowreceive:{message:{create_time:"",create_by:"",receive_time:"",user_admin_name:"",name:"",amount:"",receive_name:"",department:"",remark:"",type:"",company:""},valid:{create_time:"请输入登记时间！",create_by:"请输入登记人员！",receive_time:"请输入物品借用时间！",user_admin_name:"请输入物品借用管理员！",name:"请输入借用物品/设备名称！",amount:"请输入借用物品/设备数量及单位！",receive_name:"请输入借用人员姓名！",department:"请输入借用人员所属部门！",remark:"请输入物品借用备注说明！",type:"请输入物品借用类别！",company:"请输入借用人员所属单位/公司名称！"}},lostproperty:{message:{lost_name:"",lost_amount:"",user_admin_name:""},valid:{lost_name:"请输入物品名称！",lost_amount:"请输入物品数量及单位！",user_admin_name:"请输入失物招领处的物品管理员姓名！"}},visitorapply:{message:{time:"",visitor_name:"",visitor_company:"",visitor_mobile:"",visitor_position:"",visitor_name1:"",visitor_mobile1:"",visitor_name2:"",visitor_mobile2:"",visitor_name3:"",visitor_mobile3:"",visitor_name4:"",visitor_mobile4:"",visitor_name5:"",visitor_mobile5:"",visitor_name6:"",visitor_mobile6:"",visitor_name7:"",visitor_mobile7:"",visitor_name8:"",visitor_mobile8:"",visitor_name9:"",visitor_mobile9:"",visitor_name10:"",visitor_mobile10:"",visitor_name11:"",visitor_mobile11:"",visitor_name12:"",visitor_mobile12:"",visitor_name13:"",visitor_mobile13:"",visitor_name14:"",visitor_mobile14:"",visitor_name15:"",visitor_mobile15:"",visitor_name16:"",visitor_mobile16:"",visitor_name17:"",visitor_mobile17:"",visitor_name18:"",visitor_mobile18:"",visitor_name19:"",visitor_mobile19:"",visitor_name20:"",visitor_mobile20:"",employee:"",mobile:"",position:"",user_admin_name:""},valid:{time:"请输入预约时间！",visitor_name:"请输入访客姓名！",visitor_company:"请输入访客单位名称！",visitor_mobile:"请输入访客电话！",visitor_position:"请输入访客职务！",visitor_name1:"请输入访客姓名！",visitor_mobile1:"请输入访客电话！",visitor_name2:"请输入访客姓名！",visitor_mobile2:"请输入访客电话！",visitor_name3:"请输入访客姓名！",visitor_mobile3:"请输入访客电话！",visitor_name4:"请输入访客姓名！",visitor_mobile4:"请输入访客电话！",visitor_name5:"请输入访客姓名！",visitor_mobile5:"请输入访客电话！",visitor_name6:"请输入访客姓名！",visitor_mobile6:"请输入访客电话！",visitor_name7:"请输入访客姓名！",visitor_mobile7:"请输入访客电话！",visitor_name8:"请输入访客姓名！",visitor_mobile8:"请输入访客电话！",visitor_name9:"请输入访客姓名！",visitor_mobile9:"请输入访客电话！",visitor_name10:"请输入访客姓名！",visitor_mobile10:"请输入访客电话！",visitor_name11:"请输入访客姓名！",visitor_mobile11:"请输入访客电话！",visitor_name12:"请输入访客姓名！",visitor_mobile12:"请输入访客电话！",visitor_name13:"请输入访客姓名！",visitor_mobile13:"请输入访客电话！",visitor_name14:"请输入访客姓名！",visitor_mobile14:"请输入访客电话！",visitor_name15:"请输入访客姓名！",visitor_mobile15:"请输入访客电话！",visitor_name16:"请输入访客姓名！",visitor_mobile16:"请输入访客电话！",visitor_name17:"请输入访客姓名！",visitor_mobile17:"请输入访客电话！",visitor_name18:"请输入访客姓名！",visitor_mobile18:"请输入访客电话！",visitor_name19:"请输入访客姓名！",visitor_mobile19:"请输入访客电话！",visitor_name20:"请输入访客姓名！",visitor_mobile20:"请输入访客电话！",employee:"请输入填报人姓名！",mobile:"请输入填报人电话！",position:"请输入填报人职务！",user_admin_name:"请输入客服接待！"}},rewardapply:{message:{title:"",company:"",department:"",content:"",remark:"",amount:"",reward_type:"",reward_name:"",reward_period:"",hr_name:"",files:"",apply_realname:""},valid:{title:"请输入奖罚申请的标题！",company:"请输入申请人员的所在公司！",department:"请输入申请人员的所在部门！",content:"请输入奖罚申请流程的申请事由！",remark:"请输入备注信息！",amount:"请输入本次奖罚申请的单项奖金总额！",reward_type:"请输入奖罚类型！",reward_name:"请输入奖罚名称！",reward_period:"请输入奖罚所属周期！",hr_name:"请输入负责薪资管理的人力经理！",files:"请上传奖罚明细的Excel文档！",apply_realname:"请输入申请人姓名！"}}},commonUserInfo:{username:"common",realname:"",main_department:"",department:{name:""},parent_company:{name:""}},getPaneflows:function(e){return[{id:100,name:"我的知会",ename:"myrewardlist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/shenpi.png",href:"/account/myrewardlist",description:"查看知会(人力专项)申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myrewardlist"}},{id:0,name:"我的待办",ename:"mytodolist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/time_00.png",href:"/account/mytodolist",description:"查看待处理的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","知会我"],dataSource:[],click:function(){e.panename="mytodolist"}},{id:1,name:"我的已办",ename:"mydonelist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/home_00.png",href:"/account/mydonelist",description:"查看已处理的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","我发起","已审批","已驳回","知会我"],dataSource:[],click:function(){e.panename="mydonelist"}},{id:200,name:"我的申请",ename:"myapplylist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/hire.png",href:"/account/myapplylist",description:"查看我发起的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myapplylist"}},{id:2,name:"我的奖罚",ename:"myrewardslist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/绩效管理.png",href:"/account/myrewardslist",description:"查看涉及我的奖罚明细",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myrewardslist"}},{id:3,name:"统计分析",ename:"myanalyselist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/zhushou.png",href:"/account/myanalyselist",description:"查看自己的奖罚月/季度报表",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部"],click:function(){e.panename="myanalyselist"}},{id:4,name:"月度报表",ename:"mymonthlist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/leave.png",href:"/account/mymonthlist",description:"查看/导出月度奖罚明细及汇总",show:!0,css:"",tabs:["全部","待处理","抄送我"],click:function(){e.panename="mymonthlist"}},{id:5,name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/position.png",href:"/account/myquanterlist",description:"查看/导出月度奖罚明细及汇总",show:!0,css:"",tabs:["全部","待处理","抄送我"],click:function(){e.panename="myquanterlist"}}]}}},Ln=H.tools,Tn=K.storage,Gn=Ie.manage,Yn=ce.query,Me={workflow:{queryPRLogHistoryByDataID:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_history?_where=(business_data_id,eq,").concat(r,")&_sort=operate_time&_p=0&_size=1000"),void 0!==(n=Tn.getStore("sys_workflow_cache@$history&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("xid",Ln.queryUniqueID()).set("id",Ln.queryUniqueID()).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&Tn.setStore("sys_workflow_cache@$history&id".concat(r),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryPRLogByDataID:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log?_where=(business_data_id,eq,").concat(n,")&_sort=operate_time&_p=0&_size=1000"),e.prev=1,e.next=4,superagent.get(t).set("xid",Ln.queryUniqueID()).set("id",Ln.queryUniqueID()).set("accept","json");case 4:return t=e.sent,console.log(t),null!=t.body&&0<t.body.length&&Tn.setStore("sys_workflow_cache@$now&id".concat(n),t.body,0),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryPRLogInformedByDataID:function(r){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.xmysqlAPI,"/api/pr_log_informed?_where=(business_data_id,eq,").concat(r,")&_sort=operate_time&_p=0&_size=1000"),void 0!==(n=Tn.getStore("sys_workflow_cache@$informed&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("xid",Ln.queryUniqueID()).set("id",Ln.queryUniqueID()).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&Tn.setStore("sys_workflow_cache@$informed&id".concat(r),n.body,60),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryPRLogUserByPage:function(r,a){return Yt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.xmysqlAPI,"/api/v_uname?_p=").concat(r,"&_size=").concat(a,"&_sort=username"),void 0!==(n=Tn.getStore("sys_workflow_username@$all&p=".concat(r,"&size=").concat(a)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("xid",Ln.queryUniqueID()).set("id",Ln.queryUniqueID()).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&Tn.setStore("sys_workflow_username@$all&p=".concat(r,"&size=").concat(a),n.body,3600),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserAll:function(){return Yt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],void 0!==(r=Tn.getStore("sys_workflow_user_all@$all"))&&null!=r&&""!=r)return e.abrupt("return",r);e.next=4;break;case 4:n=0;case 5:if(n<=100)return e.next=8,queryPRLogUserByPage(n,99);e.next=17;break;case 8:if(!(null!=(r=e.sent)&&0<r.length)){e.next=13;break}t.push.apply(t,Qt(r)),e.next=14;break;case 13:return e.abrupt("break",17);case 14:n++,e.next=5;break;case 17:return null!=t&&0<t.length&&Tn.setStore("sys_workflow_user_all@$all",t,86400),e.abrupt("return",t);case 19:case"end":return e.stop()}},e)}))()},queryUserByName:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,queryUserAll();case 2:if(t=e.sent,null!=(t=t.find(function(e){return e.username==n}))&&null!=t.realname)return e.abrupt("return",t.realname);e.next=8;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))()},postWorkflowApprove:function(n,r,a,o,s,c,i,u,l,d){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,Gn.postTableData("BS_TRANSACTION",a);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("流程事务处理框架处理异常",e.t0);case 10:if(e.prev=10,null!=o)return e.next=14,Gn.postProcessLog(o);e.next=15;break;case 14:t=e.sent;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),console.log("审批处理下一节点的审批信息",e.t1);case 20:if(e.prev=20,null!=n&&null!=r&&null!=s&&null!=c)return e.next=24,Gn.postProcessLogHistory(s);e.next=35;break;case 24:return t=e.sent,e.next=27,Gn.deleteProcessLog(n,s);case 27:return t=e.sent,e.next=30,Gn.patchTableData(n,r.business_data_id,c);case 30:return t=e.sent,e.next=33,Gn.transFreeWflowHis(r.business_data_id);case 33:t=e.sent,setTimeout(Yt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn.patchTableData(n,r.business_data_id,c);case 2:t=e.sent;case 3:case"end":return e.stop()}},e)})),100);case 35:e.next=40;break;case 37:e.prev=37,e.t2=e.catch(20),console.log("审批处理当前节点的审批信息",e.t2);case 40:return e.prev=40,i.audit_node=",".concat(i.audit_node,","),Ln.deNull(u)&&!i.audit_node.includes(u)&&(i.audit_node=i.audit_node.replace(",".concat(d,","),",".concat(d,",").concat(u,","))),Ln.deNull(l)&&!i.audit_node.includes(l)&&(i.audit_node=i.audit_node.replace(",".concat(d,","),",".concat(l,",").concat(d,","))),Ln.deNull(l)&&i.audit_node.indexOf(d)!=i.audit_node.lastIndexOf(d)&&(i.audit_node=i.audit_node.replace(",".concat(d,","),",")),i.audit_node.startsWith(",")&&(i.audit_node=i.audit_node.substring(1)),i.audit_node.endsWith(",")&&(i.audit_node=i.audit_node.substring(0,i.audit_node.length-1)),e.next=49,Gn.patchTableData("bs_free_process",i.id,{audit_node:i.audit_node});case 49:t=e.sent,e.next=55;break;case 52:e.prev=52,e.t3=e.catch(40),console.log(e.t3);case 55:if(e.prev=55,"1"==c.bpm_status)return e.next=59,postDynamicReject(n,r);e.next=61;break;case 59:e.next=69;break;case 61:if("4"==c.bpm_status)return e.next=64,postDynamicAgree(n,r);e.next=66;break;case 64:e.next=69;break;case 66:if("5"==c.bpm_status)return e.next=69,postDynamicNotify(n,r);e.next=69;break;case 69:e.next=74;break;case 71:e.prev=71,e.t4=e.catch(55),console.log(e.t4);case 74:return console.log("加签用户："+u),console.log("会签用户："+l),e.abrupt("return",t);case 77:case"end":return e.stop()}},e,null,[[1,7],[10,17],[20,37],[40,52],[55,71]])}))()},approveViewProcessLog:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn.postProcessLogHistory(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))()},taskViewProcessLog:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn.postProcessLog(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))()},deleteViewProcessLog:function(n){return Yt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.map(function(e){e.oid=e.id,e.id=e.pid}),e.next=3,Gn.deleteProcessLog("",n);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}))()},checkSubmitInfo:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"workflowing";try{if(""==Ln.deNull(n)&&"workflowing"==r)return vant.Toast.fail("请选择审批用户!"),!1;if(Ln.deNull(n).includes(",")&&"workflowing"==r)return vant.Toast.fail("审批用户只能选择一个!"),!1;if(""==Ln.deNull(t)&&"notifying"==r)return vant.Toast.fail("请选择知会用户!"),!1;if((","+e+",").includes(","+n+",")&&"workflowing"==r)return vant.Toast.fail("审批流程中，审批人员[${approver}]不能出现在审核人员中!"),!1}catch(e){console.log("check submit info error : "+e)}return!0},postWorkflowFree:function(u,l,d,p,f,m,y){return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n={bpm_status:y},r={};try{p.notify_node=p.notify_node.replace(/undefined/g,""),p.notify_node.startsWith(",")&&(p.notify_node=p.notify_node.substring(1)),p.notify_node.endsWith(",")&&(p.notify_node=p.notify_node.substring(0,p.notify_node.length-1))}catch(e){console.log(e)}return e.prev=4,a=(new Date).getTime(),o=Ln.queryUniqueID(),e.next=9,Yn.queryTableData(l,d.id);case 9:return s=e.sent,e.next=12,Gn.queryTableDataByField("v_table_name","id",l);case 12:c=e.sent;try{c=c[0].name}catch(e){console.log(e)}i="<div><span>"+u.realname+'</span> 发起了 <a href="/workflow/view?table_name='.concat(l,"&id=").concat(d.id,"&user=").concat(u.username,'&type=notify">')+c+'</a> 的 <a href="/workflow/view?table_name='.concat(l,"&id=").concat(d.id,"&user=").concat(u.username,'&type=notify">流程申请</a> ')+"</div>",r={id:o,create_by:u.username,create_time:Ln.formatDate(a,"yyyy-MM-dd hh:mm:ss"),update_by:u.username,title:i,content:i,main_key:d.id,main_table:l,main_data:JSON.stringify(s),relate_users:"".concat(p.audit_node,",").concat(p.approve_node,",").concat(p.notify_node,",").concat(u.username,",admin,")},p.main_data=JSON.stringify(s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.log(e.t0);case 22:return e.prev=22,e.prev=23,e.next=26,Gn.postProcessFreeNode(p);case 26:t=e.sent,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(23),console.log(e.t1);case 32:return e.prev=32,e.next=35,Gn.postProcessLogHistory(f);case 35:t=e.sent,e.next=41;break;case 38:e.prev=38,e.t2=e.catch(32),console.log(e.t2);case 41:return e.prev=41,e.next=44,Gn.postProcessLog(m);case 44:t=e.sent,e.next=50;break;case 47:e.prev=47,e.t3=e.catch(41),console.log(e.t3);case 50:return e.prev=50,e.next=53,Gn.patchTableData(l,d.id,n);case 53:t=e.sent,e.next=59;break;case 56:e.prev=56,e.t4=e.catch(50),console.log(e.t4);case 59:return e.prev=59,e.next=62,Gn.postTableData("bs_dynamic",r);case 62:t=e.sent,e.next=68;break;case 65:e.prev=65,e.t5=e.catch(59),console.log(e.t5);case 68:return e.prev=68,e.next=71,Gn.patchTableData(l,d.id,n);case 71:t=e.sent,e.next=77;break;case 74:e.prev=74,e.t6=e.catch(68),console.log(e.t6);case 77:e.next=82;break;case 79:e.prev=79,e.t7=e.catch(22),console.log("处理自由流程发起提交审批操作异常："+e.t7);case 82:return e.abrupt("return",t);case 83:case"end":return e.stop()}},e,null,[[4,19],[22,79],[23,29],[32,38],[41,47],[50,56],[59,65],[68,74]])}))()}}};function Rn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wn=H.tools,Hn=K.storage,Jn=Ie.manage,$n=ce.query,Kn=Me.workflow,Nt={wflowprocess:{handleApproveWF:function(){var P=arguments;return Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l,d,p,f,m,y,g,v,h,_,b,w,x,q,k,I,D,N,j,S,O,U,B,C,E,A,F,M;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<P.length&&void 0!==P[0]?P[0]:"",n=1<P.length&&void 0!==P[1]?P[1]:"",r=2<P.length&&void 0!==P[2]?P[2]:[],o=a="",s=Wn.queryUrlString("id"),c=window.decodeURIComponent(Wn.queryUrlString("tname")),i=a+","+o,e.next=11,Jn.queryCurFreeWorkflow(s);case 11:return u=e.sent,e.next=14,$n.queryTableData(c,s);case 14:if(t=e.sent,l=JSON.parse(JSON.stringify(t)),""!=Wn.deNull(a)&&""!=Wn.deNull(o))return vant.Dialog.alert({message:"无法同时进行加签及会签操作，请单独选择加签用户或会签用户！"}),e.abrupt("return",!1);e.next=19;break;case 19:if(i=(i=i.startsWith(",")?i.substring(1):i).endsWith(",")?i.substring(0,i.length-1):i,console.log("会签/加签用户 : "+i),d=Wn.contain(u.audit_node+","+u.approve_node,i),Wn.isNull(d)){e.next=29;break}return e.next=26,Jn.patchEnameCname(d);case 26:return d=e.sent,vant.Dialog.alert({message:"加签/会签用户，不能选择审批流程中已经存在的用户(".concat(d,")!")}),e.abrupt("return",!1);case 29:return e.next=31,vant.Dialog.confirm({title:"确认操作",message:"是否确认提交此自由流程?"});case 31:return p=Hn.getStore("system_userinfo"),e.next=34,Jn.handleUserInfo(p);case 34:return f=Wn.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),m=m||"同意",y=y||t.idea_content||"同意",g=Wn.queryUrlString("pid"),h=[],x=w=b=_=s=v=null,e.prev=45,e.next=48,Jn.queryProcessLogByID(c,g);case 48:t=e.sent,e.next=54;break;case 51:e.prev=51,e.t0=e.catch(45),console.log(e.t0);case 54:if(""==Wn.deNull(t))return vant.Dialog.alert({message:"未找到下一节点的流程信息，请刷新页面，查看是否已经审批完成！"}),e.abrupt("return",!1);e.next=57;break;case 57:if(s=t.business_data_id,_=t.process_audit,Wn.deNull(t.employee).includes(p.username)||Wn.deNull(t.employee).includes(p.realname)){e.next=62;break}return vant.Dialog.alert({message:"您不在此审批流程记录的操作职员列中，无法进行审批操作！"}),e.abrupt("return",!1);case 62:return e.prev=62,e.next=65,Jn.queryProcessLog(c,s);case 65:h=e.sent,e.next=71;break;case 68:e.prev=68,e.t1=e.catch(62),console.log(e.t1);case 71:return h.map(function(e){var t=e.create_time;e.approve_user=p.username,e.action=m,e.operate_time=f,e.action_opinion=y,e.create_time=Wn.formatDate(t,"yyyy-MM-dd hh:mm:ss")}),b=JSON.parse(JSON.stringify(h)),e.next=75,Jn.queryBusinessInfo(c);case 75:if(w=e.sent,n=w[0],1<w.length&&"000000000"!=t.business_code)return vant.Dialog.alert({message:"获取到此业务含有多个流程权责，请联系管理员进行配置！"}),e.abrupt("return",!1);e.next=82;break;case 82:if(w.length<=0&&"000000000"!=t.business_code)return vant.Dialog.alert({message:"未获取到此业务的流程权责，无法同意审批！"}),e.abrupt("return",!1);e.next=87;break;case 87:if(k=_,I=(D=q="")==Wn.deNull(D)?"":D.split(","),"000000000"==t.business_code){e.next=105;break}e.prev=92,q=","+n.audit+","+n.approve+",",D=n.notify,v=n.approve,e.next=103;break;case 98:return e.prev=98,e.t2=e.catch(92),vant.Dialog.alert({message:"固化流程设置节点失败，无法进行审批操作！"}),console.log("固化流程设置节点失败 :"+e.t2),e.abrupt("return",!1);case 103:e.next=130;break;case 105:e.prev=105,k=t.employee;try{x=JSON.parse(t.business_data)}catch(e){console.log(e)}if(!("audit_node"in x||"approve_node"in x||"notify_node"in x))try{x=JSON.parse(x.business_data)}catch(e){console.log(e)}return e.next=111,Jn.queryCurFreeWorkflow(s);case 111:D=e.sent,""!=Wn.deNull(D)&&(x=D),console.log("free node back data : "+D),x.audit_node=",".concat(x.audit_node,","),x.audit_node.indexOf(","+k+",")!=x.audit_node.lastIndexOf(","+k+",")&&(x.audit_node=x.audit_node.replace(","+k+",",",")),""!=Wn.deNull(a)&&(x.audit_node=x.audit_node.replace(",".concat(k,","),",".concat(k,",").concat(a,","))),""!=Wn.deNull(o)&&(x.audit_node=x.audit_node.replace(",".concat(k,","),",".concat(k,",").concat(o,",").concat(k,","))),x.audit_node.startsWith(",")&&(x.audit_node=x.audit_node.substring(1)),x.audit_node.endsWith(",")&&(x.audit_node=x.audit_node.substring(0,x.audit_node.length-1)),q=","+Wn.deNull(x.audit_node)+","+Wn.deNull(x.approve_node)+",",I=""==Wn.deNull(x.notify_node)?[]:[x.notify_node],v=x.approve_node,e.next=130;break;case 125:return e.prev=125,e.t3=e.catch(105),vant.Dialog.alert({message:"自由流程设置节点失败，无法进行审批操作！"}),console.log("自由流程设置节点失败 :"+e.t3),e.abrupt("return",!1);case 130:if(""==Wn.deNull(a)&&""==Wn.deNull(o)&&q.indexOf(","+k+",")!=q.lastIndexOf(","+k+",")&&(q=q.replace(","+k+",",",")),j=q.split(","+k+","),N=j[1],j={},""!=N){e.next=201;break}j={bpm_status:"4"},S=Rn(I),e.prev=137,S.s();case 139:if((E=S.n()).done){e.next=166;break}if(O=E.value,B=U=null,C={},"000000000"!=t.business_code)return e.prev=145,e.next=148,Jn.queryProcessNodeEmployee(O);e.next=160;break;case 148:return U=e.sent,e.next=151,Jn.queryProcessNodeProcName(O);case 151:B=e.sent,e.next=157;break;case 154:e.prev=154,e.t4=e.catch(145),console.error(e.t4);case 157:C={id:Jn.queryRandomStr(32),table_name:c,main_value:t.main_value,business_data_id:t.business_data_id,business_code:n.id,process_name:n.items,employee:U[0].employee,process_station:B[0].item_text,process_audit:O,operate_time:f,create_time:f,proponents:t.proponents,content:t.content,business_data:JSON.stringify(t)},e.next=161;break;case 160:C={id:Jn.queryRandomStr(32),table_name:c,main_value:t.business_data_id,business_data_id:t.business_data_id,business_code:"000000001",process_name:"自由流程知会",employee:O,process_station:"自由流程知会",process_audit:"000000001",proponents:t.proponents,content:t.content,operate_time:f,create_time:f,business_data:t.business_data};case 161:return e.next=163,Jn.postProcessLogInformed(C);case 163:e.sent;case 164:e.next=139;break;case 166:e.next=171;break;case 168:e.prev=168,e.t5=e.catch(137),S.e(e.t5);case 171:return e.prev=171,S.f(),e.finish(171);case 174:return E={id:Jn.queryRandomStr(32),type:"approve",create_by:p.username,create_time:f,table_name:c,table_id:t.business_data_id,table_data:JSON.stringify(t),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:""}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:b}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:C}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:b}),origin_data:JSON.stringify({operation:"patch",tableName:c,id:t.business_data_id,data:j}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:JSON.stringify({})},e.next=177,Kn.postWorkflowApprove(c,t,E,null,b,j,x,a,o,k);case 177:return e.next=179,handleTaskItem(r,t);case 179:return vant.Dialog.alert({message:"同意审批成功，审批流程处理完毕！"}),A=null,e.prev=181,A=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(l.id,"&pid=&tname=bs_reward_apply&panename=myrewardlist&typename=hr_admin_ids&bpm_status=4&proponents=").concat(l.hr_admin_ids,"&role=hr")),e.next=185,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(l.hr_admin_ids,"/亲爱的同事，").concat(l.create_by,"提交的奖罚申请流程已处理完毕：").concat(l.title,"，内容：").concat(l.content,"，请及时进行知会确认操作！?type=reward&rurl=").concat(A)).set("xid",Wn.queryUniqueID()).set("id",Wn.queryUniqueID()).set("accept","json");case 185:e.next=190;break;case 187:e.prev=187,e.t6=e.catch(181),console.log(e.t6);case 190:return e.prev=190,A=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(s,"&pid=&tname=bs_reward_apply&panename=mytodolist&typename=wflow_done&bpm_status=4&proponents=").concat(l.create_by)),e.next=194,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(l.create_by,"/亲爱的同事，您提交的奖罚申请流程已处理完毕：").concat(l.title,"，内容：").concat(l.content,"！?type=reward&rurl=").concat(A)).set("xid",Wn.queryUniqueID()).set("id",Wn.queryUniqueID()).set("accept","json");case 194:e.next=199;break;case 196:e.prev=196,e.t7=e.catch(190),console.log(e.t7);case 199:e.next=239;break;case 201:if(N=(N=0==N.indexOf(",")?N.substring(1):N).split(",")[0],j=v==N?{bpm_status:"3"}:{bpm_status:"2"},C={},"000000000"!=t.business_code)return e.next=208,Jn.queryProcessNodeEmployee(N);e.next=215;break;case 208:return U=e.sent,e.next=211,Jn.queryProcessNodeProcName(N);case 211:B=e.sent,C={id:Jn.queryRandomStr(32),table_name:c,main_value:t.main_value,business_data_id:t.business_data_id,business_code:n.id,process_name:n.items,employee:U[0].employee,process_station:B[0].item_text,process_audit:N,proponents:t.proponents,content:t.content,create_time:f,business_data:t.business_data},e.next=216;break;case 215:C={id:Jn.queryRandomStr(32),table_name:c,main_value:t.business_data_id,business_data_id:t.business_data_id,business_code:"000000000",process_name:"自由流程审批",employee:N,process_station:"自由流程审批",process_audit:"000000000",proponents:t.proponents,content:t.content,operate_time:f,create_time:f,business_data:t.business_data};case 216:return e.next=218,Jn.queryApprovalLength(c,t.business_data_id);case 218:if(0!=(M=e.sent)){e.next=223;break}vant.Dialog.alert({message:"处理异常，请稍后重试；如果多次处理异常，可能需要撤销当前审批，重新发起审批流程！异常流程数据[status:".concat(M,"]")}),e.next=239;break;case 223:return F={id:Jn.queryRandomStr(32),type:"next",create_by:p.username,create_time:f,table_name:c,table_id:t.business_data_id,table_data:JSON.stringify(t),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:C}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:b}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:""}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:b}),origin_data:JSON.stringify({operation:"patch",tableName:c,id:t.business_data_id,data:j}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:""},e.next=226,Kn.postWorkflowApprove(c,t,F,C,b,j,x,a,o,k);case 226:return e.next=228,handleNotifyHR(N,t.proponents,"",encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(t.business_data_id,"&pid=").concat(C.id,"&tname=bs_reward_apply&panename=mytodolist&typename=wflow_todo&bpm_status=").concat(j.bpm_status,"&proponents=").concat(t.proponents)));case 228:return vant.Dialog.alert({message:"同意审批成功，审批流程已推向后续处理人！"}),console.log("operationData : "+F),e.prev=230,M=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(s,"&pid=&tname=bs_reward_apply&panename=mytodolist&typename=wflow_todo&bpm_status=2&proponents=").concat(N)),e.next=234,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(N,"/亲爱的同事，您收到奖罚申请流程审批处理请求：").concat(t.title,"，内容：").concat(t.content,"，请您及时进行审批处理！?type=reward&rurl=").concat(M)).set("xid",Wn.queryUniqueID()).set("id",Wn.queryUniqueID()).set("accept","json");case 234:e.next=239;break;case 236:e.prev=236,e.t8=e.catch(230),console.log(e.t8);case 239:return e.abrupt("return","success");case 240:case"end":return e.stop()}},e,null,[[45,51],[62,68],[92,98],[105,125],[137,168,171,174],[145,154],[181,187],[190,196],[230,236]])}))()},handleNotifyHR:function(t,n,e,r){return Yt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(t,"/亲爱的同事，员工‘").concat(n,"’提交了的奖罚申请流程，请到奖惩申请服务进行流程审批操作！?type=reward&rurl=").concat(r)).set("xid",Wn.queryUniqueID()).set("id",Wn.queryUniqueID()).set("accept","json");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))()},handleTaskItem:function(o,s){var c=arguments;return Yt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<c.length&&void 0!==c[2]?c[2]:"",a=Wn.queryUrlString("table_name"),n=(new Date).getTime(),"bs_plan_task"!=a){e.next=30;break}r=Rn(o),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=22;break}return delete(a=a.value).no,delete a.real_start_time,delete a.real_end_time,delete a.date,delete a.work_date,a.create_time=Wn.formatDate(n,"yyyy-MM-dd"),a.depart_name=s.depart_name,a.status="待提交",e.next=19,Jn.postTableData("bs_plan_task_mission",a);case 19:t=e.sent;case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),r.e(e.t0);case 27:return e.prev=27,r.f(),e.finish(27);case 30:return e.abrupt("return",t);case 31:case"end":return e.stop()}},e,null,[[5,24,27,30]])}))()},handleRejectWF:function(){return Yt(Tt.mark(function e(){var d;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d="",e.next=3,vant.Dialog.confirm({title:"确认操作",message:"是否进行驳回审批操作?"}).then(Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Wn.queryUrlString("id"),n=window.decodeURIComponent(Wn.queryUrlString("tname")),e.next=4,$n.queryTableData(n,t);case 4:return r=e.sent,a=JSON.parse(JSON.stringify(r)),o=Hn.getStore("system_userinfo"),e.next=9,Jn.handleUserInfo(o);case 9:return s=Wn.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),c=c||"驳回",i=i||r.idea_content||"驳回",l=Wn.queryUrlString("pid"),u={bpm_status:"1"},e.next=16,Jn.queryProcessLogByID(n,l);case 16:if(r=e.sent,Wn.deNull(r.employee).includes(o.username)||Wn.deNull(r.employee).includes(o.realname)){e.next=20;break}return vant.Dialog.alert({message:"您不在此审批流程记录的操作职员列中，无法进行驳回操作！"}),e.abrupt("return",!1);case 20:return e.next=22,Jn.queryProcessLogByID(n,r.id);case 22:return r=e.sent,e.next=25,Jn.queryProcessLog(n,r.business_data_id);case 25:return(l=e.sent).map(function(e){var t=e.create_time;e.approve_user=o.username,e.action=c,e.operate_time=s,e.action_opinion=i,e.create_time=Wn.formatDate(t,"yyyy-MM-dd hh:mm:ss")}),e.next=29,Kn.postWorkflowApprove(n,r,null,null,l,u);case 29:return vant.Dialog.alert({message:"驳回审批成功！"}),e.prev=30,receiveURL=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(t,"&pid=&tname=bs_reward_apply&panename=mytodolist&typename=wflow_done&bpm_status=4&proponents=").concat(a.create_by)),e.next=34,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v1/weappms/").concat(a.create_by,"/亲爱的同事，您提交的奖罚申请流程已被驳回：").concat(a.title,"，内容：").concat(a.content,"，驳回意见：").concat(i,"，请修改申请内容后重新提交流程?type=reward&rurl=").concat(receiveURL)).set("xid",Wn.queryUniqueID()).set("id",Wn.queryUniqueID()).set("accept","json");case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(30),console.log(e.t0);case 39:return d="success",e.abrupt("return",d);case 41:case"end":return e.stop()}},e,null,[[30,36]])})));case 3:return e.abrupt("return",d);case 4:case"end":return e.stop()}},e)}))()},handleConfirmWF:function(){return Yt(Tt.mark(function e(){var d;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d="",e.next=3,vant.Dialog.confirm({title:"确认操作",message:"是否进行确认知会操作?"}).then(Yt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Wn.queryUrlString("id"),n=window.decodeURIComponent(Wn.queryUrlString("tname")),e.next=4,$n.queryTableData(n,t);case 4:return r=e.sent,a=Hn.getStore("system_userinfo"),e.next=8,Jn.handleUserInfo(a);case 8:return o=Wn.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),s=s||"知会",c=c||r.idea_content||"知会确认",u=Wn.queryUrlString("pid"),i={bpm_status:"5"},e.next=15,Jn.queryProcessLogInfByID(n,u);case 15:if((r=e.sent).create_time=o,Wn.deNull(r.approve_user).length>=Wn.deNull(r.employee).length)return e.prev=18,e.next=21,Jn.postProcessLogHistory(r);e.next=36;break;case 21:return d=e.sent,e.next=24,Jn.deleteProcessLogInf(n,[r]);case 24:return d=e.sent,e.next=27,Jn.patchTableData(n,r.business_data_id,i);case 27:d=e.sent,e.next=33;break;case 30:e.prev=30,e.t0=e.catch(18),console.log(e.t0);case 33:return vant.Dialog.alert({message:"知会确认成功！"}),d="success",e.abrupt("return",d);case 36:if(u=","+Wn.deNull(r.employee)+",",l=","+Wn.deNull(r.approve_user)+",",Wn.deNull(u).includes(","+a.username+",")||Wn.deNull(u).includes(","+a.realname+",")){e.next=42;break}return vant.Dialog.alert({message:"您不在此知会记录的操作职员列中，无法进行确认操作！"}),d="success",e.abrupt("return",d);case 42:if(Wn.deNull(l).includes(","+a.username+",")||Wn.deNull(l).includes(","+a.realname+","))return vant.Dialog.alert({message:"您已经在此知会记录中，执行过确认操作了！"}),d="success",e.abrupt("return",d);e.next=46;break;case 46:return r.approve_user=Wn.deNull(r.approve_user)+(""==Wn.deNull(r.approve_user)?"":",")+a.username,r.action=s,r.operate_time=o,r.action_opinion=Wn.deNull(r.action_opinion)+(""==Wn.deNull(r.action_opinion)?"":"\n\r")+"".concat(a.username,":").concat(c),e.next=52,Jn.patchTableData("PR_LOG_INFORMED",r.id,r);case 52:if(r.approve_user.length>=r.employee.length)return e.prev=53,e.next=56,Jn.postProcessLogHistory(r);e.next=68;break;case 56:return d=e.sent,e.next=59,Jn.deleteProcessLogInf(n,[r]);case 59:return d=e.sent,e.next=62,Jn.patchTableData(n,r.business_data_id,i);case 62:d=e.sent,e.next=68;break;case 65:e.prev=65,e.t1=e.catch(53),console.log(e.t1);case 68:return vant.Dialog.alert({message:"知会确认成功！"}),d="success",e.abrupt("return",d);case 71:case"end":return e.stop()}},e,null,[[18,30],[53,65]])})));case 3:return e.abrupt("return",d);case 4:case"end":return e.stop()}},e)}))()}}},jt={};Object.assign(jt,Pe,_e,Ye,vt,ut,It,e,n,Lt,O,H,K,ae,ce,Ie,je,Ae,Me,Nt,se,De,Ne);var Vn=jt;p.mixin=function(e){return Vn.each(e,function(t,e){p[e]=Vn.isFunction(t)&&!1!==t._c?function(){var e=t.apply(p.$context,arguments);return p.$context=null,e}:t}),p},p.setup=function(e){Vn.assign(g,e)},p.mixin(Vn);jt=p;return jt.default=p,jt});
