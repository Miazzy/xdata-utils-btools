!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es6.object.assign.js"),require("core-js/modules/es6.regexp.match.js"),require("core-js/modules/es6.regexp.split.js"),require("core-js/modules/es6.weak-set.js"),require("core-js/modules/es6.set.js"),require("core-js/modules/es6.weak-map.js"),require("core-js/modules/web.dom.iterable.js"),require("core-js/modules/es6.array.iterator.js"),require("core-js/modules/es6.string.iterator.js"),require("core-js/modules/es6.map.js"),require("core-js/modules/es7.symbol.async-iterator.js"),require("core-js/modules/es6.symbol.js"),require("core-js/modules/es6.regexp.to-string.js"),require("core-js/modules/es6.object.to-string.js"),require("core-js/modules/es6.string.includes.js"),require("core-js/modules/es6.array.copy-within.js"),require("core-js/modules/es7.array.includes.js"),require("core-js/modules/es6.regexp.replace.js"),require("core-js/modules/es6.function.name.js"),require("core-js/modules/es6.number.constructor.js"),require("core-js/modules/es6.regexp.search.js"),require("core-js/modules/es7.string.pad-end.js"),require("core-js/modules/es6.regexp.constructor.js"),require("core-js/modules/es6.string.fixed.js"),require("core-js/modules/es7.string.pad-start.js"),require("core-js/modules/es6.string.repeat.js"),require("core-js/modules/es7.string.trim-right.js"),require("core-js/modules/es7.string.trim-left.js"),require("core-js/modules/es6.array.from.js"),require("core-js/modules/es6.promise.js"),require("core-js/modules/es6.string.ends-with.js"),require("core-js/modules/es6.string.starts-with.js"),require("core-js/modules/es6.object.keys.js"),require("core-js/modules/es6.array.find.js"),require("core-js/modules/es6.array.find-index.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.object.assign.js","core-js/modules/es6.regexp.match.js","core-js/modules/es6.regexp.split.js","core-js/modules/es6.weak-set.js","core-js/modules/es6.set.js","core-js/modules/es6.weak-map.js","core-js/modules/web.dom.iterable.js","core-js/modules/es6.array.iterator.js","core-js/modules/es6.string.iterator.js","core-js/modules/es6.map.js","core-js/modules/es7.symbol.async-iterator.js","core-js/modules/es6.symbol.js","core-js/modules/es6.regexp.to-string.js","core-js/modules/es6.object.to-string.js","core-js/modules/es6.string.includes.js","core-js/modules/es6.array.copy-within.js","core-js/modules/es7.array.includes.js","core-js/modules/es6.regexp.replace.js","core-js/modules/es6.function.name.js","core-js/modules/es6.number.constructor.js","core-js/modules/es6.regexp.search.js","core-js/modules/es7.string.pad-end.js","core-js/modules/es6.regexp.constructor.js","core-js/modules/es6.string.fixed.js","core-js/modules/es7.string.pad-start.js","core-js/modules/es6.string.repeat.js","core-js/modules/es7.string.trim-right.js","core-js/modules/es7.string.trim-left.js","core-js/modules/es6.array.from.js","core-js/modules/es6.promise.js","core-js/modules/es6.string.ends-with.js","core-js/modules/es6.string.starts-with.js","core-js/modules/es6.object.keys.js","core-js/modules/es6.array.find.js","core-js/modules/es6.array.find-index.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Betools=t()}(this,function(){"use strict";var f=function(){},e="yyyy-MM-dd HH:mm:ss",y={treeOptions:{parentKey:"parentId",key:"id",children:"children"},formatDate:e+".SSSZ",formatString:e,dateDiffRules:[["yyyy",31536e6],["MM",2592e6],["dd",864e5],["HH",36e5],["mm",6e4],["ss",1e3],["S",0]]},a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var c=t(function(t){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n}),n="undefined",r=Object.prototype.toString,o=Object.assign;function l(e,t){return e.hasOwnProperty(t)}function s(t){return function(e){return c(e)===t}}function i(t){return function(e){return"[object "+t+"]"===r.call(e)}}function u(e){return k(e)?(n={},fe(e,function(e,t){n[t]=u(e)}),n):m(e)?(t=e,f.map(t,u)):e;var t,n}function p(e,t){return e&&(t?u(e):Q(k(e)?{}:[],e))}var d=s(n),m=Array.isArray||i("Array");function g(e){return null!==e&&!isNaN(e)&&!m(e)&&e%1==0}var h=s("function"),v=s("boolean"),w=s("string"),b=s("number"),_=i("RegExp"),x=s("object");function k(e){return!!e&&e.constructor===Object}var I=i("Date"),j=i("Error");function N(e){for(var t in e)return!1;return!0}function O(e){return null===e}var S=("undefined"==typeof Symbol?"undefined":c(Symbol))!==n;function E(e){return S&&Symbol.isSymbol?Symbol.isSymbol(e):"symbol"===c(e)}var D=i("Arguments");var C=("undefined"==typeof document?"undefined":c(document))!==n;var q=("undefined"==typeof window?"undefined":c(window))!==n;var A=("undefined"==typeof FormData?"undefined":c(FormData))!==n;var F=("undefined"==typeof Map?"undefined":c(Map))!==n;var B=("undefined"==typeof WeakMap?"undefined":c(WeakMap))!==n;var P=("undefined"==typeof Set?"undefined":c(Set))!==n;var L=("undefined"==typeof WeakSet?"undefined":c(WeakSet))!==n;function M(e,t){return G(e,t,T)}function T(e,t){return e===t}function G(n,r,o,a,e,t,c){if(n&&r&&!b(n)&&!b(r)&&!w(n)&&!w(r)){if(_(n))return o(""+n,""+r,e,t,c);if(I(n)||v(n))return o(+n,+r,e,t,c);var s,i,u,l=m(n),p=m(r);if(l||p?l&&p:n.constructor===r.constructor)return i=ne(n),u=ne(r),a&&(s=a(n,r,e)),i.length===u.length&&(d(s)?f.every(i,function(e,t){return e===u[t]&&G(n[e],r[u[t]],o,a,l||p?t:e,n,r)}):!!s)}return o(n,r,e,t,c)}function U(t,n){return function(e){return null===e?n:e[t]}}var z=0;function R(e,t,n){var r=[];if(e)for(t=t||0,n=n||e.length;t<n;t++)r.push(e[t]);return r}function Y(r,o){return function(e,t){if(e){if(w(e)||m(e))return e[r]?e[r](t):o(e,t);for(var n in e)if(l(e,n)&&t===e[n])return n}return-1}}var W=Y("indexOf",function(e,t){for(var n=0,r=e.length;n<r;n++)if(t===e[n])return n}),$=Y("lastIndexOf",function(e,t){for(var n=e.length-1;0<=n;n--)if(t===e[n])return n;return-1});function J(o){return function(e,t,n){if(e&&h(t)){if(n=this||n,m(e)||w(e))return o(e,t,n);for(var r in e)if(l(e,r)&&t.call(n,e[r],r,e))return r}return-1}}var H=J(function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1}),Z=J(function(e,t,n){for(var r=e.length-1;0<=r;r--)if(t.call(n,e[r],r,e))return r;return-1});function K(e,t){return-1!==W(e,t)}function V(t,e,n){for(var r,o=e.length,a=1;a<o;a++)r=e[a],ie(ne(e[a]),n?function(e){t[e]=p(r[e],n)}:function(e){t[e]=r[e]});return t}var Q=function(e){if(e){var t=arguments;if(!0!==e)return o?o.apply(Object,t):V(e,t);if(1<t.length)return V(e=m(e[1])?[]:{},t,!0)}return e};function X(t,n){try{delete t[n]}catch(e){t[n]=void 0}}function ee(n,r,e){if(n){var t,o=1<arguments.length&&(null===r||!x(r)),e=o?e:r;if(k(n))ue(n,o?function(e,t){n[t]=r}:function(e,t){X(n,t)}),e&&Q(n,e);else if(m(n)){if(o)for(t=n.length;0<t;)n[--t]=r;else n.length=0;e&&n.push.apply(n,e)}}return n}function te(e,r){var o=Object[e];return function(t){var n=[];if(t){if(o)return o(t);fe(t,1<r?function(e){n.push([""+e,t[e]])}:function(){n.push(arguments[r])})}return n}}var ne=te("keys",1),re=te("values",0),oe=te("entries",2);function ae(u,l){return function(n,r){var e,o={},a=[],c=this,t=arguments,s=1,i=t.length;if(!h(r))for(r=0;s<i;s++)m(e=t[s])?a=a.concat(e):a.push(e);return fe(n,function(e,t){((r?r.call(c,e,t,n):-1<H(a,function(e){return e===t}))?u:l)&&(o[t]=e)}),o}}var ce=ae(1,0),se=ae(0,1);function ie(e,t,n){if(e.forEach)e.forEach(t,n);else for(var r=0,o=e.length;r<o;r++)t.call(n||this,e[r],r,e)}function ue(e,t,n){for(var r in e)l(e,r)&&t.call(n||this,e[r],r,e)}function le(t,n,r){pe(ne(t),function(e){n.call(r||this,t[e],e,t)})}function pe(e,t,n){for(var r=e.length-1;0<=r;r--)t.call(n||this,e[r],r,e)}function fe(e,t,n){return e&&(n=n||this,(m(e)?ie:ue)(e,t,n))}function de(e,t,n){return e&&(m(e)?pe:le)(e,t,n||this)}function me(e){return e?m(e)?e:(""+e).split("."):[]}var ge=/(.+)?\[(\d+)\]$/,ye=/(.+)\[(\d+)\]$/;function he(e,t){if(e){var n,r,o,a=0;if(l(e,t))return e[t];if(o=(r=me(t)).length)for(n=e;a<o;a++)if(c=n,s=r[a],i=void 0,n=(i=s?s.match(ge):"")?i[1]?c[i[1]]?c[i[1]][i[2]]:void 0:c[i[2]]:c[s],d(n)||O(n))return;return n}var c,s,i}function ve(n,r,o){var a,e,c={};return n&&(o=this||o,r&&x(r)?(e=r,r=function(){return N(e)}):h(r)||(r=U(r)),fe(n,function(e,t){a=r?r.call(o,e,t,n):e,c[a]?c[a].push(e):c[a]=[e]})),c}var we={_hasOwnProp:l,isNaN:isNaN,isFinite:function(e){return b(e)&&isFinite(e)},isUndefined:d,isArray:m,isFloat:function(e){return null!==e&&!isNaN(e)&&!m(e)&&!g(e)},isInteger:g,isFunction:h,isBoolean:v,isString:w,isNumber:b,isRegExp:_,isObject:x,isPlainObject:k,isDate:I,isError:j,isTypeError:function(e){return!!e&&e.constructor===TypeError},isEmpty:N,isNull:O,isSymbol:E,isArguments:D,isElement:function(e){return!!(e&&w(e.nodeName)&&b(e.nodeType))},isDocument:function(e){return!(!e||9!==e.nodeType||!C)},isWindow:function(e){return!(!e||e!==e.window||!q)},isFormData:function(e){return A&&e instanceof FormData},isMap:function(e){return F&&e instanceof Map},isWeakMap:function(e){return B&&e instanceof WeakMap},isSet:function(e){return P&&e instanceof Set},isWeakSet:function(e){return L&&e instanceof WeakSet},isLeapYear:function(e){var e=e?f.toStringDate(e):new Date;return!!I(e)&&((e=e.getFullYear())%4==0&&(e%100!=0||e%400==0))},isMatch:function(n,r){var e=ne(n),t=ne(r);return!t.length||(f.includeArrays(e,t)?f.some(t,function(t){return-1<H(e,function(e){return e===t&&M(n[e],r[t])})}):M(n,r))},isEqual:M,isEqualWith:function(e,t,a){return h(a)?G(e,t,function(e,t,n,r,o){o=a(e,t,n,r,o);return d(o)?e===t:!!o},a):G(e,t,T)},property:U,getType:function(e){return null===e?""+e:E(e)?"symbol":I(e)?"date":m(e)?"array":_(e)?"regexp":j(e)?"error":c(e)},uniqueId:function(e){return(e?""+e:0)+ ++z},getSize:function(e){var t=0;return w(e)||m(e)?e.length:(fe(e,function(){t++}),t)},slice:R,indexOf:W,lastIndexOf:$,findIndexOf:H,findLastIndexOf:Z,includes:K,contains:K,assign:Q,extend:Q,toStringJSON:function(e){if(x(e))return e;if(w(e))try{return JSON.parse(e)}catch(e){}return{}},toJSONString:function(e){return JSON.stringify(e)||""},keys:ne,values:re,entries:oe,pick:ce,omit:se,first:function(e){return re(e)[0]},last:function(e){return(e=re(e))[e.length-1]},each:fe,forOf:function(e,t,n){if(e)if(n=n||this,m(e))for(var r=0,o=e.length;r<o&&!1!==t.call(n,e[r],r,e);r++);else for(var a in e)if(l(e,a)&&!1===t.call(n,e[a],a,e))break},arrayEach:ie,forEach:ie,objectEach:ue,lastForOf:function(e,t,n){var r,o;if(e)if(n=n||this,m(e))for(r=e.length-1;0<=r&&!1!==t.call(n,e[r],r,e);r--);else for(r=(o=ne(e)).length-1;0<=r&&!1!==t.call(n,e[o[r]],o[r],e);r--);},lastEach:de,lastForEach:pe,lastArrayEach:pe,lastObjectEach:le,has:function(e,t){if(e){if(l(e,t))return!0;for(var n,r,o,a,c=me(t),s=0,i=c.length,u=e;s<i&&(a=!1,(o=(n=c[s])?n.match(ge):"")?(r=o[1],o=o[2],r?u[r]&&l(u[r],o)&&(a=!0,u=u[r][o]):l(u,o)&&(a=!0,u=u[o])):l(u,n)&&(a=!0,u=u[n]),a);s++)if(s===i-1)return!0}return!1},get:function(e,t,n){return O(e)||d(e)?n:(t=he(e,t),d(t)?n:t)},set:function(e,t,n){var r,o;return e&&(r=e,t=me(t),o=t.length,ie(t,function(e,t){r=function(e,t,n,r){if(e[t])return n&&(e[t]=r),e[t];var o=t?t.match(ye):null,n=n?r:{};return o?(r=parseInt(o[2]),e[o[1]]||(e[o[1]]=new Array(r+1)),e[o[1]][r]=n):e[t]=n,n}(r,e,t===o-1,n)})),e},groupBy:ve,countBy:function(e,t,n){var r=ve(e,t,n||this);return ue(r,function(e,t){r[t]=e.length}),r},objectMap:function(n,r,o){var a={};if(n){if(!r)return n;o=o||this,h(r)||(r=U(r)),fe(n,function(e,t){a[t]=r.call(o,e,t,n)})}return a},clone:p,delay:function(e,t){var n=R(arguments,2),r=this;return setTimeout(function(){e.apply(r,n)},t)},bind:function(e,t){var n=R(arguments,2);return t=t||this,function(){return e.apply(t,R(arguments).concat(n))}},once:function(e,t){var n=!1,r=null,o=R(arguments,2);return t=t||this,function(){return n||(r=e.apply(t,R(arguments).concat(o)),n=!0),r}},after:function(e,t,n){var r=0,o=[];return n=n||this,function(){++r<=e&&o.push(arguments[0]),e<=r&&t.apply(n,[o].concat(R(arguments)))}},before:function(e,t,n){var r=0,o=[];return n=n||this,function(){++r<e&&(o.push(arguments[0]),t.apply(n,[o].concat(R(arguments))))}},clear:ee,remove:function(n,r,o){if(n){if(1<arguments.length){var a=[],c=[];return o=o||this,h(r)||(s=r,r=function(e,t){return t===s}),fe(n,function(e,t,n){r.call(o,e,t,n)&&a.push(t)}),m(n)?de(a,function(e,t){c.push(n[e]),n.splice(e,1)}):(c={},ie(a,function(e){c[e]=n[e],X(n,e)})),c}return ee(n)}var s;return n},range:function(e,t,n){var r,o,a=[],c=arguments;if(c.length<2&&(t=c[0],e=0),o=t>>0,(r=e>>0)<t)for(n=n>>0||1;r<o;r+=n)a.push(r);return a},throttle:function(e,t,n){function r(){c=!0,e.apply(a,o),s=setTimeout(l,t)}var o,a,c=!1,s=0,i=!("leading"in(n=n||{}))||n.leading,u="trailing"in n&&n.trailing,l=function(){s=0,c||!0!==u||r()};return(n=function(){o=arguments,a=this,c=!1,0===s&&(!0===i?r():!0===u&&(s=setTimeout(l,t)))}).cancel=function(){var e=0!==s;return clearTimeout(s),c=!1,s=0,e},n},debounce:function(e,t,n){function r(){i=!0,u=0,e.apply(c,a)}function o(){!0===l&&(u=0),i||!0!==p||r()}var a,c,s=n||{},i=!1,u=0,n="boolean"==typeof n,l="leading"in s?s.leading:n,p="trailing"in s?s.trailing:!n,f=clearTimeout;return(n=function(){i=!1,a=arguments,c=this,0===u?!0===l&&r():f(u),u=setTimeout(o,t)}).cancel=function(){var e=0!==u;return f(u),u=0,e},n},destructuring:function(t,e){var n,r;return t&&e&&(n=Q.apply(this,[{}].concat(R(arguments,1))),r=ne(n),ie(ne(t),function(e){K(r,e)&&(t[e]=n[e])})),t}};function be(e){var t=[];return we.each(e,function(e){t.includes(e)||t.push(e)}),t}function _e(e,t){return t<e?1:-1}function xe(e,t,n,r){if(e){if(t===r)return qe(e).sort(_e);var o,r=Ee(e,function(e){return{data:e}}),a=(c=e,s=r,t=t,i=n||this,t=we.isArray(t)?t:[t],we.arrayEach(t,function(n,r){we.arrayEach(s,we.isFunction(n)?function(e,t){e[r]=n.call(i,e.data,t,c)}:function(e){e[r]=we.get(e.data,n)})}),t).length;if(a){for(;0<=a;)o=function(o,a){return function(e,t){var n=e[o],r=t[o];return n===r?a?a(e,t):0:_e(n,r)}}(a,o),a--;r=r.sort(o)}return Ee(r,we.property("data"))}var c,s,i;return[]}function ke(e){for(var t,n=[],r=we.values(e),o=r.length-1;0<=o;o--)t=0<o?f.random(0,o):0,n.push(r[t]),r.splice(t,1);return n}function Ie(c,s,i,u,l){return function(e,t,n){if(e&&t){if(n=n||this,c&&e[c])return e[c](t,n);if(s&&we.isArray(e)){for(var r=0,o=e.length;r<o;r++)if(!!t.call(n,e[r],r,e)===u)return[!0,!1,r,e[r]][i]}else for(var a in e)if(we._hasOwnProp(e,a)&&!!t.call(n,e[a],a,e)===u)return[!0,!1,a,e[a]][i]}return l}}var je=Ie("some",1,0,!0,!1),Ne=Ie("every",1,1,!1,!0),Oe=Ie("",0,2,!0),Se=Ie("find",1,3,!0);function Ee(e,t,n){var r=[];if(e&&1<arguments.length){if(n=n||this,we.isFunction(t)||(t=we.property(t)),e.map)return e.map(t,n);we.each(e,function(){r.push(t.apply(n,arguments))})}return r}function De(e,t,n){var r=0,o=f.toNumber;return n=n||this,we.each(e,t?we.isFunction(t)?function(){r+=o(t.apply(n,arguments))}:function(e){r+=o(e[t])}:function(e){r+=o(e)}),r}function Ce(e){for(var t=[],n=0,r=f.max(e,function(e){return e.length||0}).length;n<r;n++)t.push(Ee(e,n));return t}function qe(e){return Ee(e,function(e){return e})}function Ae(e,t){for(var n,r=arguments,o=[],a=[],c=2,s=r.length;c<s;c++)o.push(r[c]);if(we.isArray(t)){for(s=t.length-1,c=0;c<s;c++)a.push(t[c]);t=t[s]}return Ee(e,function(e){if(a.length&&(e=function(e,t){for(var n=0,r=t.length;e&&n<r;)e=e[t[n++]];return r&&e?e:0}(e,a)),(n=e[t]||t)&&n.apply)return n.apply(e,o)})}function Fe(a){return function(e,t,n,r){var o=n||{},n=o.children||"children";return a(null,e,t,r||this,[],n,o.mapChildren||n)}}var Be=Fe(function e(t,n,r,o,a,c,s){var i,u,l,p,f,d;if(we.isArray(n))for(l=0,p=n.length;l<p;l++){if(i=n[l],f=a.concat([""+l]),r.call(o,i,l,n,f,t))return{index:l,item:i,path:f,items:n,parent:t};if(c&&i&&(d=e(i,i[c],r,o,f.concat([c]),c)))return d}else for(u in n)if(we._hasOwnProp(n,u)){if(i=n[u],f=a.concat([u]),r.call(o,i,l,n,f,t))return{index:u,item:i,path:f,items:n};if(c&&i&&(d=e(i,i[c],r,o,f.concat([c]),c)))return d}});var Pe=Fe(function n(r,o,a,c,s,i,e){var u;we.each(o,function(e,t){u=s.concat([""+t]),a.call(c,e,t,o,u,r),e&&i&&n(e,e[i],a,c,u,i)})});var Le=Fe(function n(r,o,a,c,s,i,u){var l,p;return Ee(o,function(e,t){return l=s.concat([""+t]),(p=a.call(c,e,t,o,l,r))&&e&&i&&e[i]&&(p[u]=n(e,e[i],a,c,l,i,u)),p})});var Me={uniq:be,union:function(){for(var e=arguments,t=[],n=0,r=e.length;n<r;n++)t=t.concat(qe(e[n]));return be(t)},sortBy:xe,shuffle:ke,sample:function(e,t){return e=ke(e),arguments.length<=1?e[0]:(t<e.length&&(e.length=t||0),e)},some:je,every:Ne,filter:function(n,r,o){var a=[];if(n&&r){if(o=o||this,n.filter)return n.filter(r,o);we.each(n,function(e,t){r.call(o,e,t,n)&&a.push(e)})}return a},find:Se,findKey:Oe,map:Ee,sum:De,mean:function(e,t,n){return f.toNumber(De(e,t,n||this)/we.getSize(e))},reduce:function(e,t,n){if(e){var r,o=0,a=this,c=n,s=2<arguments.length,i=we.keys(e);if(e.length&&e.reduce)return n=function(){return t.apply(a,arguments)},s?e.reduce(n,c):e.reduce(n);for(s&&(o=1,c=e[i[0]]),r=i.length;o<r;o++)c=t.call(a,c,e[i[o]],o,e);return c}},copyWithin:function(e,t,n,r){if(we.isArray(e)&&e.copyWithin)return e.copyWithin(t,n,r);var o,a,c=t>>0,n=n>>0,s=e.length,r=3<arguments.length?r>>0:s;if(c<s&&(c=0<=c?c:s+c,0<=c&&(n=0<=n?n:s+n)<(r=0<=r?r:s+r)))for(o=0,a=e.slice(n,r);c<s&&!(a.length<=o);c++)e[c]=a[o++];return e},chunk:function(e,t){var n,r=[],o=t>>0||1;if(we.isArray(e))if(0<=o&&e.length>o)for(n=0;n<e.length;)r.push(e.slice(n,n+o)),n+=o;else r=e.length?[e]:e;return r},zip:function(){return Ce(arguments)},unzip:Ce,zipObject:function(e,n){var r={};return n=n||[],we.each(we.values(e),function(e,t){r[e]=n[t]}),r},toArray:qe,includeArrays:function(e,t){var n,r=0,o=we.includes;if(we.isArray(e)&&we.isArray(t)){for(n=t.length;r<n;r++)if(!o(e,t[r]))return!1;return!0}return o(e,t)},pluck:function(e,t){return Ee(e,t)},invoke:Ae,invokeMap:Ae,toArrayTree:function(e,t){var n,r,o,a,c,s=we.assign({},y.treeOptions,t),i=s.strict,u=s.key,l=s.parentKey,p=s.children,f=s.sortKey,t=s.reverse,d=s.data,m=[],g={};return f&&(e=xe(we.clone(e),f),t&&(e=e.reverse())),n=Ee(e,function(e){return e[u]}),we.each(e,function(e){r=e[u],d?(o={})[d]=e:o=e,a=e[l],g[r]=g[r]||[],g[a]=g[a]||[],g[a].push(o),o[u]=r,o[l]=a,o[p]=g[r],i&&(!i||a)||we.includes(n,a)||m.push(o)}),i&&(e=e,c=p,we.each(e,function(e){e.children&&!e.children.length&&we.remove(e,c)})),m},toTreeArray:function(e,t){return function t(n,e,r){var o,a=r.children,c=r.data;return we.each(e,function(e){o=e[a],c&&(e=e[c]),n.push(e),o&&t(n,o,r)}),n}([],e,we.assign({},y.treeOptions,t))},findTree:Be,eachTree:Pe,mapTree:Le,filterTree:function(e,a,t,c){var s=[];return e&&a&&(c=c||this,Pe(e,function(e,t,n,r,o){a.call(c,e,t,n,r,o)&&s.push(e)},t)),s}};function Te(e){try{return e.setItem("__xe_t",1),e.removeItem("__xe_t"),!0}catch(e){return!1}}function Ge(e){return-1<navigator.userAgent.indexOf(e)}var Ue=window.document;var e={browse:function(){var t,e,n,r,o="undefined",a={isNode:!1,isMobile:!1,isPC:!1,isDoc:("undefined"==typeof document?"undefined":c(document))!==o};return("undefined"==typeof window?"undefined":c(window))===o&&("undefined"==typeof process?"undefined":c(process))!==o?a.isNode=!0:(n=Ge("Edge"),e=Ge("Chrome"),r=/(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent),a.isDoc&&(o=document,t=o.body||o.documentElement,we.each(["webkit","khtml","moz","ms","o"],function(e){a["-"+e]=!!t[e+"MatchesSelector"]})),we.assign(a,{edge:n,msie:!n&&a["-ms"],safari:!e&&!n&&Ge("Safari"),isMobile:r,isPC:!r,isLocalStorage:Te(window.localStorage),isSessionStorage:Te(window.sessionStorage)})),a},copyContent:function(e){var t,n=((t=Ue.getElementById("$BESCopy"))||((t=Ue.createElement("input")).id="$BESCopy",t.style.width="48px",t.style.height="12px",t.style.position="fixed",t.style["z-index"]="0",t.style.left="-500px",t.style.top="-500px",Ue.body.appendChild(t)),t),r=null==e?"":""+e;try{return n.value=r,n.focus(),n.setSelectionRange(0,r.length),Ue.execCommand("copy",!0)}catch(e){}return!1}},ze=864e5,Re=7*ze,Ye="first",We="last",$e=Date.now||function(){return He(new Date)},Je=[{rules:[["yyyy",4],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]},{rules:[["ZZ",5],["Z",6]]}];function He(e){return e.getTime()}function Ze(e){return Date.UTC(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}function Ke(e){return e.getFullYear()}function Ve(e){return e.getMonth()}function Qe(e){return He((e=e,new Date(Ke(e),Ve(e),e.getDate())))}function Xe(t,n){var r,o,a,c,s,e,i,u,l=[];return t&&((u=we.isDate(t))||/^[0-9]{11,13}$/.test(t)?e=new Date((u?He:Number)(t)):we.isString(t)&&(n=n||y.formatDate,we.each(Je,function(e){for(a=0,c=e.rules,s=c.length;a<s;a++){if(r=c[a],-1<(o=n.indexOf(r[0]))){i=t.substring(o,o+r[1])||0,e.offset&&(i=parseFloat(i)+e.offset),l.push(i);break}a===s-1&&l.push(0)}}),(u=l[7])?"z"===u[0]||"Z"===u[0]?e=new Date(Ze(l)):(i=u.match(/([-+]{1})(\d{2}):?(\d{2})/))&&(e=new Date(Ze(l)-("-"===i[1]?-1:1)*parseInt(i[2])*36e5+6e4*parseInt(i[3]))):e=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]))),!e||isNaN(He(e))?"Invalid Date":e}function et(e,t,n,r){t=t[n];return t?we.isFunction(t)?t(r,n,e):t[r]:r}function tt(e,t,n){for(var r=(e=""+e).length;r<t;)e=n+e,r++;return e}function nt(t,e,n){if(t){if(t=Xe(t),we.isDate(t)){for(var r,o=e||y.formatString,e=t.getHours(),a=e<12?"am":"pm",c=t.getTimezoneOffset()/60*-1,s=we.assign({},y.formatStringMatchs,n?n.formats:null),i=[[/y{2,4}/g,"",function(e){return(""+Ke(t)).substr(4-e.length)}],[/M{1,2}/g,Ve(t)+1],[/d{1,2}/g,t.getDate()],[/H{1,2}/g,e],[/h{1,2}/g,e<=12?e:e-12],[/m{1,2}/g,t.getMinutes()],[/s{1,2}/g,t.getSeconds()],[/S{1,3}/g,t.getMilliseconds()],[/a/g,"",function(e){return et(t,s,e,a)}],[/A/g,"",function(e){return et(t,s,e,a.toLocaleUpperCase())}],[/e/g,"",function(e){return et(t,s,e,t.getDay()-1)}],[/E/g,"",function(e){return et(t,s,e,t.getDay())}],[/q/g,"",function(e){return et(t,s,e,Math.floor((Ve(t)+3)/3))}],[/Z{1,2}/g,"",function(e){return et(t,s,e,(0<=c?"+":"-")+tt(c,2,"0")+(1===e.length?":":"")+"00")}],[/W{1,2}/g,"",function(e){return tt(et(t,s,e,st(t)),e.length,"0")}],[/D{1,3}/g,"",function(e){return tt(et(t,s,e,ct(t)),e.length,"0")}]],u=0,l=i.length;u<l;u++)r=i[u],o=o.replace(r[0],r[2]||function(e){return tt(r[1],e.length,"0")});return o}return t}return""}function rt(e,t,n){if(e=Xe(e),we.isDate(e)&&(t&&(t=t&&!isNaN(t)?t:0,e.setFullYear(Ke(e)+t)),n||!isNaN(n))){if(n===Ye)return new Date(Ke(e),0,1);if(n===We)return e.setMonth(11),ot(e,0,We);e.setMonth(n)}return e}function ot(e,t,n){t=t&&!isNaN(t)?t:0;if(e=Xe(e),we.isDate(e)){if(n||!isNaN(n)){if(n===Ye)return new Date(Ke(e),Ve(e)+t,1);if(n===We)return new Date(He(ot(e,t+1,Ye))-1);e.setDate(n)}t&&e.setMonth(Ve(e)+t)}return e}function at(e,t,n){var r;return e=Xe(e),we.isDate(e)?(r=Number(/^[0-7]$/.test(n)?n:e.getDay()),n=e.getDay(),n=He(e)+((0===r?7:r)-(0===n?7:n))*ze,t&&!isNaN(t)&&(n+=t*Re),new Date(n)):e}function ct(e){return e=Xe(e),we.isDate(e)?Math.floor((Qe(e)-Qe(rt(e,0,Ye)))/ze)+1:e}function st(e){if(e=Xe(e),we.isDate(e)){e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return Math.round(((e.getTime()-t.getTime())/ze+(t.getDay()+6)%7-3)/7)+1}return e}var it={now:$e,timestamp:function(e,t){if(arguments.length){t=Xe(e,t);return we.isDate(t)?He(t):t}return $e()},isDateSame:function(e,t,n){return!(!e||!t)&&nt(e,n)===nt(t,n)},toStringDate:Xe,toDateString:nt,getWhatYear:rt,getWhatMonth:ot,getWhatWeek:at,getWhatDay:function e(t,n,r){if(t=Xe(t),we.isDate(t)&&!isNaN(n)){if(t.setDate(t.getDate()+Number(n)),r===Ye)return new Date(Ke(t),Ve(t),t.getDate());if(r===We)return new Date(He(e(t,1,Ye))-1)}return t},getYearDay:ct,getYearWeek:st,getMonthWeek:function e(t){var n,r=Xe(t);return we.isDate(r)?((t=at(n=ot(r,0,Ye),0,1))<n&&(t=at(n,1,1)),t<=r?Math.floor((Qe(r)-Qe(t))/Re)+1:e(at(r,0,1))):r},getDayOfYear:function(e,t){return e=Xe(e),we.isDate(e)?we.isLeapYear(rt(e,t))?366:365:e},getDayOfMonth:function(e,t){return e=Xe(e),we.isDate(e)?Math.floor((He(ot(e,t,We))-He(ot(e,t,Ye)))/ze)+1:e},getDateDiff:function(e,t,n){var r,o,a,c,s,i,u,l={done:!1,time:0};if(e=Xe(e),t=t?Xe(t):new Date,we.isDate(e)&&we.isDate(t)&&(r=He(e))<(o=He(t)))for(c=l.time=o-r,s=n&&0<n.length?n:y.dateDiffRules,l.done=!0,u=0,i=s.length;u<i;u++)c>=(a=s[u])[1]?u===i-1?l[a[0]]=c||0:(l[a[0]]=Math.floor(c/a[1]),c-=l[a[0]]*a[1]):l[a[0]]=0;return l}},ut="undefined"!=typeof document;function lt(e,t){var n=parseFloat(t),r=new Date,o=r.getTime();switch(e){case"y":return it.getWhatYear(r,n).getTime();case"M":return it.getWhatMonth(r,n).getTime();case"d":return it.getWhatDay(r,n).getTime();case"h":case"H":return o+60*n*60*1e3;case"m":return o+60*n*1e3;case"s":return o+1e3*n}return o}function pt(e){return(we.isDate(e)?e:new Date(e)).toUTCString()}function ft(e,t,n){if(ut){var r,o,a,c,s,i=[],u=arguments,l=decodeURIComponent,p=encodeURIComponent,f=document,d=we.each,m=we.assign,g=we.isObject;return this&&this.$context&&(this.$context=null),we.isArray(e)?i=e:1<u.length?i=[m({name:e,value:t},n)]:g(e)&&(i=[e]),0<i.length?(d(i,function(e){r=m({},y.cookies,e),a=[],r.name&&(o=r.expires,a.push(p(r.name)+"="+p(g(r.value)?JSON.stringify(r.value):r.value)),o&&(o=isNaN(o)?o.replace(/^([0-9]+)(y|M|d|H|h|m|s)$/,function(e,t,n){return pt(lt(n,t))}):/^[0-9]{11,13}$/.test(o)||we.isDate(o)?pt(o):pt(lt("d",o)),r.expires=o),d(["expires","path","domain","secure"],function(e){void 0!==r[e]&&a.push(r[e]&&"secure"===e?e:e+"="+r[e])})),f.cookie=a.join("; ")}),!0):(c={},(i=f.cookie)&&d(i.split("; "),function(e){s=e.indexOf("="),c[l(e.substring(0,s))]=l(e.substring(s+1)||"")}),1===u.length?c[e]:c)}return!1}function dt(e,t,n){return ft(e,t,n),ft}function mt(e,t){ft(e,0,we.assign({expires:-1},y.cookies,t))}function gt(){return we.keys(ft())}we.assign(ft,{_c:!1,isKey:function(e){return we.includes(gt(),e)},set:dt,setItem:dt,get:ft,getItem:ft,remove:mt,removeItem:mt,keys:gt,getJSON:ft});var n={cookie:ft},yt="undefined"==typeof location?0:location,ht=decodeURIComponent,vt=encodeURIComponent;function wt(e){return bt(e.split("?")[1]||"")}function bt(e){var t,n={};return e&&we.isString(e)&&we.each(e.split("&"),function(e){t=e.split("="),n[ht(t[0])]=ht(t[1]||"")}),n}function _t(){return yt?yt.origin||yt.protocol+"//"+yt.host:""}function xt(e){var r,o,t=""+e;return 0===t.indexOf("//")?t=(yt?yt.protocol:"")+t:0===t.indexOf("/")&&(t=_t()+t),e=t.replace(/#.*/,"").match(/(\?.*)/),(o={href:t,hash:"",host:"",hostname:"",protocol:"",port:"",search:e&&e[1]&&1<e[1].length?e[1]:""}).path=t.replace(/^([a-z0-9.+-]*:)\/\//,function(e,t){return o.protocol=t,""}).replace(/^([a-z0-9.+-]*)(:\d+)?\/?/,function(e,t,n){return r=n||"",o.port=r.replace(":",""),o.hostname=t,o.host=t+r,"/"}).replace(/(#.*)/,function(e,t){return o.hash=1<t.length?t:"",""}),t=o.hash.match(/#((.*)\?|(.*))/),o.pathname=o.path.replace(/(\?|#.*).*/,""),o.origin=o.protocol+"//"+o.host,o.hashKey=t&&(t[2]||t[1])||"",o.hashQuery=wt(o.hash),o.searchQuery=wt(o.search),o}D={parseUrl:xt,getBaseURL:function(){if(yt){var e=yt.pathname,t=we.lastIndexOf(e,"/")+1;return _t()+(t===e.length?e:e.substring(0,t))}return""},locat:function(){return yt?xt(yt.href):{}},serialize:function(e){var n,r=[];return we.each(e,function(e,t){void 0!==e&&(n=we.isArray(e),we.isPlainObject(e)||n?r=r.concat(function n(e,r,o){var a,c=[];return we.each(e,function(e,t){a=we.isArray(e),we.isPlainObject(e)||a?c=c.concat(n(e,r+"["+t+"]",a)):c.push(vt(r+"["+(o?"":t)+"]")+"="+vt(null===e?"":e))}),c}(e,t,n)):r.push(vt(t)+"="+vt(null===e?"":e)))}),r.join("&").replace(/%20/g,"+")},unserialize:bt};function kt(n){return function(e,t){return n(f.sortBy(we.clone(e),t,this))}}$=kt(function(e){return e[0]}),Z=kt(function(e){return e.reverse()[0]});function It(t){return function(e){if(e){e=t(e);return isNaN(e)?0:e}return 0}}function jt(e,t){return t?Nt((""+Nt(e)).replace(new RegExp("(\\d+.\\d{0,"+t+"}).*"),"$1")):Ot(e)}var Nt=It(parseFloat),Ot=It(parseInt),oe={random:function(e,t){return t<=e?e:(e>>=0)+Math.round(Math.random()*((t||9)-e))},min:$,max:Z,commafy:function(e,t){if(e=(""+e).replace(/,/g,"")){var n=we.assign({spaceNumber:3,separator:","},t),t=n.fixed,t=(t?Nt(e).toFixed(t):e).split(".");return t[0].replace(new RegExp("(?=(?!(\\b))(\\d{"+n.spaceNumber+"})+$)","g"),n.separator)+(t[1]?"."+t[1]:"")}return e},toFixedString:function(e,t){return e=(""+jt(e,t)).split("."),t?[e[0],".",f.padEnd(e[1]||"",t,"0")].join(""):e[0]},toFixedNumber:jt,toNumber:Nt,toInteger:Ot};function St(e){return e&&e.trimLeft?e.trimLeft():(""+e).replace(/^[\s\uFEFF\xA0]+/g,"")}function Et(e){return e&&e.trimRight?e.trimRight():(""+e).replace(/[\s\uFEFF\xA0]+$/g,"")}var Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ct={};function qt(t){var n=new RegExp("(?:"+we.keys(t).join("|")+")","g");return function(e){return(""+e).replace(n,function(e){return t[e]})}}function At(e,t){var n=""+e;if(e.repeat)return e.repeat(t);t=isNaN(t)?[]:new Array(parseInt(t));return t.join(n)+(0<t.length?n:"")}we.each(Dt,function(e,t){Ct[Dt[t]]=t});ce={trim:function(e){return e&&e.trim?e.trim():Et(St(e))},trimLeft:St,trimRight:Et,escape:qt(Dt),unescape:qt(Ct),camelCase:function(e){return(""+e).replace(/(-[a-zA-Z])/g,function(e,t){return t.substring(1).toLocaleUpperCase()})},kebabCase:function(e){return(""+e).replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},repeat:At,padStart:function(e,t,n,r){return t>>=0,n=n===r?" ":""+n,(e=""+e).padStart?e.padStart(t,n):t>e.length?((t-=e.length)>n.length&&(n+=At(n,t/n.length)),n.slice(0,t)+e):e},padEnd:function(e,t,n,r){return t>>=0,n=n===r?" ":""+n,(e=""+e).padEnd?e.padEnd(t,n):t>e.length?((t-=e.length)>n.length&&(n+=At(n,t/n.length)),e+n.slice(0,t)):e},startsWith:function(e,t,n){return e=""+e,0===(1===arguments.length?e:e.substring(n)).indexOf(t)},endsWith:function(e,t,n){return e=""+e,1===arguments.length?e.indexOf(t)===e.length-1:e.substring(0,n).indexOf(t)===n-1}};window.BECONFIG={},window.BECONFIG.topdomain=window.BECONFIG.topDomain=window.location.hostname.split(".").slice(-2).join("."),window.BECONFIG.domain="https://www."+window.BECONFIG.topdomain,window.BECONFIG.restAPI="https://api."+window.BECONFIG.topdomain,window.BECONFIG.domainURL=window.BECONFIG.domain+"/jeecg-boot",window.BECONFIG.domian=window.BECONFIG.domain,window.BECONFIG.domianURL=window.BECONFIG.domain+"/jeecg-boot",window.BECONFIG.uploadURL="https://upload."+window.BECONFIG.topdomain,window.BECONFIG.uploaxURL="https://oa-system-oss.oss-cn-beijing.aliyuncs.com",window.BECONFIG.downloadURL=window.BECONFIG.uploaxURL,window.BECONFIG.ossURL=window.BECONFIG.uploaxURL,window.BECONFIG.docDownURL=window.BECONFIG.uploadURL,window.BECONFIG.imgDomainURL=window.BECONFIG.uploadURL,window.BECONFIG.previewURL="https://fileview."+window.BECONFIG.topdomain+"/onlinePreview?officePreviewType=image&url=",window.BECONFIG.officeURL="https://view.officeapps.live.com/op/view.aspx?src=",window.BECONFIG.thumborURL="https://thumbor."+window.BECONFIG.topdomain+"/unsafe/fill/100/60/sm/0/plain/",window.BECONFIG.imageURL=window.BECONFIG.previewURL,window.BECONFIG.videoURL=window.BECONFIG.previewURL,window.BECONFIG.viewURL=window.BECONFIG.domainURL+"/generic/web/viewer.html?file=",window.BECONFIG.casPrefixUrl="https://sso."+window.BECONFIG.topdomain+"/cas",window.BECONFIG.validURL=window.BECONFIG.domain+"/sys/common/url?path=",window.BECONFIG.staticDomainURL=window.BECONFIG.uploadURL,window.BECONFIG.ipLocationURL="https://apis.map.qq.com/ws/location/v1/ip?key=3BFBZ-ZKD3X-LW54A-ZT76D-E7AHO-4RBD5",window.BECONFIG.weatherURL="https://weather.".concat(window.BECONFIG.topdomain),window.BECONFIG.company="领地集团",window.BECONFIG.office_expire_time=1e4;var Ft={PDF_PREVIEW_URL:"/jeecg-boot/generic/web/viewer.html?file=",OFFICE_PREVIEW_URL:"/onlinePreview?officePreviewType=image&url=",OFFICE_PREVIEW_TYPE:["doc","docx","xlsx","xls","ppt","pptx"],WORKFLOW_STATUS:{1:"待提交",2:"处理中",3:"审核中",4:"已完成",5:"已知会"},WORKSTEP_STATUS:{1:"-1",2:"0",3:"1",4:"2",5:"3"},WORKSTEP_TYPE:{1:"none",2:"primary",3:"primary",4:"success",5:"success"},LEAVE_TYPE:{affairs_leave:"事假",sick_leave:"病假",marital_leave:"婚假",funeral_leave:"丧假",maternity_leave:"产假",paternity_leave:"陪产假",annual_leave:"年假",wr_injury_leave:"工伤假",other_leave:"其他"},REQUEST_API_CONFIG:{domain:window.BECONFIG.domain,restapi:window.BECONFIG.restAPI,token:"".concat(window.BECONFIG.domain,"/jeecg-boot/sys/common/token"),user:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/user"),role:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/role"),service:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/service"),permission:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/permission"),permissionNoPager:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/permission/no-pager")},STORAGE_KEY:"system_oa_app",TOKEN_KEY:"Access-Token"},Bt=t(function(e){var t=function(c){var i,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,a,c,s,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),r=new j(r||[]);return t._invoke=(o=e,a=n,c=r,s=p,function(e,t){if(s===d)throw new Error("Generator is already running");if(s===m){if("throw"===e)throw t;return O()}for(c.method=e,c.arg=t;;){var n=c.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(r===i){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=i,e(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g;{if(!r.done)return r;n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=i)}n.delegate=null;return g}(n,c);if(r){if(r===g)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(s===p)throw s=m,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s=d;r=l(o,a,c);if("normal"===r.type){if(s=c.done?m:f,r.arg!==g)return{value:r.arg,done:c.done}}else"throw"===r.type&&(s=m,c.method="throw",c.arg=r.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}c.wrap=s;var p="suspendedStart",f="suspendedYield",d="executing",m="completed",g={};function y(){}function h(){}function v(){}var w={};w[r]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(N([])));t&&t!==e&&u.call(t,r)&&(w=t);var b=v.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function x(c,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){e=l(c[e],c,n);if("throw"!==e.type){var a=e.arg,n=a.value;return n&&"object"==typeof n&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,o)})}o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return e.next=e}}return{next:O}}function O(){return{value:i,done:!0}}return((h.prototype=b.constructor=v).constructor=h).displayName=a(v,o,"GeneratorFunction"),c.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,a(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},c.awrap=function(e){return{__await:e}},_(x.prototype),x.prototype[n]=function(){return this},c.AsyncIterator=x,c.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new x(s(e,t,n,r),o);return c.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(b),a(b,o,"Generator"),b[r]=function(){return this},b.toString=function(){return"[object Generator]"},c.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},c.values=N,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return a.type="throw",a.arg=n,r.next=e,t&&(r.method="next",r.arg=i),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],a=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var c=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,I(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),g}},c}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}});function Pt(e,t,n,r,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,o)}var Lt=function(s){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=s.apply(e,c);function o(e){Pt(r,t,n,o,a,"next",e)}function a(e){Pt(r,t,n,o,a,"throw",e)}o(void 0)})}};function Mt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Lt(Bt.mark(function e(t){var n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.BECONFIG&&superagent)return n="".concat(window.BECONFIG.validURL).concat(t),e.prev=2,e.next=5,superagent.get(n);e.next=13;break;case 5:return n=e.sent,console.log(" url :"+t+" result :"+JSON.stringify(n)),e.abrupt("return",n.body.success);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function Gt(){return(Gt=Lt(Bt.mark(function e(t){var n,r,o;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.BECONFIG)return n=["doc","docx","xlsx","xls","ppt","pptx"],e.next=4,Mt(t.file);e.next=8;break;case 4:r=e.sent,o=(o=t.name.split("."))[o.length-1],!r&&n.includes(o)?window.open(window.BECONFIG.previewURL+t.msrc):window.open(t.src);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ut(){return(Ut=Lt(Bt.mark(function e(t){return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{vant.Toast.success("开始下载中，请稍等..."),window.saveAs(t.msrc,t.name)}catch(e){window.open(t.msrc)}case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}se={queryUrlValid:Mt,handlePreview:function(e){return Gt.apply(this,arguments)},handleDownLoad:function(e){return Ut.apply(this,arguments)}};var zt=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r};var Rt=function(e){if(Array.isArray(e))return zt(e)};var Yt=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var Wt=function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}};var $t=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Jt=function(e){return Rt(e)||Yt(e)||Wt(e)||$t()};function Ht(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{return void 0===e||null==e||""==e||"{}"==JSON.stringify(e)?t:e}catch(e){console.log(e)}}function Vt(e){try{return void 0===e||null==e||""==e||"{}"==JSON.stringify(e)}catch(e){console.log(e)}}function Qt(){return(Qt=Lt(Bt.mark(function e(){var t,n=arguments;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<n.length&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(){function t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}if(1===arguments.length){var e=Array.prototype.slice.call(arguments)[0],n=Jt(Array(e).keys()).map(function(e){return t(0<e?0:1,9)});return parseInt(n.join(""))}if(2<=arguments.length){e=Array.prototype.slice.call(arguments),n=e[0],e=e[1];return t(n,e)}return Number.NaN}function en(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",t=e.split(t);return console.log("".concat(t.toString())),t[1].includes(">")?(t[1]=t[1].replace("项目组>",""),n=t[1].split(">")[0],r=t[1].split(">")[1]):n=t[1],{company:e,zone:n,project:r}}function tn(e,t){e=e||1,t=t||"0123456789qwertyuioplkjhgfdsazxcvbnm";for(var n="",r=0;r<e;r++)n+=t[Xt(0,t.length-1)];return n}function nn(){return(nn=Lt(Bt.mark(function e(t){var n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.BECONFIG.validURL).concat(t),e.prev=1,e.next=4,superagent.get(n);case 4:return n=e.sent,console.log(" url :"+t+" result :"+JSON.stringify(n)),e.abrupt("return",n.body.success);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function rn(e){return window.decodeURIComponent(e)}je={tools:{filterObj:function(e){if("object"==c(e)){for(var t in e)!e.hasOwnProperty(t)||null!=e[t]&&null!=e[t]&&""!==e[t]||delete e[t];return e}},deNull:Kt,isNull:Vt,isBlank:function(e){try{return Vt(e)}catch(e){console.log(e)}},isEmpty:function(e){try{return Vt(e)}catch(e){console.log(e)}},sleep:function(){return Qt.apply(this,arguments)},divisionPercentage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0..toFixed(2),e="string"==typeof e?parseFloat(e):e,t="string"==typeof t?parseFloat(t):t;try{n=(Vt(t)?0:parseFloat(e/t*100)).toFixed(2)}catch(e){console.log(e)}return n},cloneObject:function(e){return JSON.parse(JSON.stringify(e))},clone:function(e){return JSON.parse(JSON.stringify(e))},randomNumber:Xt,isWechat:function(){var e=navigator.userAgent.toLowerCase(),t=window.localStorage.getItem("system_navigator_useragent")||"";return"micromessenger"==e.match(/MicroMessenger/i)||t.match(/MicroMessenger/i),!0},isWework:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},isPCWeb:function(){var e=navigator.userAgent.toLowerCase(),t=window.localStorage.getItem("system_navigator_useragent")||"";return"micromessenger"!=e.match(/MicroMessenger/i)&&"micromessenger"!=t.match(/MicroMessenger/i)},queryZoneProject:en,queryZoneProjectAll:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";try{var r="",o=n?n.slice(0,n.lastIndexOf(">")):"",n=n?n.slice(n.lastIndexOf(">")+1):"",a=Ht(e);try{for(a.s();!(s=a.n()).done;){var c=s.value;if(t.includes(">".concat(c,">"))){var s=en(t,">".concat(c,">"));t=c,r=s.zone,o=s.project||o;break}}}catch(e){a.e(e)}finally{a.f()}return{company:t,zone:r,project:o,department:n}}catch(e){return{company:t,zone:"",project:"",department:n}}},randomString:tn,randomUUID:function(){return tn(32,"0123456789abcdef")},underLine2CamelCase:function(e){return e.replace(/_([a-z])/g,function(e,t){return t.toUpperCase()})},isEmail:function(e){return/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(e)},isMobile:function(e){return/^1[0-9]{10}$/.test(e)},isPhone:function(e){return/^([0-9]{3,4}-)?[0-9]{7,8}$/.test(e)},isURL:function(e){return/^http[s]?:\/\/.*/.test(e)},delHtmlTag:function(e){try{return Vt(e)?"":Kt(e).replace(/<[^>]+>/g,"").replace(/&nbsp;/g,"")}catch(e){console.log(e)}},abbreviation:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:75;try{return Kt(e).length<t?Kt(e).trim():Kt(e).trim().substring(0,t)+"..."}catch(e){console.log(e)}},queryUrlValid:function(e){return nn.apply(this,arguments)},getUrlParam:function(e){try{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(t);return null!=t?rn(t[2]):null}catch(e){console.log(e)}},queryUrlParam:function(e){return e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),null!=(e=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(e))?rn(e[2]):null},encodeURI:function(e){return window.encodeURIComponent(e)},decodeURI:rn,queryUrlString:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"history";try{if("history"==t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");return null!=(r=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(n))?("system_type"==e&&localStorage.setItem("system_type",rn(r[2])),rn(r[2])):"system_type"==e?localStorage.getItem("system_type")||"v2":null}var r,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");if(null!=(r=window.location.search.substr(1).match(n)))return unescape(r[2])}catch(e){console.error(e)}return""},queryUniqueID:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,t=(new Date).getTime(),n=formatDate(t,"yyyyMMddhhmmssS");return console.log("动态编号 :"+n),t=Math.floor(1e20*Math.random())+""+Math.floor(1e20*Math.random())+"",console.log("随机编号 :"+t),(n+t).replace(/\./g,"").substring(0,e)},mobileHide:function(e){return(e=e.slice(0,11)).replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},mobileEnsconce:function(e){return(e=e.slice(0,11)).replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},contain:function(e,t){e=",".concat(e,",");var n="";try{var r=Ht(t.split(","));try{for(r.s();!(o=r.n()).done;)var o=o.value,n=e.includes(",".concat(o,","))?"".concat(n,",").concat(o):n}catch(e){r.e(e)}finally{r.f()}}catch(e){console.log(e)}return n.startsWith(",")&&(n=n.substring(1)),n.endsWith(",")&&(n=n.substring(0,n.length-1)),n}}};try{localforage=localforage||{setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}}catch(e){console.log(e)}var Ne={storage:{setStore:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(a.window&&e){"string"!=typeof t&&(t=JSON.stringify(t));var r=a.window.localStorage;try{r.setItem(e,t),localforage.setItem(e,t)}catch(e){console.log(e)}try{var o=parseInt((new Date).getTime()/1e3);n&&!isNaN(parseInt(n))&&(r.setItem("".concat(e,"_expire"),o+n),localforage.setItem("".concat(e,"_expire"),o+n))}catch(e){console.log(e)}}},getStore:function(e){if(a.window&&e){var t=window.localStorage.getItem(e),e=window.localStorage.getItem("".concat(e,"_expire"));if(e)if(e<parseInt((new Date).getTime()/1e3))return;try{"string"==typeof t&&(t=JSON.parse(t))}catch(e){console.log(e)}return t}},clearStore:function(e){a.window&&e&&(window.localStorage.removeItem(e),window.localStorage.removeItem("".concat(e,"_expire")),localforage.removeItem(e),localforage.removeItem("".concat(e,"_expire")))},clearAll:function(e){a.window&&e&&("all"==e?(localforage.clear(),window.localStorage.clear()):("storage"!=e&&"db"==e?localforage:window.localStorage).clear())},setStoreAll:function(r,o){var a=arguments;return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=2<a.length&&void 0!==a[2]?a[2]:null,"string"!=typeof o&&(o=JSON.stringify(o));try{localforage.setItem(r,o)}catch(e){console.log(e)}try{localStorage.setItem(r,o)}catch(e){console.log(e)}if(t&&!isNaN(parseInt(t))){n=parseInt((new Date).getTime()/1e3);try{localforage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}try{localStorage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}}case 5:case"end":return e.stop()}},e)}))()},getStoreAll:function(o){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localforage.getItem(o);case 2:return t=e.sent,e.next=5,localforage.getItem("".concat(o,"_expire"));case 5:if(n=e.sent,null!=t&&void 0!==t||(t=localStorage.getItem(o)),null!=n&&void 0!==n||(n=localStorage.getItem("".concat(o,"_expire"))),!n){e.next=12;break}if(r=parseInt((new Date).getTime()/1e3),n<r)return e.abrupt("return");e.next=12;break;case 12:try{"string"==typeof t&&(t=JSON.parse(t))}catch(e){console.log(e)}return e.abrupt("return",t);case 14:case"end":return e.stop()}},e)}))()},setStoreDB:function(r,o){var a=arguments;return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=2<a.length&&void 0!==a[2]?a[2]:null,"string"!=typeof o&&(o=JSON.stringify(o));try{localforage.setItem(r,o)}catch(e){console.log(e)}if(t&&!isNaN(parseInt(t))){n=parseInt((new Date).getTime()/1e3);try{localforage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}}case 4:case"end":return e.stop()}},e)}))()},getStoreDB:function(o){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localforage.getItem(o);case 2:return t=e.sent,e.next=5,localforage.getItem("".concat(o,"_expire"));case 5:if(!(n=e.sent)){e.next=10;break}if(r=parseInt((new Date).getTime()/1e3),n<r)return e.abrupt("return");e.next=10;break;case 10:try{"string"==typeof t&&(t=JSON.parse(t))}catch(e){console.log(e)}return e.abrupt("return",t);case 12:case"end":return e.stop()}},e)}))()},clearDB:function(e){"all"==e?localforage.clear():(localforage.removeItem(e),localforage.removeItem("".concat(e,"_expire")))},getToken:function(){return getStore(Ft.TOKEN_KEY)},setToken:function(e){return setStore(Ft.TOKEN_KEY,e,2592e3)},removeToken:function(){return clearStore(Ft.TOKEN_KEY)},clearLoginInfo:function(){return Lt(Bt.mark(function e(){return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{clearStore("system_linfo"),clearStore("system_userinfo"),clearStore("system_token"),clearStore("system_department"),clearStore("system_login_time"),clearDB("system_linfo"),clearDB("system_userinfo"),clearDB("system_token"),clearDB("system_department"),clearDB("system_login_time")}catch(e){console.log(e)}case 1:case"end":return e.stop()}},e)}))()}}},on=Ne.storage,an=je.tools,cn=Ft.constant,Se={query:{queryUserInfoByView:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(window.BECONFIG.restAPI,"/api/v_user?_where=(username,eq,").concat(r,")"),t=null,e.prev=2,void 0===(t=on.getStore("system_v_user_info@username$".concat(r)))||null==t||""==t)return e.next=7,superagent.get(n).set("accept","json");e.next=10;break;case 7:n=e.sent,t=n.body,on.setStore("system_v_user_info@username$".concat(r),t,86400);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))()},queryTableFieldInfoJSON:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,queryTableDataByField("v_table_info","id",n);case 3:if(t=e.sent,""!=an.deNull(t)&&0<t.length)try{t=an.deNull(t[0].value)}catch(e){console.log("tabale info :"+t)}if(""!=an.deNull(t))try{t=JSON.parse(t)}catch(e){console.log("tabale info :"+t)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("query table field info json error :"+e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},queryTableFieldOrderJSON:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,queryTableDataByField("v_table_info","id",n);case 3:if(t=e.sent,""!=an.deNull(t)&&0<t.length)try{t=an.deNull(t[0].num)}catch(e){console.log("tabale info :"+t)}if(""!=an.deNull(t))try{t=JSON.parse(t)}catch(e){console.log("tabale info :"+t)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("query table field info json error :"+e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},queryTableDataByField:function(n,r,o){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(o,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableData:function(r,o){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(r,"/").concat(o),e.prev=2,void 0!==(n=on.getStore("sys_user_cache@".concat(r,"&id").concat(o)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&on.setStore("sys_user_cache@".concat(r,"&id").concat(o),n.body[0],2),e.abrupt("return",n.body[0]);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryTableDataByPid:function(r,o){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(r,"?_where=(pid,eq,").concat(o,")&_sort=create_time"),e.prev=2,void 0!==(n=on.getStore("sys_user_cache@".concat(r,"&pid").concat(o)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&on.setStore("sys_user_cache@".concat(r,"&pid").concat(o),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryRoleGroupList:function(o){var a=arguments;return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=1<a.length&&void 0!==a[1]?a[1]:"",t="bs_admin_group",n="".concat(window.BECONFIG.restAPI,"/api/").concat(t,"?_where=(groupname,eq,").concat(o,")~and(userlist,like,~").concat(r,"~)&_sort=create_time"),e.prev=3,void 0!==(r=on.getStore("sys_user_cache@".concat(t,"&groupname").concat(o)))&&null!=r&&""!=r)return e.abrupt("return",r);e.next=7;break;case 7:return e.next=9,superagent.get(n).set("accept","json");case 9:return null!=(r=e.sent).body&&0<r.body.length&&on.setStore("sys_user_cache@".concat(t,"&groupname").concat(o),r.body,2),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))()},queryUserInfoByMobile:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/v2/wework_mobile/").concat(r),e.prev=1,void 0!==(n=on.getStore("sys_user_cache_mobile_userinfo".concat(r)))&&null!=n&&""!=n)return console.log("mobile: ".concat(JSON.stringify(n))),e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&(console.log("mobile: ".concat(JSON.stringify(n.body))),on.setStore("sys_user_cache_mobile_userinfo".concat(r),n.body,604800)),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}))()},queryMessages:function(a,c){var s=arguments;return Lt(Bt.mark(function e(){var t,n,r,o;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<s.length&&void 0!==s[2]?s[2]:0,n="bs_message",r="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=((team,like,~").concat(a,",").concat(c,"~)~or(team,like,~").concat(c,",").concat(a,"~))&_sort=-id"),e.prev=3,void 0!==(o=on.getStore("sys_message_cache##v1@".concat(n,"&wxid").concat(a,"_wxid_").concat(c,"_maxid").concat(t)))&&null!=o&&""!=o)return e.abrupt("return",o);e.next=7;break;case 7:return e.next=9,superagent.get(r).set("accept","json");case 9:return null!=(o=e.sent).body&&0<o.body.length&&on.setStore("sys_message_cache##v1@".concat(n,"&wxid").concat(a,"_wxid_").concat(c,"_maxid").concat(t),o.body,1),e.abrupt("return",o.body);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))()},querySealManMail:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(sign_man,eq,").concat(r,")&_fields=deal_mail,create_by&_p=0&_size=1"),e.prev=1,void 0!==(n=on.getStore("sys_seal_man_mail_cache#v1@".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",0<n.length?n[0]:"");e.next=5;break;case 5:return e.next=7,superagent.get(t).set("accept","json");case 7:return null!=(n=e.sent).body&&0<n.body.length&&on.setStore("sys_seal_man_mail_cache#v1@".concat(r),n.body,1),e.abrupt("return",n.body.length?n.body[0]:"");case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}))()},queryTableDataByWhereSQL:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryMailBySealData:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_where=(create_by,eq,".concat(n,")~and(deal_mail,like,~@~)&_p=0&_size=1"),t="".concat(window.BECONFIG.restAPI,"/api/").concat("bs_seal_regist","?").concat(t),e.prev=3,e.next=6,superagent.get(t).set("accept","json");case 6:return t=e.sent,e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}))()},queryFrontBySealData:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_where=(create_by,eq,".concat(n,")~and(seal_type,eq,合同类)&_p=0&_size=1"),t="".concat(window.BECONFIG.restAPI,"/api/").concat("bs_seal_regist","?").concat(t),e.prev=3,e.next=6,superagent.get(t).set("accept","json");case 6:return t=e.sent,e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}))()},queryUserInfoByAccount:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(an.isNull(r))return e.abrupt("return",{});e.next=2;break;case 2:if("".concat(window.BECONFIG.restAPI,"/api/v2/queryemployee/").concat(r),void 0!==(t=on.getStore("sys_user_cache_account#queryemployee#@".concat(r)))&&null!=t&&""!=t)return e.abrupt("return",t);e.next=6;break;case 6:return e.prev=6,e.next=9,queryTableDataByField("bs_hrmresource","loginid",r);case 9:if(null!=(n=e.sent)&&0<n.length)return on.setStore("sys_user_cache_account#queryemployee#@".concat(r),n[0],2678400),e.abrupt("return",n[0]);e.next=15;break;case 15:if(an.isNull(n.text)){e.next=18;break}return on.setStore("sys_user_cache_account#queryemployee#@".concat(r),n.text,2678400),e.abrupt("return",JSON.parse(n.text));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[6,20]])}))()},queryWeworkUser:function(){return Lt(Bt.mark(function e(){var t,n,r,o,a;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t=null,e.prev=2,r=an.queryUrlString("code","search"),o=an.queryUrlString("system_type","history"),!r){e.next=27;break}if(void 0!==(a=on.getStore("sys_wework_user_code#wework_user_code#@".concat(r)))&&null!=a&&""!=a)return e.abrupt("return",a);e.next=9;break;case 9:return e.prev=9,e.next=12,superagent.get("https://api.yunwisdom.club:30443/api/".concat(o,"/wework_user_code/").concat(r));case 12:n=e.sent,t=n&&n.body&&n.body.userinfo&&0==n.body.userinfo.errcode?n.body.userinfo:null,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log(e.t0);case 19:on.setStore("system_linfo",JSON.stringify({username:n.body.userinfo.userid,password:"************"}),2592e3),on.setStore("system_userinfo",JSON.stringify(n.body.userinfo),2592e3),on.setStore("system_token",JSON.stringify(r),2592e3),on.setStore("system_department",JSON.stringify(n.body.userinfo.department),2592e3),on.setStore("system_login_time",dayjs().format("YYYY-MM-DD HH:mm:ss"),2592e3),on.setStore("sys_wework_user_code#wework_user_code#@".concat(r),JSON.stringify(t),2592e3),e.next=28;break;case 27:t=on.getStore("system_userinfo");case 28:return e.abrupt("return",t);case 31:e.prev=31,e.t1=e.catch(2),console.log(e.t1);case 34:case"end":return e.stop()}},e,null,[[2,31],[9,16]])}))()},queryProcessLogByUserName:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(business_code,eq,000000000)~and(employee,eq,").concat(r,")&_sort=-operate_time"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryProcessLogHistoryByUserName:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log_history?_where=(table_name,eq,").concat(n,")~and(business_code,eq,000000000)~and(employee,eq,").concat(r,")&_sort=-operate_time"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},deleteTableData:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/").concat(r),e.prev=2,e.next=5,superagent.delete(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryRewardDataByID:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(cn.REQUEST_API_CONFIG.restapi,"/api/v_reward_data?_where=(period,like,").concat(r,")&_sort=amount&_p=0&_size=1000"),void 0!==(n=on.getStore("sys_v_reward_data&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&on.setStore("sys_v_reward_data&id".concat(r),n.body,60),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()}}};function sn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return un(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ln=Ne.storage,pn=je.tools,Oe={manage:{queryCurFreeWorkflow:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.BECONFIG.restAPI,"/api/bs_free_process?_where=(main_key,eq,").concat(r,")&_sort=-create_time"),t=[],e.prev=2,e.next=5,superagent.get(n).set("accept","json");case 5:n=e.sent,console.log(n),void 0===n.body||null==n.body||""==n.body||0==n.body.length?t=null:1<=n.body.length&&(t=n.body[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryUserName:function(){return Lt(Bt.mark(function e(){var t,n,r,o;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,n=[],e.prev=2,void 0!==(r=ln.getStore("cache_all_user_name"))&&null!=r&&0!=r.length){e.next=21;break}case 5:if(t<1e4)return o="".concat(window.BECONFIG.restAPI,"/api/v_uname?_p=").concat(t++,"&_size=1000"),e.next=9,superagent.get(o).set("accept","json");e.next=18;break;case 9:if(o=e.sent,n=n.concat(o.body),o.body.length<50)return e.abrupt("break",18);e.next=15;break;case 15:return e.abrupt("continue",5);case 16:e.next=5;break;case 18:ln.setStore("cache_all_user_name",n,7200),e.next=22;break;case 21:n=r;case 22:return e.abrupt("return",n);case 25:e.prev=25,e.t0=e.catch(2),console.log(e.t0);case 28:case"end":return e.stop()}},e,null,[[2,25]])}))()},patchEnameCname:function(s){return Lt(Bt.mark(function e(){var t,n,r,o,a,c;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=pn.deNull(s).split(","),e.next=4,queryUserName();case 4:r=e.sent,o=sn(n);try{for(o.s();!(c=o.n()).done;)a=c.value,c=r.find(function(e){return a==e.username}),t=pn.isNull(c)?"".concat(t,",").concat(a):"".concat(t,",").concat(c.realname)}catch(e){o.e(e)}finally{o.f()}return t.startsWith(",")&&(t=t.substring(1)),t.endsWith(",")&&(t=t.substring(0,t.length-1)),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))()},handleUserInfo:function(t){return Lt(Bt.mark(function e(){return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&null==t)return e.abrupt("return",!1);e.next=4;break;case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}},e)}))()},queryProcessLogByID:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(id,eq,").concat(r,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},setTimeouts:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0,a=n;o<a.length;o++){var c=a[o];setTimeout(function(){e()},c)}},queryProcessNodeEmployee:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/bs_approve_node?_where=(name,eq,").concat(n,")"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t.body),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body[0].item_text),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryProcessNodeProcName:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/sys_dict_item?_where=(dict_id,eq,").concat(window.requestAPIConfig.PROCESS_NODE_DICT_ID,")~and(item_value,eq,").concat(n,")"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body[0].item_text),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryRandomStr:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,t="";try{t=pn.queryUniqueID(e)}catch(e){console.log("获取n位随机数异常："+e)}return t},postProcessLogInformed:function(o){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n=o instanceof Array&&1<o.length?"/bulk":"";try{o instanceof Array&&1==o.length&&(n="",o=o[0])}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.restAPI,"/api/pr_log_informed").concat(n)}catch(e){console.log(e)}return e.prev=4,e.next=7,superagent.post(t).send(o).set("accept","json");case 7:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[4,12]])}))()},postTableData:function(r,o){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.restAPI,"/api/").concat(r),t=o,Object.keys(t).map(function(e){t[e]=e.includes("_time")&&t[e]?dayjs(t[e]).format("YYYY-MM-DD HH:mm:ss"):t[e]}),void 0!==o&&null!=o&&o instanceof Array&&(n+="/bulk"),e.prev=5,e.next=8,superagent.post(n).send(o).set("accept","json");case 8:return n=e.sent,e.abrupt("return",n.body);case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[5,12]])}))()},queryUsernameByID:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,e.next=5,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=(loginid,eq,~").concat(n,"~)~and(status,ne,5)&_fields=id,lastname,loginid")).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body[0].lastname);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryUsernameByIDs:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=(loginid,in,").concat(n,")~and(status,ne,5)")).set("accept","json");case 3:return t=e.sent,e.abrupt("return",t.body);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()},queryUserByNameHRM:function(o){var a=arguments;return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<a.length&&void 0!==a[1]?a[1]:50,n=[],pn.isNull(o))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(o,"~)~or(loginid,like,~").concat(o,"~))~and(status,ne,5)~and(seclevel,lt,").concat(t,")")).set("accept","json");case 7:return r=e.sent,n=(n=Jt(r.body)).filter(function(e){return!pn.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByNameReward:function(o){var a=arguments;return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<a.length&&void 0!==a[1]?a[1]:101,n=[],pn.isNull(o))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(o,"~)~or(loginid,like,~").concat(o,"~))~and(seclevel,lt,").concat(t,")")).set("accept","json");case 7:return r=e.sent,n=(n=Jt(r.body)).filter(function(e){return!pn.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByLoginID:function(o){var a=arguments;return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<a.length&&void 0!==a[1]?a[1]:101,n=[],pn.isNull(o))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((loginid,in,").concat(o,"))~and(seclevel,lt,").concat(t,")&_fields=loginid")).set("accept","json");case 7:return r=e.sent,n=(n=Jt(r.body)).filter(function(e){return!pn.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByID:function(a){var c=arguments;return Lt(Bt.mark(function e(){var t,n,r,o;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<c.length&&void 0!==c[1]?c[1]:"融量",n=2<c.length&&void 0!==c[2]?c[2]:101,r=[],pn.isNull(a))return e.abrupt("return",[]);e.next=5;break;case 5:return e.prev=5,e.next=8,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v_hrmresource?_where=((loginid,in,").concat(a,"))~and(seclevel,lt,").concat(n,")~and(cname,eq,").concat(t,")&_sort=id")).set("accept","json");case 8:return o=e.sent,r=(r=Jt(o.body)).filter(function(e){return!pn.isNull(e.loginid)}),e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[5,14]])}))()},queryAddressByName:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],pn.isNull(r))return e.abrupt("return",[]);e.next=3;break;case 3:return e.prev=3,e.next=6,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_admin_group?_where=(groupname,eq,COMMON_RECEIVE_BORROW)~and(address,like,~").concat(r,"~)")).set("accept","json");case 6:return n=e.sent,t=Jt(n.body),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))()},queryUserByNameFindOne:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(pn.isNull(n)||pn.isNull(r))return e.abrupt("return",[]);e.next=2;break;case 2:return t=(n.includes("(")||n.includes("（")||!/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/.test(n)?"".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((loginid,like,~"):"".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(n,"~)~and(loginid,like,~")).concat(r,"~))~and(status,ne,5)"),e.prev=3,e.next=6,superagent.get(t).set("accept","json");case 6:if((t=e.sent).body=t.body.filter(function(e){return!pn.isNull(e.loginid)}),t&&t.body&&1<=t.body.length)return e.abrupt("return",!0);e.next=12;break;case 12:return e.abrupt("return",!1);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}))()},queryTableData:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableDataCount:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/count?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body[0].no_of_rows);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryContractInfoByPrefix:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(contract_id,like,").concat(n,"~)~and(seal_type,eq,合同类)~and(status,in,已用印,已领取,移交前台,已完成,财务归档,档案归档,已归档)&_p=0&_size=8&_sort=-contract_id"),e.next=4,superagent.get(t).set("accept","json");case 4:if((t=e.sent)&&t.body&&1<=t.body.length)return e.abrupt("return",t.body);e.next=9;break;case 9:return e.abrupt("return",[]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))()},queryContractInfoByPrefixAll:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(contract_id,like,").concat(n,"~)~and(seal_type,eq,合同类)~and(status,in,待用印,已退回,已废弃,已用印,已领取,移交前台,已完成,财务归档,档案归档,已归档)&_p=0&_size=3&_sort=-contract_id"),e.next=4,superagent.get(t).set("accept","json");case 4:if((t=e.sent)&&t.body&&1<=t.body.length)return e.abrupt("return",t.body);e.next=9;break;case 9:return e.abrupt("return",[]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))()},queryUserBySealData:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(deal_manager,like,~").concat(n,"~)~and(deal_mail,like,~@~)&_size=1&_p=0")).set("accept","json");case 3:return t=e.sent,e.abrupt("return",t.body[0]);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()},queryCurNodePageType:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pn.queryUrlString("type"),e.prev=1,"workflow"==t||"notify"==t)return e.next=5,queryProcessLogByID(pn.queryUrlString("table_name"),pn.queryUrlString("processLogID"));e.next=13;break;case 5:if(n=e.sent,""==pn.deNull(n))return e.next=9,queryProcessLogInfByID(pn.queryUrlString("table_name"),pn.queryUrlString("processLogID"));e.next=10;break;case 9:n=e.sent;case 10:r=""==pn.deNull(n)?"view":r,e.next=14;break;case 13:"workflowing"==t&&console.log("TODO 暂时不做");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("获取当前节点是否有知会或者审批节点信息异常:"+e.t0);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))()},queryProcessLogInfByID:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log_informed?_where=(table_name,eq,").concat(n,")~and(id,eq,").concat(r,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryProcessLog:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(business_data_id,eq,").concat(r,")&_sort=operate_time"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryBusinessInfo:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_rights?_where=(business,like,~").concat(n,"~)"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t.body),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body),e.abrupt("return",JSON.parse(JSON.stringify(t.body)));case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,11]])}))()},queryApprovalLength:function(r,o){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(r,")~and(business_data_id,eq,").concat(o,")"),t=!1,e.prev=3,e.next=6,superagent.get(n).set("accept","json");case 6:return n=e.sent,t=n.body.length,e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))()},transFreeWflowHis:function(o){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,manageAPI.queryHisFreeWorkflow(o);case 3:return n=e.sent,e.next=6,manageAPI.insertTableData("bs_free_process_h",n);case 6:return r=e.sent,e.next=9,manageAPI.deleteTableItem("bs_free_process",n);case 9:t=e.sent,console.log("result :"+t+" wcode :"+r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("transfer free workflow node into history "+e.t0);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}},e,null,[[0,13]])}))()},patchTableData:function(r,o,a){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(r,"/").concat(o),void 0===a||null==a||""==a)return e.abrupt("return",!1);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.patch(t).send(a).set("accept","json");case 7:return n=e.sent,e.abrupt("return",n.body);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}))()},postProcessLog:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/pr_log"),e.prev=1,e.next=4,superagent.post(t).send(n).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},postProcessLogHistory:function(o){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n=o instanceof Array&&1<o.length?"/bulk":"";try{o instanceof Array&&1==o.length&&(n="",o=o[0])}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.restAPI,"/api/pr_log_history").concat(n)}catch(e){console.log(e)}return e.prev=4,e.next=7,superagent.post(t).send(o).set("accept","json");case 7:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[4,12]])}))()},deleteProcessLog:function(o,a){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=o.toLowerCase(),n=t="",a instanceof Array||(a=[a]);try{a.map(function(e){n=n+","+e.id}),n=0==n.indexOf(",")?n.substring(1):n}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.restAPI,"/api/pr_log/bulk?_ids=").concat(n)}catch(e){console.log(e)}return e.prev=6,e.next=9,superagent.delete(t).set("accept","json");case 9:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))()},deleteProcessLogInf:function(o,a){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=o.toLowerCase(),n=t="",a instanceof Array||(a=[a]);try{a.map(function(e){t=t+","+e.id}),t=0==t.indexOf(",")?t.substring(1):t}catch(e){console.log(e)}try{n="".concat(window.BECONFIG.restAPI,"/api/pr_log_informed/bulk?_ids=").concat(t)}catch(e){console.log(e)}return e.prev=6,e.next=9,superagent.delete(n).set("accept","json");case 9:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))()},queryApprovalExist:function(r,o){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(r,")~and(business_data_id,eq,").concat(o,")"),t=!1,e.prev=3,e.next=6,superagent.get(n).set("accept","json");case 6:n=e.sent,t=0<n.body.length,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[3,10]])}))()},postProcessFreeNode:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/bs_free_process"),e.prev=1,e.next=4,superagent.post(t).send(n).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},queryTableDataByField:function(n,r,o){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(o,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},deleteTableData:function(n,r){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/").concat(r),e.prev=2,e.next=5,superagent.delete(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()}}};function fn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mn=je.tools,gn=Se.query,Be={task:{queryProcessLogDone:function(i,u){var l=arguments;return Lt(Bt.mark(function e(){var t,n,r,o,a,c,s;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,mn.isNull(i)||mn.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.restAPI,"/api/v_handled_events_unq?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),o={},e.prev=6,e.next=9,superagent.get(r).set("accept","json");case 9:a=e.sent,console.log(a),o=(o=a.body).filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),o=dayjs(e.create_time).format("YYYY-MM-DD hh:mm:ss");return e.createtime=o,e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=mn.deNull(e.username).split(","),e.content=mn.abbreviation(mn.delHtmlTag(e.content)),e.topic=mn.abbreviation(mn.delHtmlTag(e.topic)),e.username.contains(i)||e.username.contains(u)}),e.prev=13,a=fn(o),e.prev=15,a.s();case 17:if((s=a.n()).done){e.next=32;break}if(c=s.value,e.prev=19,mn.isNull(c.sponsor)&&!mn.isNull(c.proponents))return e.next=23,gn.queryUserInfoByAccount(c.proponents);e.next=25;break;case 23:s=e.sent,c.sponsor=s.realname||s.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(19),console.log(e.t0);case 30:e.next=17;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(15),a.e(e.t1);case 37:return e.prev=37,a.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(13),console.log(e.t2);case 46:return o=o.filter(function(t,e,n){return e===n.findIndex(function(e){return e.id==t.id})}),e.abrupt("return",o);case 50:e.prev=50,e.t3=e.catch(6),console.log(e.t3);case 53:case"end":return e.stop()}},e,null,[[6,50],[13,43],[15,34,37,40],[19,27]])}))()},queryProcessLogWait:function(i,u){var l=arguments;return Lt(Bt.mark(function e(){var t,n,r,o,a,c,s;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,mn.isNull(i)||mn.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.restAPI,"/api/v_handling_events?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),o={},e.prev=6,e.next=9,superagent.get(r).set("accept","json");case 9:a=e.sent,o=a.body;try{o=o.filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),o=dayjs(e.create_time).format("YYYY-MM-DD hh:mm:ss");return e.createtime=o,e.timestamp=r,e.operate_time=t,e.create_time=n,e.username=mn.deNull(e.username).split(","),e.content=mn.abbreviation(mn.delHtmlTag(e.content)),e.topic=mn.abbreviation(mn.delHtmlTag(e.topic)),"bs_seal_regist"!==e.tname&&"bs_goods_receive"!==e.tname?(e.username.contains(i)||e.username.contains(u))&&!e.user.includes(i):e.username.contains(i)||e.username.contains(u)})}catch(e){console.log(e)}e.prev=12,a=fn(o),e.prev=14,a.s();case 16:if((s=a.n()).done){e.next=32;break}if(c=s.value,e.prev=18,!mn.isNull(c.sponsor)||mn.isNull(c.proponents)){e.next=25;break}if(c.proponents.includes(",")){e.next=25;break}return e.next=23,gn.queryUserInfoByAccount(c.proponents);case 23:s=e.sent,c.sponsor=s.realname||s.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(14),a.e(e.t1);case 37:return e.prev=37,a.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(12),console.log(e.t2);case 46:return e.abrupt("return",o);case 49:e.prev=49,e.t3=e.catch(6),console.log(e.t3);case 52:case"end":return e.stop()}},e,null,[[6,49],[12,43],[14,34,37,40],[18,27]])}))()},queryProcessLogWaitSeal:function(i,u){var l=arguments;return Lt(Bt.mark(function e(){var t,n,r,o,a,c,s;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,mn.isNull(i)||mn.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.restAPI,"/api/v_handling_events?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),o={},e.prev=6,e.next=9,superagent.get(r).set("accept","json");case 9:a=e.sent,o=a.body;try{o=o.filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),o=dayjs(e.create_time).format("YYYY-MM-DD hh:mm:ss");return e.createtime=o,e.timestamp=r,e.operate_time=t,e.create_time=n,e.username=mn.deNull(e.username).split(","),e.content=mn.abbreviation(mn.delHtmlTag(e.content)),e.topic=mn.abbreviation(mn.delHtmlTag(e.topic)),("bs_seal_regist"===e.tname||"bs_goods_receive"===e.tname)&&(e.username.contains(i)||e.username.contains(u))})}catch(e){console.log(e)}e.prev=12,a=fn(o),e.prev=14,a.s();case 16:if((s=a.n()).done){e.next=32;break}if(c=s.value,e.prev=18,!mn.isNull(c.sponsor)||mn.isNull(c.proponents)){e.next=25;break}if(c.proponents.includes(",")){e.next=25;break}return e.next=23,gn.queryUserInfoByAccount(c.proponents);case 23:s=e.sent,c.sponsor=s.realname||s.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(14),a.e(e.t1);case 37:return e.prev=37,a.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(12),console.log(e.t2);case 46:return e.abrupt("return",o);case 49:e.prev=49,e.t3=e.catch(6),console.log(e.t3);case 52:case"end":return e.stop()}},e,null,[[6,49],[12,43],[14,34,37,40],[18,27]])}))()}}},Le={workconfig:{CON_SEAL_CODE_LENGTH:-4,mailconfig:{},config:{},system:{config:{regexp:{mail:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,mobile:""}}},group:{Group_LD:{seal:"",front:"",archive:"",prefix:"LD",name:"Group_LD"},ENTRY_JOB:{GROUP0:{JOB_HR_ADMIN:"",JOB_EXEC_ADMIN:"",JOB_MEAL_ADMIN:"",JOB_FRONT_ADMIN:""}}},statusType:{none:"待用印",seal:"已用印",receive:"已领取",sending:"已寄送",getback:"已寄回",front:"移交前台",archive:"归档完成",done:"已归档"},sealTypeNoName:{"合同类":"合同编号","非合同类":"流水编号"},compcolumns:{commonTypeColumns:["是","否"],archiveTypeColumns:["财务归档","档案归档"],orderTypeColumns:["我方先印","常规用印"],sealTypeColumns:["合同类","非合同类"],sealStatusColumns:["待用印","已用印","已领取","已寄送","移交前台","档案归档","财务归档","已退回","已作废"],diplomaTypeColumns:["博士","硕士","本科","专科","高中","初中","小学"],acceptType:["*/*"],approveColumns:["OA系统","ERP系统","费控系统","创达OA系统","CRM系统","EHR系统","资金系统","领地HR","宝瑞商管"]},goodstype:{office:"办公用品",drug:"药品",prevent:"防疫物资","办公用品":"office","药品":"drug","防疫物资":"prevent"},goodsborrowtype:{common:"信息设备",box:"传屏设备"},rewardtype:{0:"业绩考核奖",1:"总裁专项奖",2:"总经理专项奖",3:"特殊贡献奖",4:"其他奖罚"},reward:function(e){return[{id:"task-pane",title:"任务面板",taskflows:[{name:"我的待办",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/time_00.png",href:"/account/todolist",description:"查看待处理的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=mytodolist&type=7&back=/reward/workspace","_blank")}},{name:"我的已办",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/home_00.png",href:"/account/donelist",description:"查看已处理的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=mydonelist&type=7&back=/reward/workspace","_blank")}},{name:"我的申请",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/hire.png",href:"/account/donelist",description:"查看我发起的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=myapplylist&type=7&back=/reward/workspace","_blank")}},{name:"我的奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/绩效管理.png",href:"/account/myrewards",description:"查看涉及我的奖罚明细",click:function(){e.$router.push("/reward/message?panename=myrewarditemslist&type=7&back=/reward/workspace","_blank")}},{name:"统计分析",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/zhushou.png",href:"/account/myanalyse",description:"查看自己的奖罚月/季度报表",click:function(){e.$router.push("/reward/message?panename=myanalyselist&type=7&back=/reward/workspace","_blank")}}]},{id:"task-pane",title:"奖罚申请",taskflows:[{name:"业绩考核奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.1/images/pay03.png",href:"/account/todolist",description:"业绩考核奖罚申请流程",click:function(){e.$router.push("/reward/rewardapply?type=0&reward_name=业绩考核","_blank")}},{name:"总裁专项奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/pay.png",href:"/account/donelist",description:"总裁专项奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=1&reward_name=总裁专项","_blank")}},{name:"总经理专项奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.0/images/pay02.png",href:"/account/donelist",description:"总经理专项奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=2&reward_name=总经理专项","_blank")}},{name:"特殊贡献奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.0/images/pay00.png",href:"/account/myrewards",description:"特殊贡献奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=3&reward_name=特殊贡献","_blank")}},{name:"其他奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.2/images/pay07.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardapply?type=4&reward_name=其他奖罚","_blank")}},{name:"月度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/yuebao.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardmonth?type=month")}},{name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/ribao.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardmonth?type=quarter")}},{name:"奖罚审批",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/shenpi.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=myrewardlist&type=7&back=/reward/workspace","_blank")}}]},{id:"common-pane",title:"常用应用",taskflows:[{name:"月度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/leave.png",href:"/account/todolist",description:"查看/导出月度奖罚明细及汇总",click:function(){}},{name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/position.png",href:"/account/donelist",description:"查看/导出月度奖罚明细及汇总",click:function(){}}]}]},getRewardQuickTag:function(e){return[{name:"我的待办",color:"purple",click:function(){}},{name:"我的已办",color:"cyan",click:function(){}},{name:"我的已办",color:"cyan",click:function(){}},{name:"我的奖罚",color:"pink",click:function(){}},{name:"统计分析",color:"blue",click:function(){}},{name:"报表导出",color:"red",click:function(){}},{name:"月度报表",color:"green",click:function(){}},{name:"季度报表",color:"blue",click:function(){}},{name:"部门分布",color:"orange",click:function(){}},{name:"类别分布",color:"pink",click:function(){}},{name:"奖罚排行榜",color:"cyan",click:function(){}},{name:"奖罚个人榜",color:"blue",click:function(){}},{name:"奖罚团队榜",color:"red",click:function(){}}]},getRewardWflow:function(e){return[{name:"月度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/account/center",click:function(){}},{name:"季度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/account/authors/index",click:function(){}},{name:"年度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/blog/rank",click:function(){}},{name:"流程报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-rank-01.svg",href:"/blog/center",click:function(){}}]},columns:{reward:{items:[{title:"分配性质",dataIndex:"type",key:"type",scopedSlots:{customRender:"name"}},{title:"发放期间",dataIndex:"period",key:"period"},{title:"员工姓名",dataIndex:"username",key:"username",ellipsis:!0},{title:"员工OA",dataIndex:"account",key:"account",ellipsis:!0},{title:"所属单位",dataIndex:"company",key:"company",ellipsis:!0},{title:"所属部门",dataIndex:"department",key:"department",ellipsis:!0},{title:"员工职务",dataIndex:"position",key:"position",ellipsis:!0},{title:"分配金额",dataIndex:"amount",key:"amount",ellipsis:!0}],wfcolumns:[{title:"流程顺序",dataIndex:"key",key:"key",ellipsis:!0},{title:"审批人员",dataIndex:"username",key:"username",ellipsis:!0},{title:"审批账户",dataIndex:"userid",key:"userid",ellipsis:!0},{title:"所属单位",dataIndex:"company",key:"company",ellipsis:!0},{title:"所属部门",dataIndex:"department",key:"department",ellipsis:!0},{title:"审批职务",dataIndex:"position",key:"position",ellipsis:!0},{title:"联系电话",dataIndex:"mobile",key:"mobile",ellipsis:!0}]}},objects:{officeObjects:["笔记本","签字笔（黑）","签字笔（红）","订书机","订书针","回形针","U盘","笔筒","便利贴","标签贴","彩色便签","鼠标（有线）","鼠标垫","鼠标（无线）","插板","电池（5号）","电池（7号）","剪刀","胶棒","胶水","透明文件袋","美工刀","燕尾夹（大号）","燕尾夹（中号）","燕尾夹（小号）","抽杆文件夹","牛皮档案袋","牛皮档案盒","塑料档案盒","双面胶","透明胶带","橡皮擦","铅笔","荧光笔","文件夹","资料册","文件架","文件盘","印泥","起钉器","名片夹","派通笔","中性笔","名片盒","计算器","圆珠笔（黑）","圆珠笔（红）","彩色卡纸"],drugObjects:["感冒灵(999)","板蓝根","创口贴","碘伏","阿莫西林","和香正气","金嗓子","元和正胃片","蒙脱石散","感康","散列通","棉签纱布"]},queryAPI:{autoSerialAPI:"https://api.yunwisdom.club:30443/api/v2/mysql/serial/bs_seal_regist/serialid/id",tableSerialAPI:"https://api.yunwisdom.club:30443/api/v2/mysql/serial/{table_name}/serialid/id",patchSerialAPI:"https://api.yunwisdom.club:30443/api/v2/mysql/patchserial/bs_seal_regist/serialid/id"},compValidation:{seal:{message:{filename:"",count:"",dealDepart:"",dealManager:"",dealMail:"",signman:"",workno:"",sealtype:"",ordertype:"",approveType:"",mobile:"",username:"",contractId:"",sealman:"",front:"",archive:"",prefix:"",meal_account:"",message:"",company:"",finance:"",record:"",partner:""},valid:{filename:"请输入文件名称！",count:"请输入文件份数！",dealDepart:"请输入经办部门！",dealManager:"请输入经办人!",dealMail:"请输入经办人邮箱!",signman:"请输入签收人！",workno:"请输入流程编号！",sealtype:"请选择用印类型！",ordertype:"请选择用印顺序！",approveType:"请输入审批类型！",mobile:"请输入经办人电话!",username:"请输入经办人的OA账号!",contractId:"请输入合同编号！",sealman:"请输入印章管理员(盖印人)！",front:"请输入前台人员名称！",archive:"请输入归档人员名称！",prefix:"请输入合同对应的编号前缀！",meal_account:"请输入新员工的食堂账户！",message:"请印章管理员输入用印意见或备注说明！",company:"请输入用印公司名称！",finance:"请输入财务归档人员！",record:"请输入档案归档人员！",partner:"请输入合作方名称！"}},entryjob:{message:{username:"",department:"",position:"",picture:"",computer:"",seat:"",drawer:"",other_equip:"",notebook:"",manual:"",writingtools:"",badge:"",othertools:"",driving_license:"",driver_license:"",idcard:"",diploma:"",bachelor:"",join_time:"",hr_name:"",bank_card:"",mobile:"",meal_account:""},valid:{username:"请输入您的员工姓名！",department:"请输入您的入职部门！",position:"请输入您的入职岗位！",picture:"请上传您的一寸照片！",computer:"请选择是否需要电脑配置！",seat:"请选择是否需要办公座椅！",drawer:"请选择是否是否需要办公抽屉！",other_equip:"如果您有其他的办公配置要求，请填写在此处！",notebook:"请选择是否需要笔记/记事本等！",manual:"请选择是否需要入职手册！",writingtools:"请选择是否需要签字笔/擦！",badge:"请选择是否需要制作员工工牌！",othertools:"请输入您的其他办公用品需求！",driving_license:"请输入您的行驶证编号！",driver_license:"请输入您的驾驶证编号！",idcard:"请输入您的身份证编号！",diploma:"请输入您的学历证件编号！",bachelor:"请输入您的学位证件编号！",join_time:"请选择您的入职时间！",hr_name:"请选择您的对接HR姓名！",bank_card:"请输入您的工资银行卡号！",mobile:"请输入您的电话号码！",meal_account:"请输入新员工的食堂账户！"}},goodsreceive:{message:{create_time:"",create_by:"",receive_time:"",user_admin_name:"",name:"",amount:"",receive_name:"",department:"",remark:"",type:"",company:""},valid:{create_time:"请输入登记时间！",create_by:"请输入登记人员！",receive_time:"请输入领用时间！",user_admin_name:"请输入物品领用管理员！",name:"请输入领用物品名称！",amount:"请输入领用物品数量及单位！",receive_name:"请输入领用人员姓名！",department:"请输入领用人员所属部门！",remark:"请输入领用备注说明！",type:"请输入领用类别！",company:"请输入领用人员所属单位/公司名称！"}},borrowreceive:{message:{create_time:"",create_by:"",receive_time:"",user_admin_name:"",name:"",amount:"",receive_name:"",department:"",remark:"",type:"",company:""},valid:{create_time:"请输入登记时间！",create_by:"请输入登记人员！",receive_time:"请输入物品借用时间！",user_admin_name:"请输入物品借用管理员！",name:"请输入借用物品/设备名称！",amount:"请输入借用物品/设备数量及单位！",receive_name:"请输入借用人员姓名！",department:"请输入借用人员所属部门！",remark:"请输入物品借用备注说明！",type:"请输入物品借用类别！",company:"请输入借用人员所属单位/公司名称！"}},lostproperty:{message:{lost_name:"",lost_amount:"",user_admin_name:""},valid:{lost_name:"请输入物品名称！",lost_amount:"请输入物品数量及单位！",user_admin_name:"请输入失物招领处的物品管理员姓名！"}},visitorapply:{message:{time:"",visitor_name:"",visitor_company:"",visitor_mobile:"",visitor_position:"",visitor_name1:"",visitor_mobile1:"",visitor_name2:"",visitor_mobile2:"",visitor_name3:"",visitor_mobile3:"",visitor_name4:"",visitor_mobile4:"",visitor_name5:"",visitor_mobile5:"",visitor_name6:"",visitor_mobile6:"",visitor_name7:"",visitor_mobile7:"",visitor_name8:"",visitor_mobile8:"",visitor_name9:"",visitor_mobile9:"",visitor_name10:"",visitor_mobile10:"",visitor_name11:"",visitor_mobile11:"",visitor_name12:"",visitor_mobile12:"",visitor_name13:"",visitor_mobile13:"",visitor_name14:"",visitor_mobile14:"",visitor_name15:"",visitor_mobile15:"",visitor_name16:"",visitor_mobile16:"",visitor_name17:"",visitor_mobile17:"",visitor_name18:"",visitor_mobile18:"",visitor_name19:"",visitor_mobile19:"",visitor_name20:"",visitor_mobile20:"",employee:"",mobile:"",position:"",user_admin_name:""},valid:{time:"请输入预约时间！",visitor_name:"请输入访客姓名！",visitor_company:"请输入访客单位名称！",visitor_mobile:"请输入访客电话！",visitor_position:"请输入访客职务！",visitor_name1:"请输入访客姓名！",visitor_mobile1:"请输入访客电话！",visitor_name2:"请输入访客姓名！",visitor_mobile2:"请输入访客电话！",visitor_name3:"请输入访客姓名！",visitor_mobile3:"请输入访客电话！",visitor_name4:"请输入访客姓名！",visitor_mobile4:"请输入访客电话！",visitor_name5:"请输入访客姓名！",visitor_mobile5:"请输入访客电话！",visitor_name6:"请输入访客姓名！",visitor_mobile6:"请输入访客电话！",visitor_name7:"请输入访客姓名！",visitor_mobile7:"请输入访客电话！",visitor_name8:"请输入访客姓名！",visitor_mobile8:"请输入访客电话！",visitor_name9:"请输入访客姓名！",visitor_mobile9:"请输入访客电话！",visitor_name10:"请输入访客姓名！",visitor_mobile10:"请输入访客电话！",visitor_name11:"请输入访客姓名！",visitor_mobile11:"请输入访客电话！",visitor_name12:"请输入访客姓名！",visitor_mobile12:"请输入访客电话！",visitor_name13:"请输入访客姓名！",visitor_mobile13:"请输入访客电话！",visitor_name14:"请输入访客姓名！",visitor_mobile14:"请输入访客电话！",visitor_name15:"请输入访客姓名！",visitor_mobile15:"请输入访客电话！",visitor_name16:"请输入访客姓名！",visitor_mobile16:"请输入访客电话！",visitor_name17:"请输入访客姓名！",visitor_mobile17:"请输入访客电话！",visitor_name18:"请输入访客姓名！",visitor_mobile18:"请输入访客电话！",visitor_name19:"请输入访客姓名！",visitor_mobile19:"请输入访客电话！",visitor_name20:"请输入访客姓名！",visitor_mobile20:"请输入访客电话！",employee:"请输入填报人姓名！",mobile:"请输入填报人电话！",position:"请输入填报人职务！",user_admin_name:"请输入客服接待！"}},rewardapply:{message:{title:"",company:"",department:"",content:"",remark:"",amount:"",reward_type:"",reward_name:"",reward_period:"",hr_name:"",files:"",apply_realname:""},valid:{title:"请输入奖罚申请的标题！",company:"请输入申请人员的所在公司！",department:"请输入申请人员的所在部门！",content:"请输入奖罚申请流程的申请事由！",remark:"请输入备注信息！",amount:"请输入本次奖罚申请的单项奖金总额！",reward_type:"请输入奖罚类型！",reward_name:"请输入奖罚名称！",reward_period:"请输入奖罚所属周期！",hr_name:"请输入负责薪资管理的人力经理！",files:"请上传奖罚明细的Excel文档！",apply_realname:"请输入申请人姓名！"}}},commonUserInfo:{username:"common",realname:"",main_department:"",department:{name:""},parent_company:{name:""}},getPaneflows:function(e){return[{id:100,name:"我的知会",ename:"myrewardlist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/shenpi.png",href:"/account/myrewardlist",description:"查看知会(人力专项)申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myrewardlist"}},{id:0,name:"我的待办",ename:"mytodolist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/time_00.png",href:"/account/mytodolist",description:"查看待处理的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","知会我"],dataSource:[],click:function(){e.panename="mytodolist"}},{id:1,name:"我的已办",ename:"mydonelist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/home_00.png",href:"/account/mydonelist",description:"查看已处理的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","我发起","已审批","已驳回","知会我"],dataSource:[],click:function(){e.panename="mydonelist"}},{id:200,name:"我的申请",ename:"myapplylist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/hire.png",href:"/account/myapplylist",description:"查看我发起的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myapplylist"}},{id:2,name:"我的奖罚",ename:"myrewardslist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/绩效管理.png",href:"/account/myrewardslist",description:"查看涉及我的奖罚明细",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myrewardslist"}},{id:3,name:"统计分析",ename:"myanalyselist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/zhushou.png",href:"/account/myanalyselist",description:"查看自己的奖罚月/季度报表",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部"],click:function(){e.panename="myanalyselist"}},{id:4,name:"月度报表",ename:"mymonthlist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/leave.png",href:"/account/mymonthlist",description:"查看/导出月度奖罚明细及汇总",show:!0,css:"",tabs:["全部","待处理","抄送我"],click:function(){e.panename="mymonthlist"}},{id:5,name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/position.png",href:"/account/myquanterlist",description:"查看/导出月度奖罚明细及汇总",show:!0,css:"",tabs:["全部","待处理","抄送我"],click:function(){e.panename="myquanterlist"}}]}}},yn=je.tools,hn=Ne.storage,vn=Ft.constant,wn=Oe.manage,bn=Se.query,$={workflow:{queryPRLogHistoryByDataID:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(vn.REQUEST_API_CONFIG.restapi,"/api/pr_log_history?_where=(business_data_id,eq,").concat(r,")&_sort=operate_time&_p=0&_size=1000"),void 0!==(n=hn.getStore("sys_workflow_cache@$history&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&hn.setStore("sys_workflow_cache@$history&id".concat(r),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryPRLogByDataID:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.requestAPIConfig.restapi,"/api/pr_log?_where=(business_data_id,eq,").concat(n,")&_sort=operate_time&_p=0&_size=1000"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t),null!=t.body&&0<t.body.length&&hn.setStore("sys_workflow_cache@$now&id".concat(n),t.body,0),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryPRLogInformedByDataID:function(r){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.requestAPIConfig.restapi,"/api/pr_log_informed?_where=(business_data_id,eq,").concat(r,")&_sort=operate_time&_p=0&_size=1000"),void 0!==(n=hn.getStore("sys_workflow_cache@$informed&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&hn.setStore("sys_workflow_cache@$informed&id".concat(r),n.body,60),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryPRLogUserByPage:function(r,o){return Lt(Bt.mark(function e(){var t,n;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.requestAPIConfig.restapi,"/api/v_uname?_p=").concat(r,"&_size=").concat(o,"&_sort=username"),void 0!==(n=hn.getStore("sys_workflow_username@$all&p=".concat(r,"&size=").concat(o)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&hn.setStore("sys_workflow_username@$all&p=".concat(r,"&size=").concat(o),n.body,3600),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserAll:function(){return Lt(Bt.mark(function e(){var t,n,r;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],void 0!==(r=hn.getStore("sys_workflow_user_all@$all"))&&null!=r&&""!=r)return e.abrupt("return",r);e.next=4;break;case 4:n=0;case 5:if(n<=100)return e.next=8,queryPRLogUserByPage(n,99);e.next=17;break;case 8:if(!(null!=(r=e.sent)&&0<r.length)){e.next=13;break}t.push.apply(t,Jt(r)),e.next=14;break;case 13:return e.abrupt("break",17);case 14:n++,e.next=5;break;case 17:return null!=t&&0<t.length&&hn.setStore("sys_workflow_user_all@$all",t,86400),e.abrupt("return",t);case 19:case"end":return e.stop()}},e)}))()},queryUserByName:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,queryUserAll();case 2:if(t=e.sent,null!=(t=t.find(function(e){return e.username==n}))&&null!=t.realname)return e.abrupt("return",t.realname);e.next=8;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))()},postWorkflowApprove:function(n,r,o,a,c,s,i,u,l,p){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,wn.postTableData("BS_TRANSACTION",o);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("流程事务处理框架处理异常",e.t0);case 10:if(e.prev=10,null!=a)return e.next=14,wn.postProcessLog(a);e.next=15;break;case 14:t=e.sent;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),console.log("审批处理下一节点的审批信息",e.t1);case 20:if(e.prev=20,null!=n&&null!=r&&null!=c&&null!=s)return e.next=24,wn.postProcessLogHistory(c);e.next=35;break;case 24:return t=e.sent,e.next=27,wn.deleteProcessLog(n,c);case 27:return t=e.sent,e.next=30,wn.patchTableData(n,r.business_data_id,s);case 30:return t=e.sent,e.next=33,wn.transFreeWflowHis(r.business_data_id);case 33:t=e.sent,setTimeout(Lt(Bt.mark(function e(){return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn.patchTableData(n,r.business_data_id,s);case 2:t=e.sent;case 3:case"end":return e.stop()}},e)})),100);case 35:e.next=40;break;case 37:e.prev=37,e.t2=e.catch(20),console.log("审批处理当前节点的审批信息",e.t2);case 40:return e.prev=40,i.audit_node=",".concat(i.audit_node,","),yn.deNull(u)&&!i.audit_node.includes(u)&&(i.audit_node=i.audit_node.replace(",".concat(p,","),",".concat(p,",").concat(u,","))),yn.deNull(l)&&!i.audit_node.includes(l)&&(i.audit_node=i.audit_node.replace(",".concat(p,","),",".concat(l,",").concat(p,","))),yn.deNull(l)&&i.audit_node.indexOf(p)!=i.audit_node.lastIndexOf(p)&&(i.audit_node=i.audit_node.replace(",".concat(p,","),",")),i.audit_node.startsWith(",")&&(i.audit_node=i.audit_node.substring(1)),i.audit_node.endsWith(",")&&(i.audit_node=i.audit_node.substring(0,i.audit_node.length-1)),e.next=49,wn.patchTableData("bs_free_process",i.id,{audit_node:i.audit_node});case 49:t=e.sent,e.next=55;break;case 52:e.prev=52,e.t3=e.catch(40),console.log(e.t3);case 55:if(e.prev=55,"1"==s.bpm_status)return e.next=59,postDynamicReject(n,r);e.next=61;break;case 59:e.next=69;break;case 61:if("4"==s.bpm_status)return e.next=64,postDynamicAgree(n,r);e.next=66;break;case 64:e.next=69;break;case 66:if("5"==s.bpm_status)return e.next=69,postDynamicNotify(n,r);e.next=69;break;case 69:e.next=74;break;case 71:e.prev=71,e.t4=e.catch(55),console.log(e.t4);case 74:return console.log("加签用户："+u),console.log("会签用户："+l),e.abrupt("return",t);case 77:case"end":return e.stop()}},e,null,[[1,7],[10,17],[20,37],[40,52],[55,71]])}))()},approveViewProcessLog:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn.postProcessLogHistory(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))()},taskViewProcessLog:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn.postProcessLog(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))()},deleteViewProcessLog:function(n){return Lt(Bt.mark(function e(){var t;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.map(function(e){e.oid=e.id,e.id=e.pid}),e.next=3,wn.deleteProcessLog("",n);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}))()},checkSubmitInfo:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"workflowing";try{if(""==yn.deNull(n)&&"workflowing"==r)return vant.Toast.fail("请选择审批用户!"),!1;if(yn.deNull(n).includes(",")&&"workflowing"==r)return vant.Toast.fail("审批用户只能选择一个!"),!1;if(""==yn.deNull(t)&&"notifying"==r)return vant.Toast.fail("请选择知会用户!"),!1;if((","+e+",").includes(","+n+",")&&"workflowing"==r)return vant.Toast.fail("审批流程中，审批人员[${approver}]不能出现在审核人员中!"),!1}catch(e){console.log("check submit info error : "+e)}return!0},postWorkflowFree:function(u,l,p,f,d,m,g){return Lt(Bt.mark(function e(){var t,n,r,o,a,c,s,i;return Bt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n={bpm_status:g},r={};try{f.notify_node=f.notify_node.replace(/undefined/g,""),f.notify_node.startsWith(",")&&(f.notify_node=f.notify_node.substring(1)),f.notify_node.endsWith(",")&&(f.notify_node=f.notify_node.substring(0,f.notify_node.length-1))}catch(e){console.log(e)}return e.prev=4,o=(new Date).getTime(),a=yn.queryUniqueID(),e.next=9,bn.queryTableData(l,p.id);case 9:return c=e.sent,e.next=12,wn.queryTableDataByField("v_table_name","id",l);case 12:s=e.sent;try{s=s[0].name}catch(e){console.log(e)}i="<div><span>"+u.realname+'</span> 发起了 <a href="/workflow/view?table_name='.concat(l,"&id=").concat(p.id,"&user=").concat(u.username,'&type=notify">')+s+'</a> 的 <a href="/workflow/view?table_name='.concat(l,"&id=").concat(p.id,"&user=").concat(u.username,'&type=notify">流程申请</a> ')+"</div>",r={id:a,create_by:u.username,create_time:yn.formatDate(o,"yyyy-MM-dd hh:mm:ss"),update_by:u.username,title:i,content:i,main_key:p.id,main_table:l,main_data:JSON.stringify(c),relate_users:"".concat(f.audit_node,",").concat(f.approve_node,",").concat(f.notify_node,",").concat(u.username,",admin,")},f.main_data=JSON.stringify(c),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.log(e.t0);case 22:return e.prev=22,e.prev=23,e.next=26,wn.postProcessFreeNode(f);case 26:t=e.sent,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(23),console.log(e.t1);case 32:return e.prev=32,e.next=35,wn.postProcessLogHistory(d);case 35:t=e.sent,e.next=41;break;case 38:e.prev=38,e.t2=e.catch(32),console.log(e.t2);case 41:return e.prev=41,e.next=44,wn.postProcessLog(m);case 44:t=e.sent,e.next=50;break;case 47:e.prev=47,e.t3=e.catch(41),console.log(e.t3);case 50:return e.prev=50,e.next=53,wn.patchTableData(l,p.id,n);case 53:t=e.sent,e.next=59;break;case 56:e.prev=56,e.t4=e.catch(50),console.log(e.t4);case 59:return e.prev=59,e.next=62,wn.postTableData("bs_dynamic",r);case 62:t=e.sent,e.next=68;break;case 65:e.prev=65,e.t5=e.catch(59),console.log(e.t5);case 68:return e.prev=68,e.next=71,wn.patchTableData(l,p.id,n);case 71:t=e.sent,e.next=77;break;case 74:e.prev=74,e.t6=e.catch(68),console.log(e.t6);case 77:e.next=82;break;case 79:e.prev=79,e.t7=e.catch(22),console.log("处理自由流程发起提交审批操作异常："+e.t7);case 82:return e.abrupt("return",t);case 83:case"end":return e.stop()}},e,null,[[4,19],[22,79],[23,29],[32,38],[41,47],[50,56],[59,65],[68,74]])}))()}}},Z={};Object.assign(Z,Me,we,e,n,it,D,oe,ce,Ft,se,je,Ne,Se,Oe,Be,Le,$);var _n=Z;f.mixin=function(e){return _n.each(e,function(t,e){f[e]=_n.isFunction(t)&&!1!==t._c?function(){var e=t.apply(f.$context,arguments);return f.$context=null,e}:t}),f},f.setup=function(e){_n.assign(y,e)},f.mixin(_n);Z=f;return Z.default=f,Z});
