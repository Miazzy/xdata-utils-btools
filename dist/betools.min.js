!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es6.object.assign.js"),require("core-js/modules/es6.regexp.match.js"),require("core-js/modules/es6.regexp.split.js"),require("core-js/modules/es6.weak-set.js"),require("core-js/modules/es6.set.js"),require("core-js/modules/es6.weak-map.js"),require("core-js/modules/web.dom.iterable.js"),require("core-js/modules/es6.array.iterator.js"),require("core-js/modules/es6.string.iterator.js"),require("core-js/modules/es6.map.js"),require("core-js/modules/es7.symbol.async-iterator.js"),require("core-js/modules/es6.symbol.js"),require("core-js/modules/es6.regexp.to-string.js"),require("core-js/modules/es6.object.to-string.js"),require("core-js/modules/es6.string.includes.js"),require("core-js/modules/es6.array.copy-within.js"),require("core-js/modules/es7.array.includes.js"),require("core-js/modules/es6.regexp.replace.js"),require("core-js/modules/es6.function.name.js"),require("core-js/modules/es6.number.constructor.js"),require("core-js/modules/es6.regexp.search.js"),require("core-js/modules/es7.string.pad-end.js"),require("core-js/modules/es6.regexp.constructor.js"),require("core-js/modules/es6.string.fixed.js"),require("core-js/modules/es7.string.pad-start.js"),require("core-js/modules/es6.string.repeat.js"),require("core-js/modules/es7.string.trim-right.js"),require("core-js/modules/es7.string.trim-left.js"),require("core-js/modules/es6.array.from.js"),require("core-js/modules/es6.promise.js"),require("core-js/modules/es6.string.ends-with.js"),require("core-js/modules/es6.string.starts-with.js"),require("core-js/modules/es6.array.find.js"),require("core-js/modules/es6.object.keys.js"),require("core-js/modules/es6.array.find-index.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.object.assign.js","core-js/modules/es6.regexp.match.js","core-js/modules/es6.regexp.split.js","core-js/modules/es6.weak-set.js","core-js/modules/es6.set.js","core-js/modules/es6.weak-map.js","core-js/modules/web.dom.iterable.js","core-js/modules/es6.array.iterator.js","core-js/modules/es6.string.iterator.js","core-js/modules/es6.map.js","core-js/modules/es7.symbol.async-iterator.js","core-js/modules/es6.symbol.js","core-js/modules/es6.regexp.to-string.js","core-js/modules/es6.object.to-string.js","core-js/modules/es6.string.includes.js","core-js/modules/es6.array.copy-within.js","core-js/modules/es7.array.includes.js","core-js/modules/es6.regexp.replace.js","core-js/modules/es6.function.name.js","core-js/modules/es6.number.constructor.js","core-js/modules/es6.regexp.search.js","core-js/modules/es7.string.pad-end.js","core-js/modules/es6.regexp.constructor.js","core-js/modules/es6.string.fixed.js","core-js/modules/es7.string.pad-start.js","core-js/modules/es6.string.repeat.js","core-js/modules/es7.string.trim-right.js","core-js/modules/es7.string.trim-left.js","core-js/modules/es6.array.from.js","core-js/modules/es6.promise.js","core-js/modules/es6.string.ends-with.js","core-js/modules/es6.string.starts-with.js","core-js/modules/es6.array.find.js","core-js/modules/es6.object.keys.js","core-js/modules/es6.array.find-index.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Betools=t()}(this,function(){"use strict";var d=function(){},e="yyyy-MM-dd HH:mm:ss",y={treeOptions:{parentKey:"parentId",key:"id",children:"children"},formatDate:e+".SSSZ",formatString:e,dateDiffRules:[["yyyy",31536e6],["MM",2592e6],["dd",864e5],["HH",36e5],["mm",6e4],["ss",1e3],["S",0]]},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var s=t(function(t){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.exports=n}),n="undefined",r=Object.prototype.toString,a=Object.assign;function l(e,t){return e.hasOwnProperty(t)}function c(t){return function(e){return s(e)===t}}function i(t){return function(e){return"[object "+t+"]"===r.call(e)}}function u(e){return k(e)?(n={},de(e,function(e,t){n[t]=u(e)}),n):m(e)?(t=e,d.map(t,u)):e;var t,n}function p(e,t){return e&&(t?u(e):Q(k(e)?{}:[],e))}var f=c(n),m=Array.isArray||i("Array");function g(e){return null!==e&&!isNaN(e)&&!m(e)&&e%1==0}var h=c("function"),v=c("boolean"),_=c("string"),w=c("number"),b=i("RegExp"),x=c("object");function k(e){return!!e&&e.constructor===Object}var I=i("Date"),N=i("Error");function j(e){for(var t in e)return!1;return!0}function S(e){return null===e}var O=("undefined"==typeof Symbol?"undefined":s(Symbol))!==n;function D(e){return O&&Symbol.isSymbol?Symbol.isSymbol(e):"symbol"===s(e)}var q=i("Arguments");var B=("undefined"==typeof document?"undefined":s(document))!==n;var E=("undefined"==typeof window?"undefined":s(window))!==n;var C=("undefined"==typeof FormData?"undefined":s(FormData))!==n;var A=("undefined"==typeof Map?"undefined":s(Map))!==n;var M=("undefined"==typeof WeakMap?"undefined":s(WeakMap))!==n;var F=("undefined"==typeof Set?"undefined":s(Set))!==n;var P=("undefined"==typeof WeakSet?"undefined":s(WeakSet))!==n;function L(e,t){return U(e,t,T)}function T(e,t){return e===t}function U(n,r,a,o,e,t,s){if(n&&r&&!w(n)&&!w(r)&&!_(n)&&!_(r)){if(b(n))return a(""+n,""+r,e,t,s);if(I(n)||v(n))return a(+n,+r,e,t,s);var c,i,u,l=m(n),p=m(r);if(l||p?l&&p:n.constructor===r.constructor)return i=ne(n),u=ne(r),o&&(c=o(n,r,e)),i.length===u.length&&(f(c)?d.every(i,function(e,t){return e===u[t]&&U(n[e],r[u[t]],a,o,l||p?t:e,n,r)}):!!c)}return a(n,r,e,t,s)}function G(t,n){return function(e){return null===e?n:e[t]}}var R=0;function Y(e,t,n){var r=[];if(e)for(t=t||0,n=n||e.length;t<n;t++)r.push(e[t]);return r}function z(r,a){return function(e,t){if(e){if(_(e)||m(e))return e[r]?e[r](t):a(e,t);for(var n in e)if(l(e,n)&&t===e[n])return n}return-1}}var W=z("indexOf",function(e,t){for(var n=0,r=e.length;n<r;n++)if(t===e[n])return n}),J=z("lastIndexOf",function(e,t){for(var n=e.length-1;0<=n;n--)if(t===e[n])return n;return-1});function $(a){return function(e,t,n){if(e&&h(t)){if(n=this||n,m(e)||_(e))return a(e,t,n);for(var r in e)if(l(e,r)&&t.call(n,e[r],r,e))return r}return-1}}var H=$(function(e,t,n){for(var r=0,a=e.length;r<a;r++)if(t.call(n,e[r],r,e))return r;return-1}),K=$(function(e,t,n){for(var r=e.length-1;0<=r;r--)if(t.call(n,e[r],r,e))return r;return-1});function Z(e,t){return-1!==W(e,t)}function V(t,e,n){for(var r,a=e.length,o=1;o<a;o++)r=e[o],ie(ne(e[o]),n?function(e){t[e]=p(r[e],n)}:function(e){t[e]=r[e]});return t}var Q=function(e){if(e){var t=arguments;if(!0!==e)return a?a.apply(Object,t):V(e,t);if(1<t.length)return V(e=m(e[1])?[]:{},t,!0)}return e};function X(t,n){try{delete t[n]}catch(e){t[n]=void 0}}function ee(n,r,e){if(n){var t,a=1<arguments.length&&(null===r||!x(r)),e=a?e:r;if(k(n))ue(n,a?function(e,t){n[t]=r}:function(e,t){X(n,t)}),e&&Q(n,e);else if(m(n)){if(a)for(t=n.length;0<t;)n[--t]=r;else n.length=0;e&&n.push.apply(n,e)}}return n}function te(e,r){var a=Object[e];return function(t){var n=[];if(t){if(a)return a(t);de(t,1<r?function(e){n.push([""+e,t[e]])}:function(){n.push(arguments[r])})}return n}}var ne=te("keys",1),re=te("values",0),ae=te("entries",2);function oe(u,l){return function(n,r){var e,a={},o=[],s=this,t=arguments,c=1,i=t.length;if(!h(r))for(r=0;c<i;c++)m(e=t[c])?o=o.concat(e):o.push(e);return de(n,function(e,t){((r?r.call(s,e,t,n):-1<H(o,function(e){return e===t}))?u:l)&&(a[t]=e)}),a}}var se=oe(1,0),ce=oe(0,1);function ie(e,t,n){if(e.forEach)e.forEach(t,n);else for(var r=0,a=e.length;r<a;r++)t.call(n||this,e[r],r,e)}function ue(e,t,n){for(var r in e)l(e,r)&&t.call(n||this,e[r],r,e)}function le(t,n,r){pe(ne(t),function(e){n.call(r||this,t[e],e,t)})}function pe(e,t,n){for(var r=e.length-1;0<=r;r--)t.call(n||this,e[r],r,e)}function de(e,t,n){return e&&(n=n||this,(m(e)?ie:ue)(e,t,n))}function fe(e,t,n){return e&&(m(e)?pe:le)(e,t,n||this)}function me(e){return e?m(e)?e:(""+e).split("."):[]}var ge=/(.+)?\[(\d+)\]$/,ye=/(.+)\[(\d+)\]$/;function he(e,t){if(e){var n,r,a,o=0;if(l(e,t))return e[t];if(a=(r=me(t)).length)for(n=e;o<a;o++)if(s=n,c=r[o],i=void 0,n=(i=c?c.match(ge):"")?i[1]?s[i[1]]?s[i[1]][i[2]]:void 0:s[i[2]]:s[c],f(n)||S(n))return;return n}var s,c,i}function ve(n,r,a){var o,e,s={};return n&&(a=this||a,r&&x(r)?(e=r,r=function(){return j(e)}):h(r)||(r=G(r)),de(n,function(e,t){o=r?r.call(a,e,t,n):e,s[o]?s[o].push(e):s[o]=[e]})),s}var _e={_hasOwnProp:l,isNaN:isNaN,isFinite:function(e){return w(e)&&isFinite(e)},isUndefined:f,isArray:m,isFloat:function(e){return null!==e&&!isNaN(e)&&!m(e)&&!g(e)},isInteger:g,isFunction:h,isBoolean:v,isString:_,isNumber:w,isRegExp:b,isObject:x,isPlainObject:k,isDate:I,isError:N,isTypeError:function(e){return!!e&&e.constructor===TypeError},isEmpty:j,isNull:S,isSymbol:D,isArguments:q,isElement:function(e){return!!(e&&_(e.nodeName)&&w(e.nodeType))},isDocument:function(e){return!(!e||9!==e.nodeType||!B)},isWindow:function(e){return!(!e||e!==e.window||!E)},isFormData:function(e){return C&&e instanceof FormData},isMap:function(e){return A&&e instanceof Map},isWeakMap:function(e){return M&&e instanceof WeakMap},isSet:function(e){return F&&e instanceof Set},isWeakSet:function(e){return P&&e instanceof WeakSet},isLeapYear:function(e){var e=e?d.toStringDate(e):new Date;return!!I(e)&&((e=e.getFullYear())%4==0&&(e%100!=0||e%400==0))},isMatch:function(n,r){var e=ne(n),t=ne(r);return!t.length||(d.includeArrays(e,t)?d.some(t,function(t){return-1<H(e,function(e){return e===t&&L(n[e],r[t])})}):L(n,r))},isEqual:L,isEqualWith:function(e,t,o){return h(o)?U(e,t,function(e,t,n,r,a){a=o(e,t,n,r,a);return f(a)?e===t:!!a},o):U(e,t,T)},property:G,getType:function(e){return null===e?""+e:D(e)?"symbol":I(e)?"date":m(e)?"array":b(e)?"regexp":N(e)?"error":s(e)},uniqueId:function(e){return(e?""+e:0)+ ++R},getSize:function(e){var t=0;return _(e)||m(e)?e.length:(de(e,function(){t++}),t)},slice:Y,indexOf:W,lastIndexOf:J,findIndexOf:H,findLastIndexOf:K,includes:Z,contains:Z,assign:Q,extend:Q,toStringJSON:function(e){if(x(e))return e;if(_(e))try{return JSON.parse(e)}catch(e){}return{}},toJSONString:function(e){return JSON.stringify(e)||""},keys:ne,values:re,entries:ae,pick:se,omit:ce,first:function(e){return re(e)[0]},last:function(e){return(e=re(e))[e.length-1]},each:de,forOf:function(e,t,n){if(e)if(n=n||this,m(e))for(var r=0,a=e.length;r<a&&!1!==t.call(n,e[r],r,e);r++);else for(var o in e)if(l(e,o)&&!1===t.call(n,e[o],o,e))break},arrayEach:ie,forEach:ie,objectEach:ue,lastForOf:function(e,t,n){var r,a;if(e)if(n=n||this,m(e))for(r=e.length-1;0<=r&&!1!==t.call(n,e[r],r,e);r--);else for(r=(a=ne(e)).length-1;0<=r&&!1!==t.call(n,e[a[r]],a[r],e);r--);},lastEach:fe,lastForEach:pe,lastArrayEach:pe,lastObjectEach:le,has:function(e,t){if(e){if(l(e,t))return!0;for(var n,r,a,o,s=me(t),c=0,i=s.length,u=e;c<i&&(o=!1,(a=(n=s[c])?n.match(ge):"")?(r=a[1],a=a[2],r?u[r]&&l(u[r],a)&&(o=!0,u=u[r][a]):l(u,a)&&(o=!0,u=u[a])):l(u,n)&&(o=!0,u=u[n]),o);c++)if(c===i-1)return!0}return!1},get:function(e,t,n){return S(e)||f(e)?n:(t=he(e,t),f(t)?n:t)},set:function(e,t,n){var r,a;return e&&(r=e,t=me(t),a=t.length,ie(t,function(e,t){r=function(e,t,n,r){if(e[t])return n&&(e[t]=r),e[t];var a=t?t.match(ye):null,n=n?r:{};return a?(r=parseInt(a[2]),e[a[1]]||(e[a[1]]=new Array(r+1)),e[a[1]][r]=n):e[t]=n,n}(r,e,t===a-1,n)})),e},groupBy:ve,countBy:function(e,t,n){var r=ve(e,t,n||this);return ue(r,function(e,t){r[t]=e.length}),r},objectMap:function(n,r,a){var o={};if(n){if(!r)return n;a=a||this,h(r)||(r=G(r)),de(n,function(e,t){o[t]=r.call(a,e,t,n)})}return o},clone:p,delay:function(e,t){var n=Y(arguments,2),r=this;return setTimeout(function(){e.apply(r,n)},t)},bind:function(e,t){var n=Y(arguments,2);return t=t||this,function(){return e.apply(t,Y(arguments).concat(n))}},once:function(e,t){var n=!1,r=null,a=Y(arguments,2);return t=t||this,function(){return n||(r=e.apply(t,Y(arguments).concat(a)),n=!0),r}},after:function(e,t,n){var r=0,a=[];return n=n||this,function(){++r<=e&&a.push(arguments[0]),e<=r&&t.apply(n,[a].concat(Y(arguments)))}},before:function(e,t,n){var r=0,a=[];return n=n||this,function(){++r<e&&(a.push(arguments[0]),t.apply(n,[a].concat(Y(arguments))))}},clear:ee,remove:function(n,r,a){if(n){if(1<arguments.length){var o=[],s=[];return a=a||this,h(r)||(c=r,r=function(e,t){return t===c}),de(n,function(e,t,n){r.call(a,e,t,n)&&o.push(t)}),m(n)?fe(o,function(e,t){s.push(n[e]),n.splice(e,1)}):(s={},ie(o,function(e){s[e]=n[e],X(n,e)})),s}return ee(n)}var c;return n},range:function(e,t,n){var r,a,o=[],s=arguments;if(s.length<2&&(t=s[0],e=0),a=t>>0,(r=e>>0)<t)for(n=n>>0||1;r<a;r+=n)o.push(r);return o},throttle:function(e,t,n){function r(){s=!0,e.apply(o,a),c=setTimeout(l,t)}var a,o,s=!1,c=0,i=!("leading"in(n=n||{}))||n.leading,u="trailing"in n&&n.trailing,l=function(){c=0,s||!0!==u||r()};return(n=function(){a=arguments,o=this,s=!1,0===c&&(!0===i?r():!0===u&&(c=setTimeout(l,t)))}).cancel=function(){var e=0!==c;return clearTimeout(c),s=!1,c=0,e},n},debounce:function(e,t,n){function r(){i=!0,u=0,e.apply(s,o)}function a(){!0===l&&(u=0),i||!0!==p||r()}var o,s,c=n||{},i=!1,u=0,n="boolean"==typeof n,l="leading"in c?c.leading:n,p="trailing"in c?c.trailing:!n,d=clearTimeout;return(n=function(){i=!1,o=arguments,s=this,0===u?!0===l&&r():d(u),u=setTimeout(a,t)}).cancel=function(){var e=0!==u;return d(u),u=0,e},n},destructuring:function(t,e){var n,r;return t&&e&&(n=Q.apply(this,[{}].concat(Y(arguments,1))),r=ne(n),ie(ne(t),function(e){Z(r,e)&&(t[e]=n[e])})),t}};function we(e){var t=[];return _e.each(e,function(e){t.includes(e)||t.push(e)}),t}function be(e,t){return t<e?1:-1}function xe(e,t,n,r){if(e){if(t===r)return Ee(e).sort(be);var a,r=De(e,function(e){return{data:e}}),o=(s=e,c=r,t=t,i=n||this,t=_e.isArray(t)?t:[t],_e.arrayEach(t,function(n,r){_e.arrayEach(c,_e.isFunction(n)?function(e,t){e[r]=n.call(i,e.data,t,s)}:function(e){e[r]=_e.get(e.data,n)})}),t).length;if(o){for(;0<=o;)a=function(a,o){return function(e,t){var n=e[a],r=t[a];return n===r?o?o(e,t):0:be(n,r)}}(o,a),o--;r=r.sort(a)}return De(r,_e.property("data"))}var s,c,i;return[]}function ke(e){for(var t,n=[],r=_e.values(e),a=r.length-1;0<=a;a--)t=0<a?d.random(0,a):0,n.push(r[t]),r.splice(t,1);return n}function Ie(s,c,i,u,l){return function(e,t,n){if(e&&t){if(n=n||this,s&&e[s])return e[s](t,n);if(c&&_e.isArray(e)){for(var r=0,a=e.length;r<a;r++)if(!!t.call(n,e[r],r,e)===u)return[!0,!1,r,e[r]][i]}else for(var o in e)if(_e._hasOwnProp(e,o)&&!!t.call(n,e[o],o,e)===u)return[!0,!1,o,e[o]][i]}return l}}var Ne=Ie("some",1,0,!0,!1),je=Ie("every",1,1,!1,!0),Se=Ie("",0,2,!0),Oe=Ie("find",1,3,!0);function De(e,t,n){var r=[];if(e&&1<arguments.length){if(n=n||this,_e.isFunction(t)||(t=_e.property(t)),e.map)return e.map(t,n);_e.each(e,function(){r.push(t.apply(n,arguments))})}return r}function qe(e,t,n){var r=0,a=d.toNumber;return n=n||this,_e.each(e,t?_e.isFunction(t)?function(){r+=a(t.apply(n,arguments))}:function(e){r+=a(e[t])}:function(e){r+=a(e)}),r}function Be(e){for(var t=[],n=0,r=d.max(e,function(e){return e.length||0}).length;n<r;n++)t.push(De(e,n));return t}function Ee(e){return De(e,function(e){return e})}function Ce(e,t){for(var n,r=arguments,a=[],o=[],s=2,c=r.length;s<c;s++)a.push(r[s]);if(_e.isArray(t)){for(c=t.length-1,s=0;s<c;s++)o.push(t[s]);t=t[c]}return De(e,function(e){if(o.length&&(e=function(e,t){for(var n=0,r=t.length;e&&n<r;)e=e[t[n++]];return r&&e?e:0}(e,o)),(n=e[t]||t)&&n.apply)return n.apply(e,a)})}function Ae(o){return function(e,t,n,r){var a=n||{},n=a.children||"children";return o(null,e,t,r||this,[],n,a.mapChildren||n)}}var Me=Ae(function e(t,n,r,a,o,s,c){var i,u,l,p,d,f;if(_e.isArray(n))for(l=0,p=n.length;l<p;l++){if(i=n[l],d=o.concat([""+l]),r.call(a,i,l,n,d,t))return{index:l,item:i,path:d,items:n,parent:t};if(s&&i&&(f=e(i,i[s],r,a,d.concat([s]),s)))return f}else for(u in n)if(_e._hasOwnProp(n,u)){if(i=n[u],d=o.concat([u]),r.call(a,i,l,n,d,t))return{index:u,item:i,path:d,items:n};if(s&&i&&(f=e(i,i[s],r,a,d.concat([s]),s)))return f}});var Fe=Ae(function n(r,a,o,s,c,i,e){var u;_e.each(a,function(e,t){u=c.concat([""+t]),o.call(s,e,t,a,u,r),e&&i&&n(e,e[i],o,s,u,i)})});var Pe=Ae(function n(r,a,o,s,c,i,u){var l,p;return De(a,function(e,t){return l=c.concat([""+t]),(p=o.call(s,e,t,a,l,r))&&e&&i&&e[i]&&(p[u]=n(e,e[i],o,s,l,i,u)),p})});var Le={uniq:we,union:function(){for(var e=arguments,t=[],n=0,r=e.length;n<r;n++)t=t.concat(Ee(e[n]));return we(t)},sortBy:xe,shuffle:ke,sample:function(e,t){return e=ke(e),arguments.length<=1?e[0]:(t<e.length&&(e.length=t||0),e)},some:Ne,every:je,filter:function(n,r,a){var o=[];if(n&&r){if(a=a||this,n.filter)return n.filter(r,a);_e.each(n,function(e,t){r.call(a,e,t,n)&&o.push(e)})}return o},find:Oe,findKey:Se,map:De,sum:qe,mean:function(e,t,n){return d.toNumber(qe(e,t,n||this)/_e.getSize(e))},reduce:function(e,t,n){if(e){var r,a=0,o=this,s=n,c=2<arguments.length,i=_e.keys(e);if(e.length&&e.reduce)return n=function(){return t.apply(o,arguments)},c?e.reduce(n,s):e.reduce(n);for(c&&(a=1,s=e[i[0]]),r=i.length;a<r;a++)s=t.call(o,s,e[i[a]],a,e);return s}},copyWithin:function(e,t,n,r){if(_e.isArray(e)&&e.copyWithin)return e.copyWithin(t,n,r);var a,o,s=t>>0,n=n>>0,c=e.length,r=3<arguments.length?r>>0:c;if(s<c&&(s=0<=s?s:c+s,0<=s&&(n=0<=n?n:c+n)<(r=0<=r?r:c+r)))for(a=0,o=e.slice(n,r);s<c&&!(o.length<=a);s++)e[s]=o[a++];return e},chunk:function(e,t){var n,r=[],a=t>>0||1;if(_e.isArray(e))if(0<=a&&e.length>a)for(n=0;n<e.length;)r.push(e.slice(n,n+a)),n+=a;else r=e.length?[e]:e;return r},zip:function(){return Be(arguments)},unzip:Be,zipObject:function(e,n){var r={};return n=n||[],_e.each(_e.values(e),function(e,t){r[e]=n[t]}),r},toArray:Ee,includeArrays:function(e,t){var n,r=0,a=_e.includes;if(_e.isArray(e)&&_e.isArray(t)){for(n=t.length;r<n;r++)if(!a(e,t[r]))return!1;return!0}return a(e,t)},pluck:function(e,t){return De(e,t)},invoke:Ce,invokeMap:Ce,toArrayTree:function(e,t){var n,r,a,o,s,c=_e.assign({},y.treeOptions,t),i=c.strict,u=c.key,l=c.parentKey,p=c.children,d=c.sortKey,t=c.reverse,f=c.data,m=[],g={};return d&&(e=xe(_e.clone(e),d),t&&(e=e.reverse())),n=De(e,function(e){return e[u]}),_e.each(e,function(e){r=e[u],f?(a={})[f]=e:a=e,o=e[l],g[r]=g[r]||[],g[o]=g[o]||[],g[o].push(a),a[u]=r,a[l]=o,a[p]=g[r],i&&(!i||o)||_e.includes(n,o)||m.push(a)}),i&&(e=e,s=p,_e.each(e,function(e){e.children&&!e.children.length&&_e.remove(e,s)})),m},toTreeArray:function(e,t){return function t(n,e,r){var a,o=r.children,s=r.data;return _e.each(e,function(e){a=e[o],s&&(e=e[s]),n.push(e),a&&t(n,a,r)}),n}([],e,_e.assign({},y.treeOptions,t))},findTree:Me,eachTree:Fe,mapTree:Pe,filterTree:function(e,o,t,s){var c=[];return e&&o&&(s=s||this,Fe(e,function(e,t,n,r,a){o.call(s,e,t,n,r,a)&&c.push(e)},t)),c}};function Te(e){try{return e.setItem("__xe_t",1),e.removeItem("__xe_t"),!0}catch(e){return!1}}function Ue(e){return-1<navigator.userAgent.indexOf(e)}var Ge=window.document;var Re={browse:function(){var t,e,n,r,a="undefined",o={isNode:!1,isMobile:!1,isPC:!1,isDoc:("undefined"==typeof document?"undefined":s(document))!==a};return("undefined"==typeof window?"undefined":s(window))===a&&("undefined"==typeof process?"undefined":s(process))!==a?o.isNode=!0:(n=Ue("Edge"),e=Ue("Chrome"),r=/(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent),o.isDoc&&(a=document,t=a.body||a.documentElement,_e.each(["webkit","khtml","moz","ms","o"],function(e){o["-"+e]=!!t[e+"MatchesSelector"]})),_e.assign(o,{edge:n,msie:!n&&o["-ms"],safari:!e&&!n&&Ue("Safari"),isMobile:r,isPC:!r,isLocalStorage:Te(window.localStorage),isSessionStorage:Te(window.sessionStorage)})),o},copyContent:function(e){var t,n=((t=Ge.getElementById("$BESCopy"))||((t=Ge.createElement("input")).id="$BESCopy",t.style.width="48px",t.style.height="12px",t.style.position="fixed",t.style["z-index"]="0",t.style.left="-500px",t.style.top="-500px",Ge.body.appendChild(t)),t),r=null==e?"":""+e;try{return n.value=r,n.focus(),n.setSelectionRange(0,r.length),Ge.execCommand("copy",!0)}catch(e){}return!1}},Ye=864e5,ze=7*Ye,We="first",Je="last",$e=Date.now||function(){return Ke(new Date)},He=[{rules:[["yyyy",4],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]},{rules:[["ZZ",5],["Z",6]]}];function Ke(e){return e.getTime()}function Ze(e){return Date.UTC(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}function Ve(e){return e.getFullYear()}function Qe(e){return e.getMonth()}function Xe(e){return Ke((e=e,new Date(Ve(e),Qe(e),e.getDate())))}function et(t,n){var r,a,o,s,c,e,i,u,l=[];return t&&((u=_e.isDate(t))||/^[0-9]{11,13}$/.test(t)?e=new Date((u?Ke:Number)(t)):_e.isString(t)&&(n=n||y.formatDate,_e.each(He,function(e){for(o=0,s=e.rules,c=s.length;o<c;o++){if(r=s[o],-1<(a=n.indexOf(r[0]))){i=t.substring(a,a+r[1])||0,e.offset&&(i=parseFloat(i)+e.offset),l.push(i);break}o===c-1&&l.push(0)}}),(u=l[7])?"z"===u[0]||"Z"===u[0]?e=new Date(Ze(l)):(i=u.match(/([-+]{1})(\d{2}):?(\d{2})/))&&(e=new Date(Ze(l)-("-"===i[1]?-1:1)*parseInt(i[2])*36e5+6e4*parseInt(i[3]))):e=new Date(l[0],l[1],l[2],l[3],l[4],l[5],l[6]))),!e||isNaN(Ke(e))?"Invalid Date":e}function tt(e,t,n,r){t=t[n];return t?_e.isFunction(t)?t(r,n,e):t[r]:r}function nt(e,t,n){for(var r=(e=""+e).length;r<t;)e=n+e,r++;return e}function rt(t,e,n){if(t){if(t=et(t),_e.isDate(t)){for(var r,a=e||y.formatString,e=t.getHours(),o=e<12?"am":"pm",s=t.getTimezoneOffset()/60*-1,c=_e.assign({},y.formatStringMatchs,n?n.formats:null),i=[[/y{2,4}/g,"",function(e){return(""+Ve(t)).substr(4-e.length)}],[/M{1,2}/g,Qe(t)+1],[/d{1,2}/g,t.getDate()],[/H{1,2}/g,e],[/h{1,2}/g,e<=12?e:e-12],[/m{1,2}/g,t.getMinutes()],[/s{1,2}/g,t.getSeconds()],[/S{1,3}/g,t.getMilliseconds()],[/a/g,"",function(e){return tt(t,c,e,o)}],[/A/g,"",function(e){return tt(t,c,e,o.toLocaleUpperCase())}],[/e/g,"",function(e){return tt(t,c,e,t.getDay()-1)}],[/E/g,"",function(e){return tt(t,c,e,t.getDay())}],[/q/g,"",function(e){return tt(t,c,e,Math.floor((Qe(t)+3)/3))}],[/Z{1,2}/g,"",function(e){return tt(t,c,e,(0<=s?"+":"-")+nt(s,2,"0")+(1===e.length?":":"")+"00")}],[/W{1,2}/g,"",function(e){return nt(tt(t,c,e,it(t)),e.length,"0")}],[/D{1,3}/g,"",function(e){return nt(tt(t,c,e,ct(t)),e.length,"0")}]],u=0,l=i.length;u<l;u++)r=i[u],a=a.replace(r[0],r[2]||function(e){return nt(r[1],e.length,"0")});return a}return t}return""}function at(e,t,n){if(e=et(e),_e.isDate(e)&&(t&&(t=t&&!isNaN(t)?t:0,e.setFullYear(Ve(e)+t)),n||!isNaN(n))){if(n===We)return new Date(Ve(e),0,1);if(n===Je)return e.setMonth(11),ot(e,0,Je);e.setMonth(n)}return e}function ot(e,t,n){t=t&&!isNaN(t)?t:0;if(e=et(e),_e.isDate(e)){if(n||!isNaN(n)){if(n===We)return new Date(Ve(e),Qe(e)+t,1);if(n===Je)return new Date(Ke(ot(e,t+1,We))-1);e.setDate(n)}t&&e.setMonth(Qe(e)+t)}return e}function st(e,t,n){var r;return e=et(e),_e.isDate(e)?(r=Number(/^[0-7]$/.test(n)?n:e.getDay()),n=e.getDay(),n=Ke(e)+((0===r?7:r)-(0===n?7:n))*Ye,t&&!isNaN(t)&&(n+=t*ze),new Date(n)):e}function ct(e){return e=et(e),_e.isDate(e)?Math.floor((Xe(e)-Xe(at(e,0,We)))/Ye)+1:e}function it(e){if(e=et(e),_e.isDate(e)){e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return Math.round(((e.getTime()-t.getTime())/Ye+(t.getDay()+6)%7-3)/7)+1}return e}var ut={now:$e,timestamp:function(e,t){if(arguments.length){t=et(e,t);return _e.isDate(t)?Ke(t):t}return $e()},isDateSame:function(e,t,n){return!(!e||!t)&&rt(e,n)===rt(t,n)},toStringDate:et,toDateString:rt,getWhatYear:at,getWhatMonth:ot,getWhatWeek:st,getWhatDay:function e(t,n,r){if(t=et(t),_e.isDate(t)&&!isNaN(n)){if(t.setDate(t.getDate()+Number(n)),r===We)return new Date(Ve(t),Qe(t),t.getDate());if(r===Je)return new Date(Ke(e(t,1,We))-1)}return t},getYearDay:ct,getYearWeek:it,getMonthWeek:function e(t){var n,r=et(t);return _e.isDate(r)?((t=st(n=ot(r,0,We),0,1))<n&&(t=st(n,1,1)),t<=r?Math.floor((Xe(r)-Xe(t))/ze)+1:e(st(r,0,1))):r},getDayOfYear:function(e,t){return e=et(e),_e.isDate(e)?_e.isLeapYear(at(e,t))?366:365:e},getDayOfMonth:function(e,t){return e=et(e),_e.isDate(e)?Math.floor((Ke(ot(e,t,Je))-Ke(ot(e,t,We)))/Ye)+1:e},getDateDiff:function(e,t,n){var r,a,o,s,c,i,u,l={done:!1,time:0};if(e=et(e),t=t?et(t):new Date,_e.isDate(e)&&_e.isDate(t)&&(r=Ke(e))<(a=Ke(t)))for(s=l.time=a-r,c=n&&0<n.length?n:y.dateDiffRules,l.done=!0,u=0,i=c.length;u<i;u++)s>=(o=c[u])[1]?u===i-1?l[o[0]]=s||0:(l[o[0]]=Math.floor(s/o[1]),s-=l[o[0]]*o[1]):l[o[0]]=0;return l}},lt="undefined"!=typeof document;function pt(e,t){var n=parseFloat(t),r=new Date,a=r.getTime();switch(e){case"y":return ut.getWhatYear(r,n).getTime();case"M":return ut.getWhatMonth(r,n).getTime();case"d":return ut.getWhatDay(r,n).getTime();case"h":case"H":return a+60*n*60*1e3;case"m":return a+60*n*1e3;case"s":return a+1e3*n}return a}function dt(e){return(_e.isDate(e)?e:new Date(e)).toUTCString()}function ft(e,t,n){if(lt){var r,a,o,s,c,i=[],u=arguments,l=decodeURIComponent,p=encodeURIComponent,d=document,f=_e.each,m=_e.assign,g=_e.isObject;return this&&this.$context&&(this.$context=null),_e.isArray(e)?i=e:1<u.length?i=[m({name:e,value:t},n)]:g(e)&&(i=[e]),0<i.length?(f(i,function(e){r=m({},y.cookies,e),o=[],r.name&&(a=r.expires,o.push(p(r.name)+"="+p(g(r.value)?JSON.stringify(r.value):r.value)),a&&(a=isNaN(a)?a.replace(/^([0-9]+)(y|M|d|H|h|m|s)$/,function(e,t,n){return dt(pt(n,t))}):/^[0-9]{11,13}$/.test(a)||_e.isDate(a)?dt(a):dt(pt("d",a)),r.expires=a),f(["expires","path","domain","secure"],function(e){void 0!==r[e]&&o.push(r[e]&&"secure"===e?e:e+"="+r[e])})),d.cookie=o.join("; ")}),!0):(s={},(i=d.cookie)&&f(i.split("; "),function(e){c=e.indexOf("="),s[l(e.substring(0,c))]=l(e.substring(c+1)||"")}),1===u.length?s[e]:s)}return!1}function mt(e,t,n){return ft(e,t,n),ft}function gt(e,t){ft(e,0,_e.assign({expires:-1},y.cookies,t))}function yt(){return _e.keys(ft())}_e.assign(ft,{_c:!1,isKey:function(e){return _e.includes(yt(),e)},set:mt,setItem:mt,get:ft,getItem:ft,remove:gt,removeItem:gt,keys:yt,getJSON:ft});var ht={cookie:ft},vt="undefined"==typeof location?0:location,_t=decodeURIComponent,wt=encodeURIComponent;function bt(e){return xt(e.split("?")[1]||"")}function xt(e){var t,n={};return e&&_e.isString(e)&&_e.each(e.split("&"),function(e){t=e.split("="),n[_t(t[0])]=_t(t[1]||"")}),n}function kt(){return vt?vt.origin||vt.protocol+"//"+vt.host:""}function It(e){var r,a,t=""+e;return 0===t.indexOf("//")?t=(vt?vt.protocol:"")+t:0===t.indexOf("/")&&(t=kt()+t),e=t.replace(/#.*/,"").match(/(\?.*)/),(a={href:t,hash:"",host:"",hostname:"",protocol:"",port:"",search:e&&e[1]&&1<e[1].length?e[1]:""}).path=t.replace(/^([a-z0-9.+-]*:)\/\//,function(e,t){return a.protocol=t,""}).replace(/^([a-z0-9.+-]*)(:\d+)?\/?/,function(e,t,n){return r=n||"",a.port=r.replace(":",""),a.hostname=t,a.host=t+r,"/"}).replace(/(#.*)/,function(e,t){return a.hash=1<t.length?t:"",""}),t=a.hash.match(/#((.*)\?|(.*))/),a.pathname=a.path.replace(/(\?|#.*).*/,""),a.origin=a.protocol+"//"+a.host,a.hashKey=t&&(t[2]||t[1])||"",a.hashQuery=bt(a.hash),a.searchQuery=bt(a.search),a}var Nt={parseUrl:It,getBaseURL:function(){if(vt){var e=vt.pathname,t=_e.lastIndexOf(e,"/")+1;return kt()+(t===e.length?e:e.substring(0,t))}return""},locat:function(){return vt?It(vt.href):{}},serialize:function(e){var n,r=[];return _e.each(e,function(e,t){void 0!==e&&(n=_e.isArray(e),_e.isPlainObject(e)||n?r=r.concat(function n(e,r,a){var o,s=[];return _e.each(e,function(e,t){o=_e.isArray(e),_e.isPlainObject(e)||o?s=s.concat(n(e,r+"["+t+"]",o)):s.push(wt(r+"["+(a?"":t)+"]")+"="+wt(null===e?"":e))}),s}(e,t,n)):r.push(wt(t)+"="+wt(null===e?"":e)))}),r.join("&").replace(/%20/g,"+")},unserialize:xt};function jt(n){return function(e,t){return n(d.sortBy(_e.clone(e),t,this))}}var St=jt(function(e){return e[0]}),e=jt(function(e){return e.reverse()[0]});function Ot(t){return function(e){if(e){e=t(e);return isNaN(e)?0:e}return 0}}function Dt(e,t){return t?qt((""+qt(e)).replace(new RegExp("(\\d+.\\d{0,"+t+"}).*"),"$1")):Bt(e)}var qt=Ot(parseFloat),Bt=Ot(parseInt),n={random:function(e,t){return t<=e?e:(e>>=0)+Math.round(Math.random()*((t||9)-e))},min:St,max:e,commafy:function(e,t){if(e=(""+e).replace(/,/g,"")){var n=_e.assign({spaceNumber:3,separator:","},t),t=n.fixed,t=(t?qt(e).toFixed(t):e).split(".");return t[0].replace(new RegExp("(?=(?!(\\b))(\\d{"+n.spaceNumber+"})+$)","g"),n.separator)+(t[1]?"."+t[1]:"")}return e},toFixedString:function(e,t){return e=(""+Dt(e,t)).split("."),t?[e[0],".",d.padEnd(e[1]||"",t,"0")].join(""):e[0]},toFixedNumber:Dt,toNumber:qt,toInteger:Bt};function Et(e){return e&&e.trimLeft?e.trimLeft():(""+e).replace(/^[\s\uFEFF\xA0]+/g,"")}function Ct(e){return e&&e.trimRight?e.trimRight():(""+e).replace(/[\s\uFEFF\xA0]+$/g,"")}var At={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Mt={};function Ft(t){var n=new RegExp("(?:"+_e.keys(t).join("|")+")","g");return function(e){return(""+e).replace(n,function(e){return t[e]})}}function Pt(e,t){var n=""+e;if(e.repeat)return e.repeat(t);t=isNaN(t)?[]:new Array(parseInt(t));return t.join(n)+(0<t.length?n:"")}_e.each(At,function(e,t){Mt[At[t]]=t});q={trim:function(e){return e&&e.trim?e.trim():Ct(Et(e))},trimLeft:Et,trimRight:Ct,escape:Ft(At),unescape:Ft(Mt),camelCase:function(e){return(""+e).replace(/(-[a-zA-Z])/g,function(e,t){return t.substring(1).toLocaleUpperCase()})},kebabCase:function(e){return(""+e).replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},repeat:Pt,padStart:function(e,t,n,r){return t>>=0,n=n===r?" ":""+n,(e=""+e).padStart?e.padStart(t,n):t>e.length?((t-=e.length)>n.length&&(n+=Pt(n,t/n.length)),n.slice(0,t)+e):e},padEnd:function(e,t,n,r){return t>>=0,n=n===r?" ":""+n,(e=""+e).padEnd?e.padEnd(t,n):t>e.length?((t-=e.length)>n.length&&(n+=Pt(n,t/n.length)),e+n.slice(0,t)):e},startsWith:function(e,t,n){return e=""+e,0===(1===arguments.length?e:e.substring(n)).indexOf(t)},endsWith:function(e,t,n){return e=""+e,1===arguments.length?e.indexOf(t)===e.length-1:e.substring(0,n).indexOf(t)===n-1}};window.BECONFIG={},window.BECONFIG.topdomain=window.BECONFIG.topDomain=window._CONFIG&&window._CONFIG.topDomain?window._CONFIG.topDomain:window.location.host.split(".").slice(-2).join("."),window.BECONFIG.domain="https://www."+window.BECONFIG.topdomain,window.BECONFIG.restAPI="https://api."+window.BECONFIG.topdomain,window.BECONFIG.domainURL=window.BECONFIG.domain+"/jeecg-boot",window.BECONFIG.domian=window.BECONFIG.domain,window.BECONFIG.domianURL=window.BECONFIG.domain+"/jeecg-boot",window.BECONFIG.uploadURL="https://upload."+window.BECONFIG.topdomain,window.BECONFIG.uploaxURL="https://oa-system-oss.oss-cn-beijing.aliyuncs.com",window.BECONFIG.downloadURL=window.BECONFIG.uploaxURL,window.BECONFIG.ossURL=window.BECONFIG.uploaxURL,window.BECONFIG.docDownURL=window.BECONFIG.uploadURL,window.BECONFIG.imgDomainURL=window.BECONFIG.uploadURL,window.BECONFIG.previewURL="https://fileview."+window.BECONFIG.topdomain+"/onlinePreview?officePreviewType=image&url=",window.BECONFIG.officeURL="https://view.officeapps.live.com/op/view.aspx?src=",window.BECONFIG.thumborURL="https://thumbor."+window.BECONFIG.topdomain+"/unsafe/fill/100/60/sm/0/plain/",window.BECONFIG.imageURL=window.BECONFIG.previewURL,window.BECONFIG.videoURL=window.BECONFIG.previewURL,window.BECONFIG.viewURL=window.BECONFIG.domainURL+"/generic/web/viewer.html?file=",window.BECONFIG.casPrefixUrl="https://sso."+window.BECONFIG.topdomain+"/cas",window.BECONFIG.validURL=window.BECONFIG.domain+"/sys/common/url?path=",window.BECONFIG.staticDomainURL=window.BECONFIG.uploadURL,window.BECONFIG.ipLocationURL="https://apis.map.qq.com/ws/location/v1/ip?key=3BFBZ-ZKD3X-LW54A-ZT76D-E7AHO-4RBD5",window.BECONFIG.weatherURL="https://weather.".concat(window.BECONFIG.topdomain),window.BECONFIG.company="领地集团",window.BECONFIG.office_expire_time=1e4;var Lt={PDF_PREVIEW_URL:"/jeecg-boot/generic/web/viewer.html?file=",OFFICE_PREVIEW_URL:"/onlinePreview?officePreviewType=image&url=",OFFICE_PREVIEW_TYPE:["doc","docx","xlsx","xls","ppt","pptx"],WORKFLOW_STATUS:{1:"待提交",2:"处理中",3:"审核中",4:"已完成",5:"已知会"},WORKSTEP_STATUS:{1:"-1",2:"0",3:"1",4:"2",5:"3"},WORKSTEP_TYPE:{1:"none",2:"primary",3:"primary",4:"success",5:"success"},LEAVE_TYPE:{affairs_leave:"事假",sick_leave:"病假",marital_leave:"婚假",funeral_leave:"丧假",maternity_leave:"产假",paternity_leave:"陪产假",annual_leave:"年假",wr_injury_leave:"工伤假",other_leave:"其他"},REQUEST_API_CONFIG:{domain:window.BECONFIG.domain,restapi:window.BECONFIG.restAPI,token:"".concat(window.BECONFIG.domain,"/jeecg-boot/sys/common/token"),user:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/user"),role:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/role"),service:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/service"),permission:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/permission"),permissionNoPager:"".concat(window.BECONFIG.domain,"/jeecg-boot/api/permission/no-pager")},STORAGE_KEY:"system_oa_app",TOKEN_KEY:"Access-Token"},Tt=t(function(e){var t=function(s){var i,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",a=t.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a,o,s,c,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),r=new N(r||[]);return t._invoke=(a=e,o=n,s=r,c=p,function(e,t){if(c===f)throw new Error("Generator is already running");if(c===m){if("throw"===e)throw t;return S()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=function e(t,n){var r=t.iterator[n.method];if(r===i){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=i,e(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g;{if(!r.done)return r;n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=i)}n.delegate=null;return g}(n,s);if(r){if(r===g)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===p)throw c=m,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=f;r=l(a,o,s);if("normal"===r.type){if(c=s.done?m:d,r.arg!==g)return{value:r.arg,done:s.done}}else"throw"===r.type&&(c=m,s.method="throw",s.arg=r.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}s.wrap=c;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",g={};function y(){}function h(){}function v(){}var _={};_[r]=function(){return this};t=Object.getPrototypeOf,t=t&&t(t(j([])));t&&t!==e&&u.call(t,r)&&(_=t);var w=v.prototype=y.prototype=Object.create(_);function b(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function x(s,c){var t;this._invoke=function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,a){e=l(s[e],s,n);if("throw"!==e.type){var o=e.arg,n=o.value;return n&&"object"==typeof n&&u.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,a)},function(e){t("throw",e,r,a)}):c.resolve(n).then(function(e){o.value=e,r(o)},function(e){return t("throw",e,r,a)})}a(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return e.next=e}}return{next:S}}function S(){return{value:i,done:!0}}return((h.prototype=w.constructor=v).constructor=h).displayName=o(v,a,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,a,"GeneratorFunction")),e.prototype=Object.create(w),e},s.awrap=function(e){return{__await:e}},b(x.prototype),x.prototype[n]=function(){return this},s.AsyncIterator=x,s.async=function(e,t,n,r,a){void 0===a&&(a=Promise);var o=new x(c(e,t,n,r),a);return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(w),o(w,a,"Generator"),w[r]=function(){return this},w.toString=function(){return"[object Generator]"},s.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=j,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=i),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var s=u.call(a,"catchLoc"),c=u.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r,a=n.completion;return"throw"===a.type&&(r=a.arg,I(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),g}},s}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}});function Ut(e,t,n,r,a,o,s){try{var c=e[o](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}var Gt=function(c){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=c.apply(e,s);function a(e){Ut(r,t,n,a,o,"next",e)}function o(e){Ut(r,t,n,a,o,"throw",e)}a(void 0)})}};function Rt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Gt(Tt.mark(function e(t){var n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.BECONFIG&&superagent)return n="".concat(window.BECONFIG.validURL).concat(t),e.prev=2,e.next=5,superagent.get(n);e.next=13;break;case 5:return n=e.sent,console.log(" url :"+t+" result :"+JSON.stringify(n)),e.abrupt("return",n.body.success);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))).apply(this,arguments)}function zt(){return(zt=Gt(Tt.mark(function e(t){var n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.BECONFIG)return n=["doc","docx","xlsx","xls","ppt","pptx"],e.next=4,Rt(t.file);e.next=8;break;case 4:r=e.sent,a=(a=t.name.split("."))[a.length-1],!r&&n.includes(a)?window.open(window.BECONFIG.previewURL+t.msrc):window.open(t.src);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wt(){return(Wt=Gt(Tt.mark(function e(t){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{vant.Toast.success("开始下载中，请稍等..."),window.saveAs(t.msrc,t.name)}catch(e){window.open(t.msrc)}case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}J={queryUrlValid:Rt,handlePreview:function(e){return zt.apply(this,arguments)},handleDownLoad:function(e){return Wt.apply(this,arguments)}};var Jt=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r};var $t=function(e){if(Array.isArray(e))return Jt(e)};var Ht=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var Kt=function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}};var Zt=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Vt=function(e){return $t(e)||Ht(e)||Kt(e)||Zt()};function Qt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function en(e,t){"string"==typeof e&&e.includes("T")&&(e=new Date(e));if(/^\d+(\.\d+)?$/.test(e)||e instanceof Date){var n,r=e instanceof Date?e:new Date(e),a={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));try{t=t.replace("T"," ")}catch(e){console.log("formate date error : "+e)}return t}try{void 0!==e&&null!=e||(e="--"),t=(t=(e=e.trim()).substr(0,t.length)).replace("T"," ")}catch(e){console.log("formate date error : "+e)}return t}function tn(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{return void 0===e||null==e||""==e||"{}"==JSON.stringify(e)?t:e}catch(e){console.log(e)}}function nn(e){try{return void 0===e||null==e||""==e||"{}"==JSON.stringify(e)}catch(e){console.log(e)}}function rn(){return(rn=Gt(Tt.mark(function e(){var t,n=arguments;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<n.length&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function an(){function t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}if(1===arguments.length){var e=Array.prototype.slice.call(arguments)[0],n=Vt(Array(e).keys()).map(function(e){return t(0<e?0:1,9)});return parseInt(n.join(""))}if(2<=arguments.length){e=Array.prototype.slice.call(arguments),n=e[0],e=e[1];return t(n,e)}return Number.NaN}function on(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",t=e.split(t);return console.log("".concat(t.toString())),t[1].includes(">")?(t[1]=t[1].replace("项目组>",""),n=t[1].split(">")[0],r=t[1].split(">")[1]):n=t[1],{company:e,zone:n,project:r}}function sn(e,t){e=e||1,t=t||"0123456789qwertyuioplkjhgfdsazxcvbnm";for(var n="",r=0;r<e;r++)n+=t[an(0,t.length-1)];return n}function cn(){return(cn=Gt(Tt.mark(function e(t){var n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.BECONFIG.validURL).concat(t),e.prev=1,e.next=4,superagent.get(n);case 4:return n=e.sent,console.log(" url :"+t+" result :"+JSON.stringify(n)),e.abrupt("return",n.body.success);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function un(e){return window.decodeURIComponent(e)}K={tools:{filterObj:function(e){if("object"==s(e)){for(var t in e)!e.hasOwnProperty(t)||null!=e[t]&&null!=e[t]&&""!==e[t]||delete e[t];return e}},formatDate:en,deNull:tn,isNull:nn,isBlank:function(e){try{return nn(e)}catch(e){console.log(e)}},isEmpty:function(e){try{return nn(e)}catch(e){console.log(e)}},sleep:function(){return rn.apply(this,arguments)},divisionPercentage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0..toFixed(2),e="string"==typeof e?parseFloat(e):e,t="string"==typeof t?parseFloat(t):t;try{n=(nn(t)?0:parseFloat(e/t*100)).toFixed(2)}catch(e){console.log(e)}return n},cloneObject:function(e){return JSON.parse(JSON.stringify(e))},clone:function(e){return JSON.parse(JSON.stringify(e))},randomNumber:an,isWechat:function(){var e=navigator.userAgent.toLowerCase(),t=window.localStorage.getItem("system_navigator_useragent")||"";return"micromessenger"==e.match(/MicroMessenger/i)||t.match(/MicroMessenger/i),!0},isWework:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},isPCWeb:function(){var e=navigator.userAgent.toLowerCase(),t=window.localStorage.getItem("system_navigator_useragent")||"";return"micromessenger"!=e.match(/MicroMessenger/i)&&"micromessenger"!=t.match(/MicroMessenger/i)},queryZoneProject:on,queryZoneProjectAll:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";try{var r="",a=n?n.slice(0,n.lastIndexOf(">")):"",n=n?n.slice(n.lastIndexOf(">")+1):"",o=Qt(e);try{for(o.s();!(c=o.n()).done;){var s=c.value;if(t.includes(">".concat(s,">"))){var c=on(t,">".concat(s,">"));t=s,r=c.zone,a=c.project||a;break}}}catch(e){o.e(e)}finally{o.f()}return{company:t,zone:r,project:a,department:n}}catch(e){return{company:t,zone:"",project:"",department:n}}},randomString:sn,randomUUID:function(){return sn(32,"0123456789abcdef")},underLine2CamelCase:function(e){return e.replace(/_([a-z])/g,function(e,t){return t.toUpperCase()})},isEmail:function(e){return/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(e)},isMobile:function(e){return/^1[0-9]{10}$/.test(e)},isPhone:function(e){return/^([0-9]{3,4}-)?[0-9]{7,8}$/.test(e)},isURL:function(e){return/^http[s]?:\/\/.*/.test(e)},delHtmlTag:function(e){try{return nn(e)?"":tn(e).replace(/<[^>]+>/g,"").replace(/&nbsp;/g,"")}catch(e){console.log(e)}},abbreviation:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:75;try{return tn(e).length<t?tn(e).trim():tn(e).trim().substring(0,t)+"..."}catch(e){console.log(e)}},queryUrlValid:function(e){return cn.apply(this,arguments)},getUrlParam:function(e){try{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(t);return null!=t?un(t[2]):null}catch(e){console.log(e)}},queryUrlParam:function(e){return e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),null!=(e=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(e))?un(e[2]):null},encodeURI:function(e){return window.encodeURIComponent(e)},decodeURI:un,queryUrlString:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"history";try{if("history"==t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");return null!=(r=window.location.hash.substr(window.location.hash.indexOf("?")+1).match(n))?("system_type"==e&&localStorage.setItem("system_type",un(r[2])),un(r[2])):"system_type"==e?localStorage.getItem("system_type")||"v2":null}var r,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");if(null!=(r=window.location.search.substr(1).match(n)))return unescape(r[2])}catch(e){console.error(e)}return""},queryUniqueID:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,t=en((new Date).getTime(),"yyyyMMddhhmmssS");console.log("动态编号 :"+t);var n=Math.floor(1e20*Math.random())+""+Math.floor(1e20*Math.random())+"";return console.log("随机编号 :"+n),(t+n).replace(/\./g,"").substring(0,e)},mobileHide:function(e){return(e=e.slice(0,11)).replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},mobileEnsconce:function(e){return(e=e.slice(0,11)).replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3")},contain:function(e,t){e=",".concat(e,",");var n="";try{var r=Qt(t.split(","));try{for(r.s();!(a=r.n()).done;)var a=a.value,n=e.includes(",".concat(a,","))?"".concat(n,",").concat(a):n}catch(e){r.e(e)}finally{r.f()}}catch(e){console.log(e)}return n.startsWith(",")&&(n=n.substring(1)),n.endsWith(",")&&(n=n.substring(0,n.length-1)),n}}};try{localforage?localforage.config({driver:localforage.WEBSQL,name:"cache",version:1,size:4294967296,storeName:"keyvaluepairs",description:""}):localforage={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}}catch(e){console.log(e)}var ae={storage:{setStore:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(o.window&&e){"string"!=typeof t&&(t=JSON.stringify(t));var r=o.window.localStorage;try{r.setItem(e,t),localforage.setItem(e,t)}catch(e){console.log(e)}try{var a=parseInt((new Date).getTime()/1e3);n&&!isNaN(parseInt(n))&&(r.setItem("".concat(e,"_expire"),a+n),localforage.setItem("".concat(e,"_expire"),a+n))}catch(e){console.log(e)}}},getStore:function(e){if(o.window&&e){var t=window.localStorage.getItem(e),e=window.localStorage.getItem("".concat(e,"_expire"));if(e)if(e<parseInt((new Date).getTime()/1e3))return;try{"string"==typeof t&&/^[\{|\[](.*)[\}\]]$/.test(t)&&(t=JSON.parse(t))}catch(e){console.log(e)}return t}},clearStore:function(e){o.window&&e&&(window.localStorage.removeItem(e),window.localStorage.removeItem("".concat(e,"_expire")),localforage.removeItem(e),localforage.removeItem("".concat(e,"_expire")))},clearAll:function(e){o.window&&e&&("all"==e?(localforage.clear(),window.localStorage.clear()):("storage"!=e&&"db"==e?localforage:window.localStorage).clear())},setStoreAll:function(r,a){var o=arguments;return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=2<o.length&&void 0!==o[2]?o[2]:null,"string"!=typeof a&&(a=JSON.stringify(a));try{localforage.setItem(r,a)}catch(e){console.log(e)}try{localStorage.setItem(r,a)}catch(e){console.log(e)}if(t&&!isNaN(parseInt(t))){n=parseInt((new Date).getTime()/1e3);try{localforage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}try{localStorage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}}case 5:case"end":return e.stop()}},e)}))()},getStoreAll:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localforage.getItem(a);case 2:return t=e.sent,e.next=5,localforage.getItem("".concat(a,"_expire"));case 5:if(n=e.sent,null!=t&&void 0!==t||(t=localStorage.getItem(a)),null!=n&&void 0!==n||(n=localStorage.getItem("".concat(a,"_expire"))),!n){e.next=12;break}if(r=parseInt((new Date).getTime()/1e3),n<r)return e.abrupt("return");e.next=12;break;case 12:try{"string"==typeof t&&/^[\{|\[](.*)[\}\]]$/.test(t)&&(t=JSON.parse(t))}catch(e){console.log(e)}return e.abrupt("return",t);case 14:case"end":return e.stop()}},e)}))()},setStoreDB:function(r,a){var o=arguments;return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=2<o.length&&void 0!==o[2]?o[2]:null,"string"!=typeof a&&(a=JSON.stringify(a));try{localforage.setItem(r,a)}catch(e){console.log(e)}if(t&&!isNaN(parseInt(t))){n=parseInt((new Date).getTime()/1e3);try{localforage.setItem("".concat(r,"_expire"),n+t)}catch(e){console.log(e)}}case 4:case"end":return e.stop()}},e)}))()},getStoreDB:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localforage.getItem(a);case 2:return t=e.sent,e.next=5,localforage.getItem("".concat(a,"_expire"));case 5:if(!(n=e.sent)){e.next=10;break}if(r=parseInt((new Date).getTime()/1e3),n<r)return e.abrupt("return");e.next=10;break;case 10:try{"string"==typeof t&&/^[\{|\[](.*)[\}\]]$/.test(t)&&(t=JSON.parse(t))}catch(e){console.log(e)}return e.abrupt("return",t);case 12:case"end":return e.stop()}},e)}))()},clearDB:function(e){"all"==e?localforage.clear():(localforage.removeItem(e),localforage.removeItem("".concat(e,"_expire")))},getToken:function(){return getStore(Lt.TOKEN_KEY)},setToken:function(e){return setStore(Lt.TOKEN_KEY,e,2592e3)},removeToken:function(){return clearStore(Lt.TOKEN_KEY)},clearLoginInfo:function(){return Gt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{clearStore("system_linfo"),clearStore("system_userinfo"),clearStore("system_token"),clearStore("system_department"),clearStore("system_login_time"),clearDB("system_linfo"),clearDB("system_userinfo"),clearDB("system_token"),clearDB("system_department"),clearDB("system_login_time")}catch(e){console.log(e)}case 1:case"end":return e.stop()}},e)}))()}}},ln=K.tools,pn=ae.storage,se={announce:{queryAnnounceList:function(){var r=arguments;return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.restAPI,"/api/bs_announce?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_administration"),ln.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=ln.formatDate(e.operate_time,"yyyy-MM-dd"),n=ln.formatDate(e.create_time,"yyyy-MM-dd"),r=ln.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=ln.deNull(e.username).split(","),e.table_name="bs_announce",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_administration",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryHeadList:function(){var r=arguments;return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.restAPI,"/api/bs_redhead?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_redhead"),ln.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=ln.formatDate(e.operate_time,"yyyy-MM-dd"),n=ln.formatDate(e.create_time,"yyyy-MM-dd"),r=ln.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=ln.deNull(e.username).split(","),e.table_name="bs_redhead",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_redhead",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryNewsList:function(){var r=arguments;return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.restAPI,"/api/bs_news?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_news"),ln.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=ln.formatDate(e.operate_time,"yyyy-MM-dd"),n=ln.formatDate(e.create_time,"yyyy-MM-dd"),r=ln.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=ln.deNull(e.username).split(","),e.table_name="bs_news",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_news",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()},queryNoticeList:function(){var r=arguments;return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0<r.length&&void 0!==r[0]?r[0]:0,t=1<r.length&&void 0!==r[1]?r[1]:50,n="".concat(window.BECONFIG.restAPI,"/api/bs_notice?_where=(bpm_status,in,4,5)&_sort=-create_time&_p=").concat(n,"&_size=").concat(t),e.prev=3,t=pn.getStore("system_announce_notice"),ln.isNull(t)||t.length<=0||"undefined"==t)return e.next=8,superagent.get(n).set("accept","json");e.next=13;break;case 8:n=e.sent,(n=n.body).map(function(e){var t=ln.formatDate(e.operate_time,"yyyy-MM-dd"),n=ln.formatDate(e.create_time,"yyyy-MM-dd"),r=ln.formatDate(e.create_time,"yyyyMMddhhmmss");e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=ln.deNull(e.username).split(","),e.table_name="bs_notice",e.content=e.content||e.title}),t=n,pn.setStore("system_announce_notice",n,7200);case 13:return e.abrupt("return",t);case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:case"end":return e.stop()}},e,null,[[3,16]])}))()}}},dn="ALL_USER_CACHE_KEY_V10",fn="ALL_USER_CACHE_WORK_KEY_V10",mn="ALL_USER_CACHE_DEPART_KEY_V10",ce={contact:{queryDepartUserList:function(){return Gt(Tt.mark(function e(){var t,n,r,a,o,s;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.storage.getStore("system_userinfo");case 2:if(t=e.sent,n=Betools.tools.queryUrlString("system_type","history"),Betools.tools.isNull(t)||Betools.tools.isNull(t.main_department))return e.abrupt("return",{records:[],total:0});e.next=6;break;case 6:return r=t.main_department,e.next=9,Betools.storage.getStoreDB(mn+"#depart_id#"+r);case 9:if(a=e.sent,Betools.tools.isNull(a)){e.next=12;break}return e.abrupt("return",a);case 12:return a="https://api.yunwisdom.club:30443/api/".concat(n,"/wework_depart_list/").concat(t.main_department),e.next=15,superagent.get(a).set("accept","json");case 15:return s=e.sent,o=s.body.department.find(function(e){return e.id=t.main_department}),s="".concat(window.requestAPIConfig.restapi,"/api/").concat(n,"/wework_depart_user/").concat(o.parentid,"/1"),o={},e.prev=19,e.next=22,superagent.get(s).set("accept","json");case 22:return s=e.sent,window.__.each(s.body.userlist,function(e){try{e.wxid=e.userid}catch(e){console.log(e)}try{e.initial=e.name.slice(0,1).toLowerCase()}catch(e){console.log(e)}try{Betools.tools.isNull(e.avatar)?e.headerUrl="https://cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@v8.0.0/images/icon-manage-16.png":e.headerUrl=window._CONFIG.uploaxURL+"/"+e.avatar}catch(e){console.log(e)}try{e.nickname=e.name}catch(e){console.log(e)}try{e.remark=e.name}catch(e){console.log(e)}e.signature="",e.album=[{imgSrc:""}],e.area=["中国","四川","成都"],e.from="通过企业联系人添加",e.tag="",e.desc={title:"",picUrl:""},e.status="1",e.orgCode="",e.updateBy="",e.createTime=Betools.tools.formatDate(e.create_time,"yyyy-MM-dd"),e.createBy="admin",e.workNo="",e.delFlag="0",e.status_dictText="",e.birthday=Betools.tools.formatDate(e.birthday,"yyyy-MM-dd"),e.updateTime=e.createTime,e.telephone=e.phone,e.activitiSync="",e.sex="1",e.sex_dictText=""}),o.records=s.body.userlist,o.total=s.body.userlist.length,Betools.storage.setStoreDB(mn+"#depart_id#"+r,o,259200),e.abrupt("return",o);case 30:e.prev=30,e.t0=e.catch(19),console.log(e.t0);case 33:case"end":return e.stop()}},e,null,[[19,30]])}))()},queryWorkUserList:function(){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.requestAPIConfig.restapi,"/api/v3/employee"),n={},e.next=4,Betools.storage.getStoreDB(fn);case 4:if(r=e.sent,Betools.tools.isNull(r)){e.next=7;break}return e.abrupt("return",r);case 7:return e.prev=7,e.next=10,superagent.get(t).set("accept","json");case 10:return r=e.sent,window.__.each(r.body,function(e){try{e.wxid=e.username}catch(e){console.log(e)}try{e.initial=e.username.slice(0,1).toLowerCase()}catch(e){console.log(e)}try{Betools.tools.isNull(e.avatar)?e.headerUrl="https://cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@v8.0.0/images/icon-manage-16.png":e.headerUrl=window._CONFIG.uploaxURL+"/"+e.avatar}catch(e){console.log(e)}try{e.nickname=e.realname}catch(e){console.log(e)}try{e.remark=e.realname}catch(e){console.log(e)}e.signature="",e.album=[{imgSrc:""}],e.area=["中国","四川","成都"],e.from="通过企业联系人添加",e.tag="",e.desc={title:"",picUrl:""},e.status="1",e.orgCode="",e.updateBy="",e.createTime=Betools.tools.formatDate(e.create_time,"yyyy-MM-dd"),e.createBy="admin",e.workNo="",e.delFlag="0",e.status_dictText="",e.birthday=Betools.tools.formatDate(e.birthday,"yyyy-MM-dd"),e.updateTime=e.createTime,e.telephone=e.phone,e.activitiSync="",e.sex="1",e.sex_dictText=""}),n.records=r.body,n.total=r.body.length,Betools.storage.setStoreDB(fn,n,259200),e.abrupt("return",n);case 18:e.prev=18,e.t0=e.catch(7),console.log(e.t0);case 21:case"end":return e.stop()}},e,null,[[7,18]])}))()},queryUserList:function(o){return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.pageNo=o.pageNo-1,n=""==Betools.tools.deNull(o.username)?"":"_where=(username,like,~".concat(o.username,"~)~or(realname,like,~").concat(o.username,"~)&"),t="asc"==o.order?"":"-",a="".concat(window.requestAPIConfig.restapi,"/api/v_user?").concat(n,"_p=").concat(o.pageNo,"&_size=").concat(o.pageSize,"&_sort=").concat(t).concat(o.column),t="".concat(window.requestAPIConfig.restapi,"/api/v_user/count?").concat(n),n={},e.prev=6,e.next=9,superagent.get(a).set("accept","json");case 9:return r=e.sent,e.next=12,superagent.get(t).set("accept","json");case 12:return a=e.sent,console.log(r),window.__.each(r.body,function(e){try{e.wxid=e.username}catch(e){console.log(e)}try{e.initial=e.username.slice(0,1).toLowerCase()}catch(e){console.log(e)}try{Betools.tools.isNull(e.avatar)?e.headerUrl="https://cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@v8.0.0/images/icon-manage-16.png":e.headerUrl=window._CONFIG.uploaxURL+"/"+e.avatar}catch(e){console.log(e)}try{e.nickname=e.realname}catch(e){console.log(e)}try{e.remark=e.realname}catch(e){console.log(e)}e.signature="",e.album=[{imgSrc:""}],e.area=["中国","四川","成都"],e.from="通过企业联系人添加",e.tag="",e.desc={title:"",picUrl:""},e.status="1",e.orgCode="",e.updateBy="",e.createTime=Betools.tools.formatDate(e.create_time,"yyyy-MM-dd"),e.createBy="admin",e.workNo="",e.delFlag="0",e.status_dictText="",e.birthday=Betools.tools.formatDate(e.birthday,"yyyy-MM-dd"),e.updateTime=e.createTime,e.telephone=e.phone,e.activitiSync="",e.sex="1",e.sex_dictText=""}),n.records=r.body,n.total=a.body[0].no_of_rows<=o.pageSize?r.body.length:a.body[0].no_of_rows,e.abrupt("return",n);case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[6,20]])}))()},queryContacts:function(){return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.storage.getStore("system_userinfo");case 2:return t=e.sent,n=[],e.next=7,Betools.storage.getStoreDB(dn+"#depart#"+t.main_department);case 7:if(r=e.sent,Betools.tools.isNull(r)||r.length<=0)return e.next=11,queryDepartUserList();e.next=18;break;case 11:a=e.sent.records,a.total,Betools.tools.isNull(a)||a.length<=0||(n=[].concat(Vt(n),Vt(a))),Betools.storage.setStoreDB(dn+"#depart#"+t.main_department,n,86400),e.next=19;break;case 18:n=r;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}},e)}))()},getUserInfo:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Betools.storage.getStore("system_userinfo");case 2:if(t=e.sent,a&&t){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Betools.storage.getStoreDB(dn+"#depart#"+t.main_department);case 9:n=e.sent,e.t0=Tt.keys(n);case 11:if((e.t1=e.t0()).done){e.next=17;break}if(r=e.t1.value,n[r].wxid==a)return e.abrupt("return",n[r]);e.next=15;break;case 15:e.next=11;break;case 17:return e.next=19,getUserInfoByWxid(a);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e)}))()},getUserInfoByWxid:function(o){return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.userMap=new Map,t="contacts_cache_wxid".concat(o),Betools.tools.isNull(o)||o.startsWith("wxid"))return e.abrupt("return",{});e.next=4;break;case 4:return n="".concat(window.requestAPIConfig.restapi,"/api/v2/wework_user/").concat(o),e.prev=5,e.next=8,Betools.storage.getStoreDB("contacts_cache_wxid".concat(o));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0=window.userMap.get(t);case 11:if(void 0!==(r=e.t0)&&null!=r&&""!=r)return e.abrupt("return",r);e.next=14;break;case 14:return e.next=16,superagent.get(n).set("accept","json");case 16:if(null!=(a=e.sent).body)return window.userMap.set(t,a.body),e.next=21,Betools.storage.setStoreDB(t,a.body,86400);e.next=21;break;case 21:return e.abrupt("return",a.body);case 24:e.prev=24,e.t1=e.catch(5),console.log(e.t1);case 27:case"end":return e.stop()}},e,null,[[5,24]])}))()}}};function gn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hn=ae.storage,vn=K.tools,_n=ce.contact,Ne={query:{queryUserInfoByView:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="".concat(window.BECONFIG.restAPI,"/api/v_user?_where=(username,eq,").concat(r,")"),t=null,e.prev=2,void 0===(t=hn.getStore("system_v_user_info@username$".concat(r)))||null==t||""==t)return e.next=7,superagent.get(n).set("accept","json");e.next=10;break;case 7:n=e.sent,t=n.body,hn.setStore("system_v_user_info@username$".concat(r),t,86400);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))()},queryTableFieldInfoJSON:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,queryTableDataByField("v_table_info","id",n);case 3:if(t=e.sent,""!=vn.deNull(t)&&0<t.length)try{t=vn.deNull(t[0].value)}catch(e){console.log("tabale info :"+t)}if(""!=vn.deNull(t))try{t=JSON.parse(t)}catch(e){console.log("tabale info :"+t)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("query table field info json error :"+e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},queryTableFieldOrderJSON:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,queryTableDataByField("v_table_info","id",n);case 3:if(t=e.sent,""!=vn.deNull(t)&&0<t.length)try{t=vn.deNull(t[0].num)}catch(e){console.log("tabale info :"+t)}if(""!=vn.deNull(t))try{t=JSON.parse(t)}catch(e){console.log("tabale info :"+t)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("query table field info json error :"+e.t0);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))()},queryTableDataByField:function(n,r,a){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(a,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableData:function(r,a){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(r,"/").concat(a),e.prev=2,void 0!==(n=hn.getStore("sys_user_cache@".concat(r,"&id").concat(a)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&hn.setStore("sys_user_cache@".concat(r,"&id").concat(a),n.body[0],2),e.abrupt("return",n.body[0]);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryTableDataByPid:function(r,a){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(r,"?_where=(pid,eq,").concat(a,")&_sort=create_time"),e.prev=2,void 0!==(n=hn.getStore("sys_user_cache@".concat(r,"&pid").concat(a)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&hn.setStore("sys_user_cache@".concat(r,"&pid").concat(a),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])}))()},queryRoleGroupList:function(a){var o=arguments;return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=1<o.length&&void 0!==o[1]?o[1]:"",t="bs_admin_group",n="".concat(window.BECONFIG.restAPI,"/api/").concat(t,"?_where=(groupname,eq,").concat(a,")~and(userlist,like,~").concat(r,"~)&_sort=create_time"),e.prev=3,void 0!==(r=hn.getStore("sys_user_cache@".concat(t,"&groupname").concat(a)))&&null!=r&&""!=r)return e.abrupt("return",r);e.next=7;break;case 7:return e.next=9,superagent.get(n).set("accept","json");case 9:return null!=(r=e.sent).body&&0<r.body.length&&hn.setStore("sys_user_cache@".concat(t,"&groupname").concat(a),r.body,2),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))()},queryUserInfoByMobile:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/v2/wework_mobile/").concat(r),e.prev=1,void 0!==(n=hn.getStore("sys_user_cache_mobile_userinfo".concat(r)))&&null!=n&&""!=n)return console.log("mobile: ".concat(JSON.stringify(n))),e.abrupt("return",n);e.next=6;break;case 6:return e.next=8,superagent.get(t).set("accept","json");case 8:return null!=(n=e.sent).body&&0<n.body.length&&(console.log("mobile: ".concat(JSON.stringify(n.body))),hn.setStore("sys_user_cache_mobile_userinfo".concat(r),n.body,604800)),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}))()},queryMessages:function(o,s){var c=arguments;return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<c.length&&void 0!==c[2]?c[2]:0,n="bs_message",r="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=((team,like,~").concat(o,",").concat(s,"~)~or(team,like,~").concat(s,",").concat(o,"~))&_sort=-id"),e.prev=3,void 0!==(a=hn.getStore("sys_message_cache##v1@".concat(n,"&wxid").concat(o,"_wxid_").concat(s,"_maxid").concat(t)))&&null!=a&&""!=a)return e.abrupt("return",a);e.next=7;break;case 7:return e.next=9,superagent.get(r).set("accept","json");case 9:return null!=(a=e.sent).body&&0<a.body.length&&hn.setStore("sys_message_cache##v1@".concat(n,"&wxid").concat(o,"_wxid_").concat(s,"_maxid").concat(t),a.body,1),e.abrupt("return",a.body);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))()},querySealManMail:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(sign_man,eq,").concat(r,")&_fields=deal_mail,create_by&_p=0&_size=1"),e.prev=1,void 0!==(n=hn.getStore("sys_seal_man_mail_cache#v1@".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",0<n.length?n[0]:"");e.next=5;break;case 5:return e.next=7,superagent.get(t).set("accept","json");case 7:return null!=(n=e.sent).body&&0<n.body.length&&hn.setStore("sys_seal_man_mail_cache#v1@".concat(r),n.body,1),e.abrupt("return",n.body.length?n.body[0]:"");case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}))()},queryTableDataByWhereSQL:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryMailBySealData:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_where=(create_by,eq,".concat(n,")~and(deal_mail,like,~@~)&_p=0&_size=1"),t="".concat(window.BECONFIG.restAPI,"/api/").concat("bs_seal_regist","?").concat(t),e.prev=3,e.next=6,superagent.get(t).set("accept","json");case 6:return t=e.sent,e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}))()},queryFrontBySealData:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="_where=(create_by,eq,".concat(n,")~and(seal_type,eq,合同类)&_p=0&_size=1"),t="".concat(window.BECONFIG.restAPI,"/api/").concat("bs_seal_regist","?").concat(t),e.prev=3,e.next=6,superagent.get(t).set("accept","json");case 6:return t=e.sent,e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}))()},queryUserInfoByAccount:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(vn.isNull(r))return e.abrupt("return",{});e.next=2;break;case 2:if("".concat(window.BECONFIG.restAPI,"/api/v2/queryemployee/").concat(r),void 0!==(t=hn.getStore("sys_user_cache_account#queryemployee#@".concat(r)))&&null!=t&&""!=t)return e.abrupt("return",t);e.next=6;break;case 6:return e.prev=6,e.next=9,queryTableDataByField("bs_hrmresource","loginid",r);case 9:if(null!=(n=e.sent)&&0<n.length)return hn.setStore("sys_user_cache_account#queryemployee#@".concat(r),n[0],2678400),e.abrupt("return",n[0]);e.next=15;break;case 15:if(vn.isNull(n.text)){e.next=18;break}return hn.setStore("sys_user_cache_account#queryemployee#@".concat(r),n.text,2678400),e.abrupt("return",JSON.parse(n.text));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[6,20]])}))()},queryWeworkUser:function(){return Gt(Tt.mark(function e(){var t,n,r,a,o;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t=null,e.prev=2,r=vn.queryUrlString("code","search"),a=vn.queryUrlString("system_type","history")||"v2",!r){e.next=27;break}if(void 0!==(o=hn.getStore("sys_wework_user_code#wework_user_code#@".concat(r)))&&null!=o&&""!=o)return e.abrupt("return",o);e.next=9;break;case 9:return e.prev=9,e.next=12,superagent.get("https://api.yunwisdom.club:30443/api/".concat(a,"/wework_user_code/").concat(r));case 12:n=e.sent,t=n&&n.body&&n.body.userinfo&&0==n.body.userinfo.errcode?n.body.userinfo:null,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.log(e.t0);case 19:hn.setStore("system_linfo",JSON.stringify({username:n&&n.body&&n.body.userinfo?n.body.userinfo.userid||n.body.userinfo.username:"",password:"************"}),2592e3),hn.setStore("system_userinfo",JSON.stringify(n&&n.body&&n.body.userinfo?n.body.userinfo:""),2592e3),hn.setStore("system_token",JSON.stringify(r),2592e3),hn.setStore("system_department",JSON.stringify(n&&n.body&&n.body.userinfo&&n.body.userinfo.department||""),2592e3),hn.setStore("system_login_time",dayjs().format("YYYY-MM-DD HH:mm:ss"),2592e3),hn.setStore("sys_wework_user_code#wework_user_code#@".concat(r),JSON.stringify(t),2592e3),e.next=28;break;case 27:t=hn.getStore("system_userinfo");case 28:return e.abrupt("return",t);case 31:e.prev=31,e.t1=e.catch(2),console.log(e.t1);case 34:case"end":return e.stop()}},e,null,[[2,31],[9,16]])}))()},queryProcessLogByUserName:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(business_code,eq,000000000)~and(employee,eq,").concat(r,")&_sort=-operate_time"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryGoodsAdmin:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/bs_goods_receive?_where=(create_by,eq,").concat(n,")~and(status,in,待处理,已领取,已完成)&_sort=-create_time&_p=0&_size=1"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},queryAdminAdress:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/bs_admin_address?_where=(name,like,~").concat(n,"~)~and(status,eq,100)&_sort=-id"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},queryProcessLogHistoryByUserName:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log_history?_where=(table_name,eq,").concat(n,")~and(business_code,eq,000000000)~and(employee,eq,").concat(r,")&_sort=-operate_time"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},deleteTableData:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/").concat(r),e.prev=2,e.next=5,superagent.delete(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryVMessages:function(u,l){var p=arguments;return Gt(Tt.mark(function e(){var t,n,r,a,o,s,c,i;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<p.length&&void 0!==p[2]?p[2]:0,e.prev=1,n="v_messages",r="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=(team,like,~").concat(u,"~)&_sort=-id&_p=0&_size=100"),void 0!==(a=hn.getStore("sys_message_cache##v2@".concat(n,"&wxid").concat(u,"}&maxid").concat(t)))&&null!=a&&""!=a)return e.abrupt("return",a);e.next=7;break;case 7:return e.next=9,superagent.get(r).set("accept","json");case 9:if(!(null!=(o=e.sent).body&&0<o.body.length)){e.next=39;break}s=gn(o.body),e.prev=12,s.s();case 14:if((i=s.n()).done){e.next=29;break}return(c=i.value).mid=c.id,c.newMsgCount=1,c.quiet="true"==c.quiet,c.read="true"==c.read_,c.type="friend",c.heuserid=c.groupid.replace(u,"").replace(l,"").replace(/,/g,""),e.next=24,_n.getUserInfo(c.heuserid);case 24:i=e.sent,c.user=[i],c.msg=[{text:c.content,date:c.create_time}];case 27:e.next=14;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(12),s.e(e.t0);case 34:return e.prev=34,s.f(),e.finish(34);case 37:hn.setStore("sys_message_cache##v2@".concat(n,"&wxid").concat(u,"}&maxid").concat(t),o.body,1);case 39:return e.abrupt("return",o.body);case 42:e.prev=42,e.t1=e.catch(1),console.log(e.t1);case 45:case"end":return e.stop()}},e,null,[[1,42],[12,31,34,37]])}))()},queryRewardDataByID:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/v_reward_data?_where=(period,like,").concat(r,")&_sort=amount&_p=0&_size=1000"),void 0!==(n=hn.getStore("sys_v_reward_data&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&hn.setStore("sys_v_reward_data&id".concat(r),n.body,60),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()}}};function wn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xn=ae.storage,kn=K.tools,je={manage:{queryCurFreeWorkflow:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(window.BECONFIG.restAPI,"/api/bs_free_process?_where=(main_key,eq,").concat(r,")&_sort=-create_time"),t=[],e.prev=2,e.next=5,superagent.get(n).set("accept","json");case 5:n=e.sent,console.log(n),void 0===n.body||null==n.body||""==n.body||0==n.body.length?t=null:1<=n.body.length&&(t=n.body[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryUserName:function(){return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,n=[],e.prev=2,void 0!==(r=xn.getStore("cache_all_user_name"))&&null!=r&&0!=r.length){e.next=21;break}case 5:if(t<1e4)return a="".concat(window.BECONFIG.restAPI,"/api/v_uname?_p=").concat(t++,"&_size=1000"),e.next=9,superagent.get(a).set("accept","json");e.next=18;break;case 9:if(a=e.sent,n=n.concat(a.body),a.body.length<50)return e.abrupt("break",18);e.next=15;break;case 15:return e.abrupt("continue",5);case 16:e.next=5;break;case 18:xn.setStore("cache_all_user_name",n,7200),e.next=22;break;case 21:n=r;case 22:return e.abrupt("return",n);case 25:e.prev=25,e.t0=e.catch(2),console.log(e.t0);case 28:case"end":return e.stop()}},e,null,[[2,25]])}))()},patchEnameCname:function(c){return Gt(Tt.mark(function e(){var t,n,r,a,o,s;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n=kn.deNull(c).split(","),e.next=4,queryUserName();case 4:r=e.sent,a=wn(n);try{for(a.s();!(s=a.n()).done;)o=s.value,s=r.find(function(e){return o==e.username}),t=kn.isNull(s)?"".concat(t,",").concat(o):"".concat(t,",").concat(s.realname)}catch(e){a.e(e)}finally{a.f()}return t.startsWith(",")&&(t=t.substring(1)),t.endsWith(",")&&(t=t.substring(0,t.length-1)),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))()},handleUserInfo:function(t){return Gt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&null==t)return e.abrupt("return",!1);e.next=4;break;case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}},e)}))()},queryProcessLogByID:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(id,eq,").concat(r,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},setTimeouts:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var s=o[a];setTimeout(function(){e()},s)}},queryProcessNodeEmployee:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/bs_approve_node?_where=(name,eq,").concat(n,")"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t.body),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body[0].item_text),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryProcessNodeProcName:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/sys_dict_item?_where=(dict_id,eq,").concat(window.requestAPIConfig.PROCESS_NODE_DICT_ID,")~and(item_value,eq,").concat(n,")"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body[0].item_text),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryRandomStr:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:32,t="";try{t=kn.queryUniqueID(e)}catch(e){console.log("获取n位随机数异常："+e)}return t},postProcessLogInformed:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n=a instanceof Array&&1<a.length?"/bulk":"";try{a instanceof Array&&1==a.length&&(n="",a=a[0])}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.restAPI,"/api/pr_log_informed").concat(n)}catch(e){console.log(e)}return e.prev=4,e.next=7,superagent.post(t).send(a).set("accept","json");case 7:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[4,12]])}))()},postTableData:function(r,a){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.restAPI,"/api/").concat(r),t=a,Object.keys(t).map(function(e){t[e]=e.includes("_time")&&t[e]?dayjs(t[e]).format("YYYY-MM-DD HH:mm:ss"):t[e]}),void 0!==a&&null!=a&&a instanceof Array&&(n+="/bulk"),e.prev=5,e.next=8,superagent.post(n).send(a).set("accept","json");case 8:return n=e.sent,e.abrupt("return",n.body);case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[5,12]])}))()},queryUsernameByID:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,e.next=5,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=(loginid,eq,~").concat(n,"~)~and(status,ne,5)&_fields=id,lastname,loginid")).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body[0].lastname);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryUsernameByIDs:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=(loginid,in,").concat(n,")~and(status,ne,5)")).set("accept","json");case 3:return t=e.sent,e.abrupt("return",t.body);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()},queryUserByNameHRM:function(a){var o=arguments;return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:50,n=[],kn.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(a,"~)~or(loginid,like,~").concat(a,"~))~and(status,ne,5)~and(seclevel,lt,").concat(t,")")).set("accept","json");case 7:return r=e.sent,n=(n=Vt(r.body)).filter(function(e){return!kn.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByNameReward:function(a){var o=arguments;return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:101,n=[],kn.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(a,"~)~or(loginid,like,~").concat(a,"~))~and(seclevel,lt,").concat(t,")")).set("accept","json");case 7:return r=e.sent,n=(n=Vt(r.body)).filter(function(e){return!kn.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByLoginID:function(a){var o=arguments;return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<o.length&&void 0!==o[1]?o[1]:101,n=[],kn.isNull(a))return e.abrupt("return",[]);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((loginid,in,").concat(a,"))~and(seclevel,lt,").concat(t,")&_fields=loginid")).set("accept","json");case 7:return r=e.sent,n=(n=Vt(r.body)).filter(function(e){return!kn.isNull(e.loginid)}),e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserByID:function(o){var s=arguments;return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<s.length&&void 0!==s[1]?s[1]:"融量",n=2<s.length&&void 0!==s[2]?s[2]:101,r=[],kn.isNull(o))return e.abrupt("return",[]);e.next=5;break;case 5:return e.prev=5,e.next=8,superagent.get("".concat(window.BECONFIG.restAPI,"/api/v_hrmresource?_where=((loginid,in,").concat(o,"))~and(seclevel,lt,").concat(n,")~and(cname,eq,").concat(t,")&_sort=id")).set("accept","json");case 8:return a=e.sent,r=(r=Vt(a.body)).filter(function(e){return!kn.isNull(e.loginid)}),e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[5,14]])}))()},queryAddressByName:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],kn.isNull(r))return e.abrupt("return",[]);e.next=3;break;case 3:return e.prev=3,e.next=6,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_admin_group?_where=(groupname,eq,COMMON_RECEIVE_BORROW)~and(address,like,~").concat(r,"~)")).set("accept","json");case 6:return n=e.sent,t=Vt(n.body),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))()},queryUserByNameFindOne:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(kn.isNull(n)||kn.isNull(r))return e.abrupt("return",[]);e.next=2;break;case 2:return t=(n.includes("(")||n.includes("（")||!/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/.test(n)?"".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((loginid,like,~"):"".concat(window.BECONFIG.restAPI,"/api/bs_hrmresource?_where=((lastname,like,~").concat(n,"~)~and(loginid,like,~")).concat(r,"~))~and(status,ne,5)"),e.prev=3,e.next=6,superagent.get(t).set("accept","json");case 6:if((t=e.sent).body=t.body.filter(function(e){return!kn.isNull(e.loginid)}),t&&t.body&&1<=t.body.length)return e.abrupt("return",!0);e.next=12;break;case 12:return e.abrupt("return",!1);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}))()},queryTableData:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryTableDataCount:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/count?").concat(r),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body[0].no_of_rows);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},queryContractInfoByPrefix:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(contract_id,like,").concat(n,"~)~and(seal_type,eq,合同类)~and(status,in,已用印,已领取,移交前台,已完成,财务归档,档案归档,已归档)&_p=0&_size=8&_sort=-contract_id"),e.next=4,superagent.get(t).set("accept","json");case 4:if((t=e.sent)&&t.body&&1<=t.body.length)return e.abrupt("return",t.body);e.next=9;break;case 9:return e.abrupt("return",[]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))()},queryContractInfoByPrefixAll:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=dayjs().subtract(12,"months").format("YYYY-MM-DD"),t=dayjs().subtract("1","year").format("YYYY"),n=dayjs().format("YYYY"),r="".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=((contract_id,like,").concat(a,"[").concat(n,"]~)~or(contract_id,like,").concat(a,"~").concat(n,"~))~and(contract_id,nlike,~[").concat(t,"]~)~and(create_time,gt,").concat(r,")~and(seal_type,eq,合同类)~and(status,in,待用印,已退回,已废弃,已用印,已领取,移交前台,已完成,财务归档,档案归档,已归档)&_p=0&_size=3&_sort=-contract_id"),e.next=7,superagent.get(r).set("accept","json");case 7:if((r=e.sent)&&r.body&&1<=r.body.length)return e.abrupt("return",r.body);e.next=12;break;case 12:return e.abrupt("return",[]);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[0,15]])}))()},queryUserBySealData:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.BECONFIG.restAPI,"/api/bs_seal_regist?_where=(deal_manager,like,~").concat(n,"~)~and(deal_mail,like,~@~)&_size=1&_p=0")).set("accept","json");case 3:return t=e.sent,e.abrupt("return",t.body[0]);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}))()},queryCurNodePageType:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=kn.queryUrlString("type"),e.prev=1,"workflow"==t||"notify"==t)return e.next=5,queryProcessLogByID(kn.queryUrlString("table_name"),kn.queryUrlString("processLogID"));e.next=13;break;case 5:if(n=e.sent,""==kn.deNull(n))return e.next=9,queryProcessLogInfByID(kn.queryUrlString("table_name"),kn.queryUrlString("processLogID"));e.next=10;break;case 9:n=e.sent;case 10:r=""==kn.deNull(n)?"view":r,e.next=14;break;case 13:"workflowing"==t&&console.log("TODO 暂时不做");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("获取当前节点是否有知会或者审批节点信息异常:"+e.t0);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))()},queryProcessLogInfByID:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log_informed?_where=(table_name,eq,").concat(n,")~and(id,eq,").concat(r,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body[0]);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryProcessLog:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(n,")~and(business_data_id,eq,").concat(r,")&_sort=operate_time"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}))()},queryBusinessInfo:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/pr_rights?_where=(business,like,~").concat(n,"~)"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,console.log(t.body),void 0!==t&&t.body instanceof Array&&0<t.body.length&&void 0!==r&&r(t.body),e.abrupt("return",JSON.parse(JSON.stringify(t.body)));case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,11]])}))()},queryApprovalLength:function(r,a){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(r,")~and(business_data_id,eq,").concat(a,")"),t=!1,e.prev=3,e.next=6,superagent.get(n).set("accept","json");case 6:return n=e.sent,t=n.body.length,e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}))()},transFreeWflowHis:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,manageAPI.queryHisFreeWorkflow(a);case 3:return n=e.sent,e.next=6,manageAPI.insertTableData("bs_free_process_h",n);case 6:return r=e.sent,e.next=9,manageAPI.deleteTableItem("bs_free_process",n);case 9:t=e.sent,console.log("result :"+t+" wcode :"+r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("transfer free workflow node into history "+e.t0);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}},e,null,[[0,13]])}))()},patchTableData:function(r,a,o){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=r.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(r,"/").concat(a),void 0===o||null==o||""==o)return e.abrupt("return",!1);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.patch(t).send(o).set("accept","json");case 7:return n=e.sent,e.abrupt("return",n.body);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}))()},postProcessLog:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/pr_log"),e.prev=1,e.next=4,superagent.post(t).send(n).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},postProcessLogHistory:function(a){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n=a instanceof Array&&1<a.length?"/bulk":"";try{a instanceof Array&&1==a.length&&(n="",a=a[0])}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.restAPI,"/api/pr_log_history").concat(n)}catch(e){console.log(e)}return e.prev=4,e.next=7,superagent.post(t).send(a).set("accept","json");case 7:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[4,12]])}))()},deleteProcessLog:function(a,o){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=a.toLowerCase(),n=t="",o instanceof Array||(o=[o]);try{o.map(function(e){n=n+","+e.id}),n=0==n.indexOf(",")?n.substring(1):n}catch(e){console.log(e)}try{t="".concat(window.BECONFIG.restAPI,"/api/pr_log/bulk?_ids=").concat(n)}catch(e){console.log(e)}return e.prev=6,e.next=9,superagent.delete(t).set("accept","json");case 9:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))()},deleteProcessLogInf:function(a,o){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=a.toLowerCase(),n=t="",o instanceof Array||(o=[o]);try{o.map(function(e){t=t+","+e.id}),t=0==t.indexOf(",")?t.substring(1):t}catch(e){console.log(e)}try{n="".concat(window.BECONFIG.restAPI,"/api/pr_log_informed/bulk?_ids=").concat(t)}catch(e){console.log(e)}return e.prev=6,e.next=9,superagent.delete(n).set("accept","json");case 9:return r=e.sent,console.log(r),e.abrupt("return",r.body);case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[6,14]])}))()},queryApprovalExist:function(r,a){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r.toLowerCase(),n="".concat(window.BECONFIG.restAPI,"/api/pr_log?_where=(table_name,eq,").concat(r,")~and(business_data_id,eq,").concat(a,")"),t=!1,e.prev=3,e.next=6,superagent.get(n).set("accept","json");case 6:n=e.sent,t=0<n.body.length,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[3,10]])}))()},postProcessFreeNode:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.BECONFIG.restAPI,"/api/bs_free_process"),e.prev=1,e.next=4,superagent.post(t).send(n).set("accept","json");case 4:return t=e.sent,console.log(t),e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()},queryTableDataByField:function(n,r,a){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"?_where=(").concat(r,",eq,").concat(a,")"),e.prev=2,e.next=5,superagent.get(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},deleteTableData:function(n,r){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toLowerCase(),t="".concat(window.BECONFIG.restAPI,"/api/").concat(n,"/").concat(r),e.prev=2,e.next=5,superagent.delete(t).set("accept","json");case 5:return t=e.sent,e.abrupt("return",t.body);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))()},lock:function(){var o=arguments;return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<o.length&&void 0!==o[0]?o[0]:"crontab_task",n=1<o.length&&void 0!==o[1]?o[1]:864e5,e.prev=2,r=dayjs().format("YYYY-MM-DD hh:mm:ss"),e.next=6,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")~and(status,eq,1)~and(expire_time,gt,").concat(r,")&_sort=-id"));case 6:if((a=e.sent)&&0<a.length)return e.abrupt("return",!1);e.next=11;break;case 11:return e.next=13,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 13:return e.sent.map(function(e){Betools.manage.deleteTableData("bs_lock_info",e.id)}),a={id:Betools.tools.queryUniqueID(),lock_name:t,lock_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),lock_value:"",expire_time:dayjs().add(1,"millisecond").format("YYYY-MM-DD HH:mm:ss"),expire_timestamp:n||864e5,lock_remark:"",content:"",status:1,teamname:"",lock_username:"",lock_flag:"Y"},e.next=18,Betools.manage.postTableData("bs_lock_info",a);case 18:return e.abrupt("return",!0);case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e.catch(2),e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,null,[[2,21]])}))()},unlock:function(){var n=arguments;return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<n.length&&void 0!==n[0]?n[0]:"crontab_task",e.prev=1,e.next=4,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 4:return e.sent.map(function(e){Betools.manage.deleteTableData("bs_lock_info",e.id)}),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()}}},Oe={lock:{lock:function(){var s=arguments;return Gt(Tt.mark(function e(){var t,n,r,a,o;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<s.length&&void 0!==s[0]?s[0]:"crontab_task",n=1<s.length&&void 0!==s[1]?s[1]:864e5,r=2<s.length&&void 0!==s[2]?s[2]:"",e.prev=3,a=dayjs().format("YYYY-MM-DD hh:mm:ss"),e.next=7,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")~and(status,eq,1)~and(expire_time,gt,").concat(a,")&_sort=-id"));case 7:if((o=e.sent)&&0<o.length)return e.abrupt("return",!1);e.next=12;break;case 12:return e.next=14,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 14:return e.sent.map(function(e){Betools.manage.deleteTableData("bs_lock_info",e.id)}),o={id:Betools.tools.queryUniqueID(),lock_name:t,lock_time:dayjs().format("YYYY-MM-DD HH:mm:ss"),lock_value:"",expire_time:dayjs().add(1,"millisecond").format("YYYY-MM-DD HH:mm:ss"),expire_timestamp:n||864e5,lock_remark:"",content:"",status:1,teamname:"",lock_username:r,lock_flag:"Y"},e.next=19,Betools.manage.postTableData("bs_lock_info",o);case 19:return e.abrupt("return",!0);case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e.catch(3),e.abrupt("return",!1);case 25:case"end":return e.stop()}},e,null,[[3,22]])}))()},unlock:function(){var n=arguments;return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<n.length&&void 0!==n[0]?n[0]:"crontab_task",e.prev=1,e.next=4,Betools.query.queryTableDataByWhereSQL("bs_lock_info","_where=(lock_name,eq,".concat(t,")&_sort=-id"));case 4:return e.sent.map(function(e){Betools.manage.deleteTableData("bs_lock_info",e.id)}),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))()}}};function In(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn=K.tools,Sn=Ne.query,Se={task:{queryProcessLogDone:function(i,u){var l=arguments;return Gt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,jn.isNull(i)||jn.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.restAPI,"/api/v_handled_events_unq?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),a={},e.prev=6,e.next=9,superagent.get(r).set("accept","json");case 9:o=e.sent,console.log(o),a=(a=o.body).filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),a=dayjs(e.create_time).format("YYYY-MM-DD hh:mm:ss");return e.createtime=a,e.operate_time=t,e.create_time=n,e.timestamp=r,e.username=jn.deNull(e.username).split(","),e.content=jn.abbreviation(jn.delHtmlTag(e.content)),e.topic=jn.abbreviation(jn.delHtmlTag(e.topic)),e.username.includes(i)||e.username.includes(u)}),e.prev=13,o=In(a),e.prev=15,o.s();case 17:if((c=o.n()).done){e.next=32;break}if(s=c.value,e.prev=19,jn.isNull(s.sponsor)&&!jn.isNull(s.proponents))return e.next=23,Sn.queryUserInfoByAccount(s.proponents);e.next=25;break;case 23:c=e.sent,s.sponsor=c.realname||c.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(19),console.log(e.t0);case 30:e.next=17;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(15),o.e(e.t1);case 37:return e.prev=37,o.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(13),console.log(e.t2);case 46:return a=a.filter(function(t,e,n){return e===n.findIndex(function(e){return e.id==t.id})}),e.abrupt("return",a);case 50:e.prev=50,e.t3=e.catch(6),console.log(e.t3);case 53:case"end":return e.stop()}},e,null,[[6,50],[13,43],[15,34,37,40],[19,27]])}))()},queryProcessLogWait:function(i,u){var l=arguments;return Gt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,jn.isNull(i)||jn.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.restAPI,"/api/v_handling_events?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),a={},e.prev=6,e.next=9,superagent.get(r).set("accept","json");case 9:o=e.sent,a=o.body;try{a=a.filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),a=dayjs(e.create_time).format("YYYY-MM-DD hh:mm:ss");return e.createtime=a,e.timestamp=r,e.operate_time=t,e.create_time=n,e.username=jn.deNull(e.username).split(","),e.content=jn.abbreviation(jn.delHtmlTag(e.content)),e.topic=jn.abbreviation(jn.delHtmlTag(e.topic)),"bs_seal_regist"!==e.tname&&"bs_goods_receive"!==e.tname?(e.username.includes(i)||e.username.includes(u))&&!e.user.includes(i):e.username.includes(i)||e.username.includes(u)})}catch(e){console.log(e)}e.prev=12,o=In(a),e.prev=14,o.s();case 16:if((c=o.n()).done){e.next=32;break}if(s=c.value,e.prev=18,!jn.isNull(s.sponsor)||jn.isNull(s.proponents)){e.next=25;break}if(s.proponents.includes(",")){e.next=25;break}return e.next=23,Sn.queryUserInfoByAccount(s.proponents);case 23:c=e.sent,s.sponsor=c.realname||c.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(14),o.e(e.t1);case 37:return e.prev=37,o.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(12),console.log(e.t2);case 46:return e.abrupt("return",a);case 49:e.prev=49,e.t3=e.catch(6),console.log(e.t3);case 52:case"end":return e.stop()}},e,null,[[6,49],[12,43],[14,34,37,40],[18,27]])}))()},queryProcessLogWaitSeal:function(i,u){var l=arguments;return Gt(Tt.mark(function e(){var t,n,r,a,o,s,c;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<l.length&&void 0!==l[2]?l[2]:0,n=3<l.length&&void 0!==l[3]?l[3]:50,jn.isNull(i)||jn.isNull(u))return e.abrupt("return",[]);e.next=4;break;case 4:return r="".concat(window.BECONFIG.restAPI,"/api/v_handling_events?_where=(username,like,~").concat(i,"~)~or(username,like,~").concat(u,"~)&_p=").concat(t,"&_size=").concat(n,"&_sort=-create_time"),a={},e.prev=6,e.next=9,superagent.get(r).set("accept","json");case 9:o=e.sent,a=o.body;try{a=a.filter(function(e){var t=dayjs(e.operate_time).format("YYYY-MM-DD"),n=dayjs(e.create_time).format("YYYY-MM-DD"),r=dayjs(e.create_time).format("YYYYMMDDhhmmss"),a=dayjs(e.create_time).format("YYYY-MM-DD hh:mm:ss");return e.createtime=a,e.timestamp=r,e.operate_time=t,e.create_time=n,e.username=jn.deNull(e.username).split(","),e.content=jn.abbreviation(jn.delHtmlTag(e.content)),e.topic=jn.abbreviation(jn.delHtmlTag(e.topic)),("bs_seal_regist"===e.tname||"bs_goods_receive"===e.tname)&&(e.username.includes(i)||e.username.includes(u))})}catch(e){console.log(e)}e.prev=12,o=In(a),e.prev=14,o.s();case 16:if((c=o.n()).done){e.next=32;break}if(s=c.value,e.prev=18,!jn.isNull(s.sponsor)||jn.isNull(s.proponents)){e.next=25;break}if(s.proponents.includes(",")){e.next=25;break}return e.next=23,Sn.queryUserInfoByAccount(s.proponents);case 23:c=e.sent,s.sponsor=c.realname||c.lastname;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0);case 30:e.next=16;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(14),o.e(e.t1);case 37:return e.prev=37,o.f(),e.finish(37);case 40:e.next=46;break;case 43:e.prev=43,e.t2=e.catch(12),console.log(e.t2);case 46:return e.abrupt("return",a);case 49:e.prev=49,e.t3=e.catch(6),console.log(e.t3);case 52:case"end":return e.stop()}},e,null,[[6,49],[12,43],[14,34,37,40],[18,27]])}))()}}},Me={workconfig:{CON_SEAL_CODE_LENGTH:-4,mailconfig:{},config:{},system:{config:{regexp:{mail:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,mobile:""}}},group:{Group_LD:{seal:"",front:"",archive:"",prefix:"LD",name:"Group_LD"},ENTRY_JOB:{GROUP0:{JOB_HR_ADMIN:"",JOB_EXEC_ADMIN:"",JOB_MEAL_ADMIN:"",JOB_FRONT_ADMIN:""}}},statusType:{none:"待用印",seal:"已用印",receive:"已领取",sending:"已寄送",getback:"已寄回",front:"移交前台",archive:"归档完成",done:"已归档"},sealTypeNoName:{"合同类":"合同编号","非合同类":"流水编号"},compcolumns:{commonTypeColumns:["是","否"],archiveTypeColumns:["财务归档","档案归档"],orderTypeColumns:["我方先印","常规用印"],sealTypeColumns:["合同类","非合同类"],sealCategoryColumns:["公章","法人章","法人私章","合同专用章","财务专用章","发票专用章","物业服务章","工会公章","党支部章","工会法人章","工会财务章"],sealStatusColumns:["待用印","已用印","已领取","已寄送","移交前台","档案归档","财务归档","已退回","已作废"],diplomaTypeColumns:["博士","硕士","本科","专科","高中","初中","小学"],acceptType:["*/*"],approveColumns:["OA系统","ERP系统","费控系统","创达OA系统","CRM系统","EHR系统","资金系统","领地HR","宝瑞商管"]},goodstype:{office:"办公用品",drug:"药品",prevent:"防疫物资","办公用品":"office","药品":"drug","防疫物资":"prevent"},goodsborrowtype:{common:"信息设备",box:"传屏设备"},rewardtype:{0:"业绩考核奖",1:"总裁专项奖",2:"总经理专项奖",3:"特殊贡献奖",4:"其他奖罚"},reward:function(e){return[{id:"task-pane",title:"任务面板",taskflows:[{name:"我的待办",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/time_00.png",href:"/account/todolist",description:"查看待处理的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=mytodolist&type=7&back=/reward/workspace","_blank")}},{name:"我的已办",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/home_00.png",href:"/account/donelist",description:"查看已处理的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=mydonelist&type=7&back=/reward/workspace","_blank")}},{name:"我的申请",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/hire.png",href:"/account/donelist",description:"查看我发起的奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=myapplylist&type=7&back=/reward/workspace","_blank")}},{name:"我的奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/绩效管理.png",href:"/account/myrewards",description:"查看涉及我的奖罚明细",click:function(){e.$router.push("/reward/message?panename=myrewarditemslist&type=7&back=/reward/workspace","_blank")}},{name:"统计分析",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/zhushou.png",href:"/account/myanalyse",description:"查看自己的奖罚月/季度报表",click:function(){e.$router.push("/reward/message?panename=myanalyselist&type=7&back=/reward/workspace","_blank")}}]},{id:"task-pane",title:"奖罚申请",taskflows:[{name:"业绩考核奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.1/images/pay03.png",href:"/account/todolist",description:"业绩考核奖罚申请流程",click:function(){e.$router.push("/reward/rewardapply?type=0&reward_name=业绩考核","_blank")}},{name:"总裁专项奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/pay.png",href:"/account/donelist",description:"总裁专项奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=1&reward_name=总裁专项","_blank")}},{name:"总经理专项奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.0/images/pay02.png",href:"/account/donelist",description:"总经理专项奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=2&reward_name=总经理专项","_blank")}},{name:"特殊贡献奖",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.0/images/pay00.png",href:"/account/myrewards",description:"特殊贡献奖申请流程",click:function(){e.$router.push("/reward/rewardapply?type=3&reward_name=特殊贡献","_blank")}},{name:"其他奖罚",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdoms@r3.0.2/images/pay07.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardapply?type=4&reward_name=其他奖罚","_blank")}},{name:"月度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/yuebao.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardmonth?type=month")}},{name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/ribao.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/rewardmonth?type=quarter")}},{name:"奖罚审批",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/shenpi.png",href:"/account/myanalyse",description:"其他奖罚申请流程",click:function(){e.$router.push("/reward/message?panename=myrewardlist&type=7&back=/reward/workspace","_blank")}}]},{id:"common-pane",title:"常用应用",taskflows:[{name:"月度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/leave.png",href:"/account/todolist",description:"查看/导出月度奖罚明细及汇总",click:function(){}},{name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/position.png",href:"/account/donelist",description:"查看/导出月度奖罚明细及汇总",click:function(){}}]}]},getRewardQuickTag:function(e){return[{name:"我的待办",color:"purple",click:function(){}},{name:"我的已办",color:"cyan",click:function(){}},{name:"我的已办",color:"cyan",click:function(){}},{name:"我的奖罚",color:"pink",click:function(){}},{name:"统计分析",color:"blue",click:function(){}},{name:"报表导出",color:"red",click:function(){}},{name:"月度报表",color:"green",click:function(){}},{name:"季度报表",color:"blue",click:function(){}},{name:"部门分布",color:"orange",click:function(){}},{name:"类别分布",color:"pink",click:function(){}},{name:"奖罚排行榜",color:"cyan",click:function(){}},{name:"奖罚个人榜",color:"blue",click:function(){}},{name:"奖罚团队榜",color:"red",click:function(){}}]},getRewardWflow:function(e){return[{name:"月度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/account/center",click:function(){}},{name:"季度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/account/authors/index",click:function(){}},{name:"年度流程",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-file-04.svg",href:"/blog/rank",click:function(){}},{name:"流程报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/icon-rank-01.svg",href:"/blog/center",click:function(){}}]},columns:{reward:{items:[{title:"分配性质",dataIndex:"type",key:"type",scopedSlots:{customRender:"name"}},{title:"发放期间",dataIndex:"period",key:"period"},{title:"员工姓名",dataIndex:"username",key:"username",ellipsis:!0},{title:"员工OA",dataIndex:"account",key:"account",ellipsis:!0},{title:"所属单位",dataIndex:"company",key:"company",ellipsis:!0},{title:"所属部门",dataIndex:"department",key:"department",ellipsis:!0},{title:"员工职务",dataIndex:"position",key:"position",ellipsis:!0},{title:"分配金额",dataIndex:"amount",key:"amount",ellipsis:!0}],wfcolumns:[{title:"流程顺序",dataIndex:"key",key:"key",ellipsis:!0},{title:"审批人员",dataIndex:"username",key:"username",ellipsis:!0},{title:"审批账户",dataIndex:"userid",key:"userid",ellipsis:!0},{title:"所属单位",dataIndex:"company",key:"company",ellipsis:!0},{title:"所属部门",dataIndex:"department",key:"department",ellipsis:!0},{title:"审批职务",dataIndex:"position",key:"position",ellipsis:!0},{title:"联系电话",dataIndex:"mobile",key:"mobile",ellipsis:!0}]}},objects:{officeObjects:["笔记本","签字笔（黑）","签字笔（红）","订书机","订书针","回形针","U盘","笔筒","便利贴","标签贴","彩色便签","鼠标（有线）","鼠标垫","鼠标（无线）","插板","电池（5号）","电池（7号）","剪刀","胶棒","胶水","透明文件袋","美工刀","燕尾夹（大号）","燕尾夹（中号）","燕尾夹（小号）","抽杆文件夹","牛皮档案袋","牛皮档案盒","塑料档案盒","双面胶","透明胶带","橡皮擦","铅笔","荧光笔","文件夹","资料册","文件架","文件盘","印泥","起钉器","名片夹","派通笔","中性笔","名片盒","计算器","圆珠笔（黑）","圆珠笔（红）","彩色卡纸"],drugObjects:["感冒灵(999)","板蓝根","创口贴","碘伏","阿莫西林","和香正气","金嗓子","元和正胃片","蒙脱石散","感康","散列通","棉签纱布"]},queryAPI:{autoSerialAPI:"https://api.yunwisdom.club:30443/api/v2/mysql/serial/bs_seal_regist/serialid/id",tableSerialAPI:"https://api.yunwisdom.club:30443/api/v2/mysql/serial/{table_name}/serialid/id",patchSerialAPI:"https://api.yunwisdom.club:30443/api/v2/mysql/patchserial/bs_seal_regist/serialid/id"},compValidation:{seal:{message:{filename:"",count:"",dealDepart:"",dealManager:"",dealMail:"",signman:"",workno:"",sealtype:"",seal_category:"",ordertype:"",approveType:"",mobile:"",username:"",contractId:"",sealman:"",front:"",archive:"",prefix:"",meal_account:"",message:"",company:"",finance:"",record:"",partner:""},valid:{filename:"请输入文件名称！",count:"请输入文件份数！",dealDepart:"请输入经办部门！",dealManager:"请输入经办人!",dealMail:"请输入经办人邮箱!",signman:"请输入签收人！",workno:"请输入流程编号！",sealtype:"请选择用印类型！",seal_category:"请选择印章类型！",ordertype:"请选择用印顺序！",approveType:"请输入审批类型！",mobile:"请输入经办人电话!",username:"请输入经办人的OA账号!",contractId:"请输入合同编号！",sealman:"请输入印章管理员(盖印人)！",front:"请输入前台人员名称！",archive:"请输入归档人员名称！",prefix:"请输入合同对应的编号前缀！",meal_account:"请输入新员工的食堂账户！",message:"请印章管理员输入用印意见或备注说明！",company:"请输入用印公司名称！",finance:"请输入财务归档人员！",record:"请输入档案归档人员！",partner:"请输入合作方名称！"}},entryjob:{message:{username:"",department:"",position:"",picture:"",computer:"",seat:"",drawer:"",other_equip:"",notebook:"",manual:"",writingtools:"",badge:"",othertools:"",driving_license:"",driver_license:"",idcard:"",diploma:"",bachelor:"",join_time:"",hr_name:"",bank_card:"",mobile:"",meal_account:""},valid:{username:"请输入您的员工姓名！",department:"请输入您的入职部门！",position:"请输入您的入职岗位！",picture:"请上传您的一寸照片！",computer:"请选择是否需要电脑配置！",seat:"请选择是否需要办公座椅！",drawer:"请选择是否是否需要办公抽屉！",other_equip:"如果您有其他的办公配置要求，请填写在此处！",notebook:"请选择是否需要笔记/记事本等！",manual:"请选择是否需要入职手册！",writingtools:"请选择是否需要签字笔/擦！",badge:"请选择是否需要制作员工工牌！",othertools:"请输入您的其他办公用品需求！",driving_license:"请输入您的行驶证编号！",driver_license:"请输入您的驾驶证编号！",idcard:"请输入您的身份证编号！",diploma:"请输入您的学历证件编号！",bachelor:"请输入您的学位证件编号！",join_time:"请选择您的入职时间！",hr_name:"请选择您的对接HR姓名！",bank_card:"请输入您的工资银行卡号！",mobile:"请输入您的电话号码！",meal_account:"请输入新员工的食堂账户！"}},goodsreceive:{message:{create_time:"",create_by:"",receive_time:"",user_admin_name:"",name:"",amount:"",receive_name:"",department:"",remark:"",type:"",company:""},valid:{create_time:"请输入登记时间！",create_by:"请输入登记人员！",receive_time:"请输入领用时间！",user_admin_name:"请输入物品领用管理员！",name:"请输入领用物品名称！",amount:"请输入领用物品数量及单位！",receive_name:"请输入领用人员姓名！",department:"请输入领用人员所属部门！",remark:"请输入领用备注说明！",type:"请输入领用类别！",company:"请输入领用人员所属单位/公司名称！"}},borrowreceive:{message:{create_time:"",create_by:"",receive_time:"",user_admin_name:"",name:"",amount:"",receive_name:"",department:"",remark:"",type:"",company:""},valid:{create_time:"请输入登记时间！",create_by:"请输入登记人员！",receive_time:"请输入物品借用时间！",user_admin_name:"请输入物品借用管理员！",name:"请输入借用物品/设备名称！",amount:"请输入借用物品/设备数量及单位！",receive_name:"请输入借用人员姓名！",department:"请输入借用人员所属部门！",remark:"请输入物品借用备注说明！",type:"请输入物品借用类别！",company:"请输入借用人员所属单位/公司名称！"}},lostproperty:{message:{lost_name:"",lost_amount:"",user_admin_name:""},valid:{lost_name:"请输入物品名称！",lost_amount:"请输入物品数量及单位！",user_admin_name:"请输入失物招领处的物品管理员姓名！"}},visitorapply:{message:{time:"",visitor_name:"",visitor_company:"",visitor_mobile:"",visitor_position:"",visitor_name1:"",visitor_mobile1:"",visitor_name2:"",visitor_mobile2:"",visitor_name3:"",visitor_mobile3:"",visitor_name4:"",visitor_mobile4:"",visitor_name5:"",visitor_mobile5:"",visitor_name6:"",visitor_mobile6:"",visitor_name7:"",visitor_mobile7:"",visitor_name8:"",visitor_mobile8:"",visitor_name9:"",visitor_mobile9:"",visitor_name10:"",visitor_mobile10:"",visitor_name11:"",visitor_mobile11:"",visitor_name12:"",visitor_mobile12:"",visitor_name13:"",visitor_mobile13:"",visitor_name14:"",visitor_mobile14:"",visitor_name15:"",visitor_mobile15:"",visitor_name16:"",visitor_mobile16:"",visitor_name17:"",visitor_mobile17:"",visitor_name18:"",visitor_mobile18:"",visitor_name19:"",visitor_mobile19:"",visitor_name20:"",visitor_mobile20:"",employee:"",mobile:"",position:"",user_admin_name:""},valid:{time:"请输入预约时间！",visitor_name:"请输入访客姓名！",visitor_company:"请输入访客单位名称！",visitor_mobile:"请输入访客电话！",visitor_position:"请输入访客职务！",visitor_name1:"请输入访客姓名！",visitor_mobile1:"请输入访客电话！",visitor_name2:"请输入访客姓名！",visitor_mobile2:"请输入访客电话！",visitor_name3:"请输入访客姓名！",visitor_mobile3:"请输入访客电话！",visitor_name4:"请输入访客姓名！",visitor_mobile4:"请输入访客电话！",visitor_name5:"请输入访客姓名！",visitor_mobile5:"请输入访客电话！",visitor_name6:"请输入访客姓名！",visitor_mobile6:"请输入访客电话！",visitor_name7:"请输入访客姓名！",visitor_mobile7:"请输入访客电话！",visitor_name8:"请输入访客姓名！",visitor_mobile8:"请输入访客电话！",visitor_name9:"请输入访客姓名！",visitor_mobile9:"请输入访客电话！",visitor_name10:"请输入访客姓名！",visitor_mobile10:"请输入访客电话！",visitor_name11:"请输入访客姓名！",visitor_mobile11:"请输入访客电话！",visitor_name12:"请输入访客姓名！",visitor_mobile12:"请输入访客电话！",visitor_name13:"请输入访客姓名！",visitor_mobile13:"请输入访客电话！",visitor_name14:"请输入访客姓名！",visitor_mobile14:"请输入访客电话！",visitor_name15:"请输入访客姓名！",visitor_mobile15:"请输入访客电话！",visitor_name16:"请输入访客姓名！",visitor_mobile16:"请输入访客电话！",visitor_name17:"请输入访客姓名！",visitor_mobile17:"请输入访客电话！",visitor_name18:"请输入访客姓名！",visitor_mobile18:"请输入访客电话！",visitor_name19:"请输入访客姓名！",visitor_mobile19:"请输入访客电话！",visitor_name20:"请输入访客姓名！",visitor_mobile20:"请输入访客电话！",employee:"请输入填报人姓名！",mobile:"请输入填报人电话！",position:"请输入填报人职务！",user_admin_name:"请输入客服接待！"}},rewardapply:{message:{title:"",company:"",department:"",content:"",remark:"",amount:"",reward_type:"",reward_name:"",reward_period:"",hr_name:"",files:"",apply_realname:""},valid:{title:"请输入奖罚申请的标题！",company:"请输入申请人员的所在公司！",department:"请输入申请人员的所在部门！",content:"请输入奖罚申请流程的申请事由！",remark:"请输入备注信息！",amount:"请输入本次奖罚申请的单项奖金总额！",reward_type:"请输入奖罚类型！",reward_name:"请输入奖罚名称！",reward_period:"请输入奖罚所属周期！",hr_name:"请输入负责薪资管理的人力经理！",files:"请上传奖罚明细的Excel文档！",apply_realname:"请输入申请人姓名！"}}},commonUserInfo:{username:"common",realname:"",main_department:"",department:{name:""},parent_company:{name:""}},getPaneflows:function(e){return[{id:100,name:"我的知会",ename:"myrewardlist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/shenpi.png",href:"/account/myrewardlist",description:"查看知会(人力专项)申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myrewardlist"}},{id:0,name:"我的待办",ename:"mytodolist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/time_00.png",href:"/account/mytodolist",description:"查看待处理的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","知会我"],dataSource:[],click:function(){e.panename="mytodolist"}},{id:1,name:"我的已办",ename:"mydonelist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/home_00.png",href:"/account/mydonelist",description:"查看已处理的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","我发起","已审批","已驳回","知会我"],dataSource:[],click:function(){e.panename="mydonelist"}},{id:200,name:"我的申请",ename:"myapplylist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/hire.png",href:"/account/myapplylist",description:"查看我发起的奖罚申请流程",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myapplylist"}},{id:2,name:"我的奖罚",ename:"myrewardslist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/绩效管理.png",href:"/account/myrewardslist",description:"查看涉及我的奖罚明细",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部","待审批","审批中","已完成","已驳回"],dataSource:[],click:function(){e.panename="myrewardslist"}},{id:3,name:"统计分析",ename:"myanalyselist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/zhushou.png",href:"/account/myanalyselist",description:"查看自己的奖罚月/季度报表",show:!0,css:"",all:"全部",periodTabsFlag:!1,tabs:["全部"],click:function(){e.panename="myanalyselist"}},{id:4,name:"月度报表",ename:"mymonthlist",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/leave.png",href:"/account/mymonthlist",description:"查看/导出月度奖罚明细及汇总",show:!0,css:"",tabs:["全部","待处理","抄送我"],click:function(){e.panename="mymonthlist"}},{id:5,name:"季度报表",avatar:"//cdn.jsdelivr.net/gh/Miazzy/yunwisdom_cdn@v1.0.0/images/position.png",href:"/account/myquanterlist",description:"查看/导出月度奖罚明细及汇总",show:!0,css:"",tabs:["全部","待处理","抄送我"],click:function(){e.panename="myquanterlist"}}]}}},On=K.tools,Dn=ae.storage,qn=je.manage,Bn=Ne.query,Pe={workflow:{queryPRLogHistoryByDataID:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.BECONFIG.restAPI,"/api/pr_log_history?_where=(business_data_id,eq,").concat(r,")&_sort=operate_time&_p=0&_size=1000"),void 0!==(n=Dn.getStore("sys_workflow_cache@$history&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&Dn.setStore("sys_workflow_cache@$history&id".concat(r),n.body,2),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryPRLogByDataID:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.requestAPIConfig.restapi,"/api/pr_log?_where=(business_data_id,eq,").concat(n,")&_sort=operate_time&_p=0&_size=1000"),e.prev=1,e.next=4,superagent.get(t).set("accept","json");case 4:return t=e.sent,console.log(t),null!=t.body&&0<t.body.length&&Dn.setStore("sys_workflow_cache@$now&id".concat(n),t.body,0),e.abrupt("return",t.body);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))()},queryPRLogInformedByDataID:function(r){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.requestAPIConfig.restapi,"/api/pr_log_informed?_where=(business_data_id,eq,").concat(r,")&_sort=operate_time&_p=0&_size=1000"),void 0!==(n=Dn.getStore("sys_workflow_cache@$informed&id".concat(r)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&Dn.setStore("sys_workflow_cache@$informed&id".concat(r),n.body,60),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryPRLogUserByPage:function(r,a){return Gt(Tt.mark(function e(){var t,n;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="".concat(window.requestAPIConfig.restapi,"/api/v_uname?_p=").concat(r,"&_size=").concat(a,"&_sort=username"),void 0!==(n=Dn.getStore("sys_workflow_username@$all&p=".concat(r,"&size=").concat(a)))&&null!=n&&""!=n)return e.abrupt("return",n);e.next=4;break;case 4:return e.prev=4,e.next=7,superagent.get(t).set("accept","json");case 7:return n=e.sent,console.log(n),null!=n.body&&0<n.body.length&&Dn.setStore("sys_workflow_username@$all&p=".concat(r,"&size=").concat(a),n.body,3600),e.abrupt("return",n.body);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}))()},queryUserAll:function(){return Gt(Tt.mark(function e(){var t,n,r;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],void 0!==(r=Dn.getStore("sys_workflow_user_all@$all"))&&null!=r&&""!=r)return e.abrupt("return",r);e.next=4;break;case 4:n=0;case 5:if(n<=100)return e.next=8,queryPRLogUserByPage(n,99);e.next=17;break;case 8:if(!(null!=(r=e.sent)&&0<r.length)){e.next=13;break}t.push.apply(t,Vt(r)),e.next=14;break;case 13:return e.abrupt("break",17);case 14:n++,e.next=5;break;case 17:return null!=t&&0<t.length&&Dn.setStore("sys_workflow_user_all@$all",t,86400),e.abrupt("return",t);case 19:case"end":return e.stop()}},e)}))()},queryUserByName:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,queryUserAll();case 2:if(t=e.sent,null!=(t=t.find(function(e){return e.username==n}))&&null!=t.realname)return e.abrupt("return",t.realname);e.next=8;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))()},postWorkflowApprove:function(n,r,a,o,s,c,i,u,l,p){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,qn.postTableData("BS_TRANSACTION",a);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("流程事务处理框架处理异常",e.t0);case 10:if(e.prev=10,null!=o)return e.next=14,qn.postProcessLog(o);e.next=15;break;case 14:t=e.sent;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),console.log("审批处理下一节点的审批信息",e.t1);case 20:if(e.prev=20,null!=n&&null!=r&&null!=s&&null!=c)return e.next=24,qn.postProcessLogHistory(s);e.next=35;break;case 24:return t=e.sent,e.next=27,qn.deleteProcessLog(n,s);case 27:return t=e.sent,e.next=30,qn.patchTableData(n,r.business_data_id,c);case 30:return t=e.sent,e.next=33,qn.transFreeWflowHis(r.business_data_id);case 33:t=e.sent,setTimeout(Gt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.patchTableData(n,r.business_data_id,c);case 2:t=e.sent;case 3:case"end":return e.stop()}},e)})),100);case 35:e.next=40;break;case 37:e.prev=37,e.t2=e.catch(20),console.log("审批处理当前节点的审批信息",e.t2);case 40:return e.prev=40,i.audit_node=",".concat(i.audit_node,","),On.deNull(u)&&!i.audit_node.includes(u)&&(i.audit_node=i.audit_node.replace(",".concat(p,","),",".concat(p,",").concat(u,","))),On.deNull(l)&&!i.audit_node.includes(l)&&(i.audit_node=i.audit_node.replace(",".concat(p,","),",".concat(l,",").concat(p,","))),On.deNull(l)&&i.audit_node.indexOf(p)!=i.audit_node.lastIndexOf(p)&&(i.audit_node=i.audit_node.replace(",".concat(p,","),",")),i.audit_node.startsWith(",")&&(i.audit_node=i.audit_node.substring(1)),i.audit_node.endsWith(",")&&(i.audit_node=i.audit_node.substring(0,i.audit_node.length-1)),e.next=49,qn.patchTableData("bs_free_process",i.id,{audit_node:i.audit_node});case 49:t=e.sent,e.next=55;break;case 52:e.prev=52,e.t3=e.catch(40),console.log(e.t3);case 55:if(e.prev=55,"1"==c.bpm_status)return e.next=59,postDynamicReject(n,r);e.next=61;break;case 59:e.next=69;break;case 61:if("4"==c.bpm_status)return e.next=64,postDynamicAgree(n,r);e.next=66;break;case 64:e.next=69;break;case 66:if("5"==c.bpm_status)return e.next=69,postDynamicNotify(n,r);e.next=69;break;case 69:e.next=74;break;case 71:e.prev=71,e.t4=e.catch(55),console.log(e.t4);case 74:return console.log("加签用户："+u),console.log("会签用户："+l),e.abrupt("return",t);case 77:case"end":return e.stop()}},e,null,[[1,7],[10,17],[20,37],[40,52],[55,71]])}))()},approveViewProcessLog:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.postProcessLogHistory(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))()},taskViewProcessLog:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.postProcessLog(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))()},deleteViewProcessLog:function(n){return Gt(Tt.mark(function e(){var t;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.map(function(e){e.oid=e.id,e.id=e.pid}),e.next=3,qn.deleteProcessLog("",n);case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}))()},checkSubmitInfo:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"workflowing";try{if(""==On.deNull(n)&&"workflowing"==r)return vant.Toast.fail("请选择审批用户!"),!1;if(On.deNull(n).includes(",")&&"workflowing"==r)return vant.Toast.fail("审批用户只能选择一个!"),!1;if(""==On.deNull(t)&&"notifying"==r)return vant.Toast.fail("请选择知会用户!"),!1;if((","+e+",").includes(","+n+",")&&"workflowing"==r)return vant.Toast.fail("审批流程中，审批人员[${approver}]不能出现在审核人员中!"),!1}catch(e){console.log("check submit info error : "+e)}return!0},postWorkflowFree:function(u,l,p,d,f,m,g){return Gt(Tt.mark(function e(){var t,n,r,a,o,s,c,i;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=null,n={bpm_status:g},r={};try{d.notify_node=d.notify_node.replace(/undefined/g,""),d.notify_node.startsWith(",")&&(d.notify_node=d.notify_node.substring(1)),d.notify_node.endsWith(",")&&(d.notify_node=d.notify_node.substring(0,d.notify_node.length-1))}catch(e){console.log(e)}return e.prev=4,a=(new Date).getTime(),o=On.queryUniqueID(),e.next=9,Bn.queryTableData(l,p.id);case 9:return s=e.sent,e.next=12,qn.queryTableDataByField("v_table_name","id",l);case 12:c=e.sent;try{c=c[0].name}catch(e){console.log(e)}i="<div><span>"+u.realname+'</span> 发起了 <a href="/workflow/view?table_name='.concat(l,"&id=").concat(p.id,"&user=").concat(u.username,'&type=notify">')+c+'</a> 的 <a href="/workflow/view?table_name='.concat(l,"&id=").concat(p.id,"&user=").concat(u.username,'&type=notify">流程申请</a> ')+"</div>",r={id:o,create_by:u.username,create_time:On.formatDate(a,"yyyy-MM-dd hh:mm:ss"),update_by:u.username,title:i,content:i,main_key:p.id,main_table:l,main_data:JSON.stringify(s),relate_users:"".concat(d.audit_node,",").concat(d.approve_node,",").concat(d.notify_node,",").concat(u.username,",admin,")},d.main_data=JSON.stringify(s),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.log(e.t0);case 22:return e.prev=22,e.prev=23,e.next=26,qn.postProcessFreeNode(d);case 26:t=e.sent,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(23),console.log(e.t1);case 32:return e.prev=32,e.next=35,qn.postProcessLogHistory(f);case 35:t=e.sent,e.next=41;break;case 38:e.prev=38,e.t2=e.catch(32),console.log(e.t2);case 41:return e.prev=41,e.next=44,qn.postProcessLog(m);case 44:t=e.sent,e.next=50;break;case 47:e.prev=47,e.t3=e.catch(41),console.log(e.t3);case 50:return e.prev=50,e.next=53,qn.patchTableData(l,p.id,n);case 53:t=e.sent,e.next=59;break;case 56:e.prev=56,e.t4=e.catch(50),console.log(e.t4);case 59:return e.prev=59,e.next=62,qn.postTableData("bs_dynamic",r);case 62:t=e.sent,e.next=68;break;case 65:e.prev=65,e.t5=e.catch(59),console.log(e.t5);case 68:return e.prev=68,e.next=71,qn.patchTableData(l,p.id,n);case 71:t=e.sent,e.next=77;break;case 74:e.prev=74,e.t6=e.catch(68),console.log(e.t6);case 77:e.next=82;break;case 79:e.prev=79,e.t7=e.catch(22),console.log("处理自由流程发起提交审批操作异常："+e.t7);case 82:return e.abrupt("return",t);case 83:case"end":return e.stop()}},e,null,[[4,19],[22,79],[23,29],[32,38],[41,47],[50,56],[59,65],[68,74]])}))()}}};function En(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var An=K.tools,Mn=ae.storage,Fn=je.manage,Pn=Ne.query,Ln=Pe.workflow,St={wflowprocess:{handleApproveWF:function(){var L=arguments;return Gt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l,p,d,f,m,g,y,h,v,_,w,b,x,k,I,N,j,S,O,D,q,B,E,C,A,M,F,P;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<L.length&&void 0!==L[0]?L[0]:"",n=1<L.length&&void 0!==L[1]?L[1]:"",r=2<L.length&&void 0!==L[2]?L[2]:[],o=a="",s=An.queryUrlString("id"),c=window.decodeURIComponent(An.queryUrlString("tname")),i=a+","+o,e.next=11,Fn.queryCurFreeWorkflow(s);case 11:return u=e.sent,e.next=14,Pn.queryTableData(c,s);case 14:if(t=e.sent,l=JSON.parse(JSON.stringify(t)),""!=An.deNull(a)&&""!=An.deNull(o))return vant.Dialog.alert({message:"无法同时进行加签及会签操作，请单独选择加签用户或会签用户！"}),e.abrupt("return",!1);e.next=19;break;case 19:if(i=(i=i.startsWith(",")?i.substring(1):i).endsWith(",")?i.substring(0,i.length-1):i,console.log("会签/加签用户 : "+i),p=An.contain(u.audit_node+","+u.approve_node,i),An.isNull(p)){e.next=29;break}return e.next=26,Fn.patchEnameCname(p);case 26:return p=e.sent,vant.Dialog.alert({message:"加签/会签用户，不能选择审批流程中已经存在的用户(".concat(p,")!")}),e.abrupt("return",!1);case 29:return e.next=31,vant.Dialog.confirm({title:"确认操作",message:"是否确认提交此自由流程?"});case 31:return d=Mn.getStore("system_userinfo"),e.next=34,Fn.handleUserInfo(d);case 34:return f=An.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),m=m||"同意",g=g||t.idea_content||"同意",y=An.queryUrlString("pid"),v=[],x=b=w=_=s=h=null,e.prev=45,e.next=48,Fn.queryProcessLogByID(c,y);case 48:t=e.sent,e.next=54;break;case 51:e.prev=51,e.t0=e.catch(45),console.log(e.t0);case 54:if(""==An.deNull(t))return vant.Dialog.alert({message:"未找到下一节点的流程信息，请刷新页面，查看是否已经审批完成！"}),e.abrupt("return",!1);e.next=57;break;case 57:if(s=t.business_data_id,_=t.process_audit,An.deNull(t.employee).includes(d.username)||An.deNull(t.employee).includes(d.realname)){e.next=62;break}return vant.Dialog.alert({message:"您不在此审批流程记录的操作职员列中，无法进行审批操作！"}),e.abrupt("return",!1);case 62:return e.prev=62,e.next=65,Fn.queryProcessLog(c,s);case 65:v=e.sent,e.next=71;break;case 68:e.prev=68,e.t1=e.catch(62),console.log(e.t1);case 71:return v.map(function(e){var t=e.create_time;e.approve_user=d.username,e.action=m,e.operate_time=f,e.action_opinion=g,e.create_time=An.formatDate(t,"yyyy-MM-dd hh:mm:ss")}),w=JSON.parse(JSON.stringify(v)),e.next=75,Fn.queryBusinessInfo(c);case 75:if(b=e.sent,n=b[0],1<b.length&&"000000000"!=t.business_code)return vant.Dialog.alert({message:"获取到此业务含有多个流程权责，请联系管理员进行配置！"}),e.abrupt("return",!1);e.next=82;break;case 82:if(b.length<=0&&"000000000"!=t.business_code)return vant.Dialog.alert({message:"未获取到此业务的流程权责，无法同意审批！"}),e.abrupt("return",!1);e.next=87;break;case 87:if(I=_,N=(j=k="")==An.deNull(j)?"":j.split(","),"000000000"==t.business_code){e.next=105;break}e.prev=92,k=","+n.audit+","+n.approve+",",j=n.notify,h=n.approve,e.next=103;break;case 98:return e.prev=98,e.t2=e.catch(92),vant.Dialog.alert({message:"固化流程设置节点失败，无法进行审批操作！"}),console.log("固化流程设置节点失败 :"+e.t2),e.abrupt("return",!1);case 103:e.next=130;break;case 105:e.prev=105,I=t.employee;try{x=JSON.parse(t.business_data)}catch(e){console.log(e)}if(!("audit_node"in x||"approve_node"in x||"notify_node"in x))try{x=JSON.parse(x.business_data)}catch(e){console.log(e)}return e.next=111,Fn.queryCurFreeWorkflow(s);case 111:j=e.sent,""!=An.deNull(j)&&(x=j),console.log("free node back data : "+j),x.audit_node=",".concat(x.audit_node,","),x.audit_node.indexOf(","+I+",")!=x.audit_node.lastIndexOf(","+I+",")&&(x.audit_node=x.audit_node.replace(","+I+",",",")),""!=An.deNull(a)&&(x.audit_node=x.audit_node.replace(",".concat(I,","),",".concat(I,",").concat(a,","))),""!=An.deNull(o)&&(x.audit_node=x.audit_node.replace(",".concat(I,","),",".concat(I,",").concat(o,",").concat(I,","))),x.audit_node.startsWith(",")&&(x.audit_node=x.audit_node.substring(1)),x.audit_node.endsWith(",")&&(x.audit_node=x.audit_node.substring(0,x.audit_node.length-1)),k=","+An.deNull(x.audit_node)+","+An.deNull(x.approve_node)+",",N=""==An.deNull(x.notify_node)?[]:[x.notify_node],h=x.approve_node,e.next=130;break;case 125:return e.prev=125,e.t3=e.catch(105),vant.Dialog.alert({message:"自由流程设置节点失败，无法进行审批操作！"}),console.log("自由流程设置节点失败 :"+e.t3),e.abrupt("return",!1);case 130:if(""==An.deNull(a)&&""==An.deNull(o)&&k.indexOf(","+I+",")!=k.lastIndexOf(","+I+",")&&(k=k.replace(","+I+",",",")),O=k.split(","+I+","),S=O[1],O={},""!=S){e.next=201;break}O={bpm_status:"4"},D=En(N),e.prev=137,D.s();case 139:if((A=D.n()).done){e.next=166;break}if(q=A.value,E=B=null,C={},"000000000"!=t.business_code)return e.prev=145,e.next=148,Fn.queryProcessNodeEmployee(q);e.next=160;break;case 148:return B=e.sent,e.next=151,Fn.queryProcessNodeProcName(q);case 151:E=e.sent,e.next=157;break;case 154:e.prev=154,e.t4=e.catch(145),console.error(e.t4);case 157:C={id:Fn.queryRandomStr(32),table_name:c,main_value:t.main_value,business_data_id:t.business_data_id,business_code:n.id,process_name:n.items,employee:B[0].employee,process_station:E[0].item_text,process_audit:q,operate_time:f,create_time:f,proponents:t.proponents,content:t.content,business_data:JSON.stringify(t)},e.next=161;break;case 160:C={id:Fn.queryRandomStr(32),table_name:c,main_value:t.business_data_id,business_data_id:t.business_data_id,business_code:"000000001",process_name:"自由流程知会",employee:q,process_station:"自由流程知会",process_audit:"000000001",proponents:t.proponents,content:t.content,operate_time:f,create_time:f,business_data:t.business_data};case 161:return e.next=163,Fn.postProcessLogInformed(C);case 163:e.sent;case 164:e.next=139;break;case 166:e.next=171;break;case 168:e.prev=168,e.t5=e.catch(137),D.e(e.t5);case 171:return e.prev=171,D.f(),e.finish(171);case 174:return A={id:Fn.queryRandomStr(32),type:"approve",create_by:d.username,create_time:f,table_name:c,table_id:t.business_data_id,table_data:JSON.stringify(t),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:""}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:w}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:C}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:w}),origin_data:JSON.stringify({operation:"patch",tableName:c,id:t.business_data_id,data:O}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:JSON.stringify({})},e.next=177,Ln.postWorkflowApprove(c,t,A,null,w,O,x,a,o,I);case 177:return e.next=179,handleTaskItem(r,t);case 179:return vant.Dialog.alert({message:"同意审批成功，审批流程处理完毕！"}),M=null,e.prev=181,M=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(l.id,"&pid=&tname=bs_reward_apply&panename=myrewardlist&typename=hr_admin_ids&bpm_status=4&proponents=").concat(l.hr_admin_ids,"&role=hr")),e.next=185,superagent.get("".concat(window.requestAPIConfig.restapi,"/api/v1/weappms/").concat(l.hr_admin_ids,"/亲爱的同事，").concat(l.create_by,"提交的奖罚申请流程已处理完毕：").concat(l.title,"，内容：").concat(l.content,"，请及时进行知会确认操作！?type=reward&rurl=").concat(M)).set("accept","json");case 185:e.next=190;break;case 187:e.prev=187,e.t6=e.catch(181),console.log(e.t6);case 190:return e.prev=190,M=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(s,"&pid=&tname=bs_reward_apply&panename=mytodolist&typename=wflow_done&bpm_status=4&proponents=").concat(l.create_by)),e.next=194,superagent.get("".concat(window.requestAPIConfig.restapi,"/api/v1/weappms/").concat(l.create_by,"/亲爱的同事，您提交的奖罚申请流程已处理完毕：").concat(l.title,"，内容：").concat(l.content,"！?type=reward&rurl=").concat(M)).set("accept","json");case 194:e.next=199;break;case 196:e.prev=196,e.t7=e.catch(190),console.log(e.t7);case 199:e.next=239;break;case 201:if(S=(S=0==S.indexOf(",")?S.substring(1):S).split(",")[0],O=h==S?{bpm_status:"3"}:{bpm_status:"2"},C={},"000000000"!=t.business_code)return e.next=208,Fn.queryProcessNodeEmployee(S);e.next=215;break;case 208:return B=e.sent,e.next=211,Fn.queryProcessNodeProcName(S);case 211:E=e.sent,C={id:Fn.queryRandomStr(32),table_name:c,main_value:t.main_value,business_data_id:t.business_data_id,business_code:n.id,process_name:n.items,employee:B[0].employee,process_station:E[0].item_text,process_audit:S,proponents:t.proponents,content:t.content,create_time:f,business_data:t.business_data},e.next=216;break;case 215:C={id:Fn.queryRandomStr(32),table_name:c,main_value:t.business_data_id,business_data_id:t.business_data_id,business_code:"000000000",process_name:"自由流程审批",employee:S,process_station:"自由流程审批",process_audit:"000000000",proponents:t.proponents,content:t.content,operate_time:f,create_time:f,business_data:t.business_data};case 216:return e.next=218,Fn.queryApprovalLength(c,t.business_data_id);case 218:if(0!=(P=e.sent)){e.next=223;break}vant.Dialog.alert({message:"处理异常，请稍后重试；如果多次处理异常，可能需要撤销当前审批，重新发起审批流程！异常流程数据[status:".concat(P,"]")}),e.next=239;break;case 223:return F={id:Fn.queryRandomStr(32),type:"next",create_by:d.username,create_time:f,table_name:c,table_id:t.business_data_id,table_data:JSON.stringify(t),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:C}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:w}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:""}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:w}),origin_data:JSON.stringify({operation:"patch",tableName:c,id:t.business_data_id,data:O}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:""},e.next=226,Ln.postWorkflowApprove(c,t,F,C,w,O,x,a,o,I);case 226:return e.next=228,handleNotifyHR(S,t.proponents,"",encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(t.business_data_id,"&pid=").concat(C.id,"&tname=bs_reward_apply&panename=mytodolist&typename=wflow_todo&bpm_status=").concat(O.bpm_status,"&proponents=").concat(t.proponents)));case 228:return vant.Dialog.alert({message:"同意审批成功，审批流程已推向后续处理人！"}),console.log("operationData : "+F),e.prev=230,P=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(s,"&pid=&tname=bs_reward_apply&panename=mytodolist&typename=wflow_todo&bpm_status=2&proponents=").concat(S)),e.next=234,superagent.get("".concat(window.requestAPIConfig.restapi,"/api/v1/weappms/").concat(S,"/亲爱的同事，您收到奖罚申请流程审批处理请求：").concat(t.title,"，内容：").concat(t.content,"，请您及时进行审批处理！?type=reward&rurl=").concat(P)).set("accept","json");case 234:e.next=239;break;case 236:e.prev=236,e.t8=e.catch(230),console.log(e.t8);case 239:return e.abrupt("return","success");case 240:case"end":return e.stop()}},e,null,[[45,51],[62,68],[92,98],[105,125],[137,168,171,174],[145,154],[181,187],[190,196],[230,236]])}))()},handleNotifyHR:function(t,n,e,r){return Gt(Tt.mark(function e(){return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,superagent.get("".concat(window.requestAPIConfig.restapi,"/api/v1/weappms/").concat(t,"/亲爱的同事，员工‘").concat(n,"’提交了的奖罚申请流程，请到奖惩申请服务进行流程审批操作！?type=reward&rurl=").concat(r)).set("accept","json");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))()},handleTaskItem:function(o,s){var c=arguments;return Gt(Tt.mark(function e(){var t,n,r,a;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=2<c.length&&void 0!==c[2]?c[2]:"",a=An.queryUrlString("table_name"),n=(new Date).getTime(),"bs_plan_task"!=a){e.next=30;break}r=En(o),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=22;break}return delete(a=a.value).no,delete a.real_start_time,delete a.real_end_time,delete a.date,delete a.work_date,a.create_time=An.formatDate(n,"yyyy-MM-dd"),a.depart_name=s.depart_name,a.status="待提交",e.next=19,Fn.postTableData("bs_plan_task_mission",a);case 19:t=e.sent;case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),r.e(e.t0);case 27:return e.prev=27,r.f(),e.finish(27);case 30:return e.abrupt("return",t);case 31:case"end":return e.stop()}},e,null,[[5,24,27,30]])}))()},handleRejectWF:function(){return Gt(Tt.mark(function e(){var p;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p="",e.next=3,vant.Dialog.confirm({title:"确认操作",message:"是否进行驳回审批操作?"}).then(Gt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=An.queryUrlString("id"),n=window.decodeURIComponent(An.queryUrlString("tname")),e.next=4,Pn.queryTableData(n,t);case 4:return r=e.sent,a=JSON.parse(JSON.stringify(r)),o=Mn.getStore("system_userinfo"),e.next=9,Fn.handleUserInfo(o);case 9:return s=An.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),c=c||"驳回",i=i||r.idea_content||"驳回",l=An.queryUrlString("pid"),u={bpm_status:"1"},e.next=16,Fn.queryProcessLogByID(n,l);case 16:if(r=e.sent,An.deNull(r.employee).includes(o.username)||An.deNull(r.employee).includes(o.realname)){e.next=20;break}return vant.Dialog.alert({message:"您不在此审批流程记录的操作职员列中，无法进行驳回操作！"}),e.abrupt("return",!1);case 20:return e.next=22,Fn.queryProcessLogByID(n,r.id);case 22:return r=e.sent,e.next=25,Fn.queryProcessLog(n,r.business_data_id);case 25:return(l=e.sent).map(function(e){var t=e.create_time;e.approve_user=o.username,e.action=c,e.operate_time=s,e.action_opinion=i,e.create_time=An.formatDate(t,"yyyy-MM-dd hh:mm:ss")}),e.next=29,Ln.postWorkflowApprove(n,r,null,null,l,u);case 29:return vant.Dialog.alert({message:"驳回审批成功！"}),e.prev=30,receiveURL=encodeURIComponent("".concat(window.requestAPIConfig.vuechatdomain,"/#/reward/rewardview?id=").concat(t,"&pid=&tname=bs_reward_apply&panename=mytodolist&typename=wflow_done&bpm_status=4&proponents=").concat(a.create_by)),e.next=34,superagent.get("".concat(window.requestAPIConfig.restapi,"/api/v1/weappms/").concat(a.create_by,"/亲爱的同事，您提交的奖罚申请流程已被驳回：").concat(a.title,"，内容：").concat(a.content,"，驳回意见：").concat(i,"，请修改申请内容后重新提交流程?type=reward&rurl=").concat(receiveURL)).set("accept","json");case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(30),console.log(e.t0);case 39:return p="success",e.abrupt("return",p);case 41:case"end":return e.stop()}},e,null,[[30,36]])})));case 3:return e.abrupt("return",p);case 4:case"end":return e.stop()}},e)}))()},handleConfirmWF:function(){return Gt(Tt.mark(function e(){var p;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p="",e.next=3,vant.Dialog.confirm({title:"确认操作",message:"是否进行确认知会操作?"}).then(Gt(Tt.mark(function e(){var t,n,r,a,o,s,c,i,u,l;return Tt.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=An.queryUrlString("id"),n=window.decodeURIComponent(An.queryUrlString("tname")),e.next=4,Pn.queryTableData(n,t);case 4:return r=e.sent,a=Mn.getStore("system_userinfo"),e.next=8,Fn.handleUserInfo(a);case 8:return o=An.formatDate((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),s=s||"知会",c=c||r.idea_content||"知会确认",u=An.queryUrlString("pid"),i={bpm_status:"5"},e.next=15,Fn.queryProcessLogInfByID(n,u);case 15:if((r=e.sent).create_time=o,An.deNull(r.approve_user).length>=An.deNull(r.employee).length)return e.prev=18,e.next=21,Fn.postProcessLogHistory(r);e.next=36;break;case 21:return p=e.sent,e.next=24,Fn.deleteProcessLogInf(n,[r]);case 24:return p=e.sent,e.next=27,Fn.patchTableData(n,r.business_data_id,i);case 27:p=e.sent,e.next=33;break;case 30:e.prev=30,e.t0=e.catch(18),console.log(e.t0);case 33:return vant.Dialog.alert({message:"知会确认成功！"}),p="success",e.abrupt("return",p);case 36:if(u=","+An.deNull(r.employee)+",",l=","+An.deNull(r.approve_user)+",",An.deNull(u).includes(","+a.username+",")||An.deNull(u).includes(","+a.realname+",")){e.next=42;break}return vant.Dialog.alert({message:"您不在此知会记录的操作职员列中，无法进行确认操作！"}),p="success",e.abrupt("return",p);case 42:if(An.deNull(l).includes(","+a.username+",")||An.deNull(l).includes(","+a.realname+","))return vant.Dialog.alert({message:"您已经在此知会记录中，执行过确认操作了！"}),p="success",e.abrupt("return",p);e.next=46;break;case 46:return r.approve_user=An.deNull(r.approve_user)+(""==An.deNull(r.approve_user)?"":",")+a.username,r.action=s,r.operate_time=o,r.action_opinion=An.deNull(r.action_opinion)+(""==An.deNull(r.action_opinion)?"":"\n\r")+"".concat(a.username,":").concat(c),e.next=52,Fn.patchTableData("PR_LOG_INFORMED",r.id,r);case 52:if(r.approve_user.length>=r.employee.length)return e.prev=53,e.next=56,Fn.postProcessLogHistory(r);e.next=68;break;case 56:return p=e.sent,e.next=59,Fn.deleteProcessLogInf(n,[r]);case 59:return p=e.sent,e.next=62,Fn.patchTableData(n,r.business_data_id,i);case 62:p=e.sent,e.next=68;break;case 65:e.prev=65,e.t1=e.catch(53),console.log(e.t1);case 68:return vant.Dialog.alert({message:"知会确认成功！"}),p="success",e.abrupt("return",p);case 71:case"end":return e.stop()}},e,null,[[18,30],[53,65]])})));case 3:return e.abrupt("return",p);case 4:case"end":return e.stop()}},e)}))()}}},e={};Object.assign(e,Le,_e,Re,ht,ut,Nt,n,q,Lt,J,K,ae,se,Ne,je,Se,Me,Pe,St,ce,Oe);var Tn=e;d.mixin=function(e){return Tn.each(e,function(t,e){d[e]=Tn.isFunction(t)&&!1!==t._c?function(){var e=t.apply(d.$context,arguments);return d.$context=null,e}:t}),d},d.setup=function(e){Tn.assign(y,e)},d.mixin(Tn);e=d;return e.default=d,e});
